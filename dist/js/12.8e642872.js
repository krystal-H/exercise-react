(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{"15YJ":function(e,t,n){"use strict";n.r(t);n("pNMO"),n("4Brf"),n("0oug"),n("yXV3"),n("4mDm"),n("oVuX"),n("2B1R"),n("zKZe"),n("NBAS"),n("tkto"),n("ExoC"),n("07d7"),n("PKPk"),n("Rm1S"),n("UxlC"),n("FZtP"),n("3bBZ");var a=n("E+oP"),r=n.n(a),o=n("q1tI"),s=n.n(o),c=n("Ty5D"),i=n("/MKj"),l=n("Nlzp"),u=n("d8kt"),p=n("vS40"),d=n("k+EZ"),f=n("UpsA"),g=n("MeRu"),m=n("MUf8"),y=(n("mbEz"),n("wCAj")),h=(n("L/Qf"),n("2/Rp")),b=(n("K4yd"),n("9yH6")),v=n("cu44"),w=n("DgvE"),E=n("55Ip"),T=20,C=[{title:"消息标题",dataIndex:"noticeTitle",render:function(e,t){var n=t.noticeTitle,a=t.noticeId,r=t.read;return s.a.createElement(E.b,{className:r?"gray":"",to:{pathname:"/messageCenter/detail/".concat(a),state:{read:r}}},n)}},{title:"消息类型",dataIndex:"noticeTypeName",width:"300px"},{title:"时间",width:"400px",dataIndex:"sendTime",render:function(e,t){var n=t.sendTime;return s.a.createElement("span",null,w.a.utcToDev(+n))}}];function x(e){var t=e.messageList,n=void 0===t?[]:t,a=e.selectedRowKeys,r=e.noticeType,o=e.changeMessageType,c=e.setReaded,i=e.onSelectChange,l=e.newMessageNums,u=e.pager,p=e.pageIndex,d=e.changePage,f=e.read,g=a.length>0,m=l.totalUnRead,E=l.processUnRead,x=l.serviceUnRead,I=l.publicUnRead,O=!(!0===f);n=Object(w.c)(n);var N={selectedRowKeys:a,onChange:i,getCheckboxProps:function(e){return{disabled:e.read}}};return s.a.createElement(v.a,null,s.a.createElement("div",{className:"message-wrapper"},s.a.createElement(b.a.Group,{value:r+"",onChange:o},s.a.createElement(b.a.Button,{value:""},"全部类型消息 ",O?R(m):""),s.a.createElement(b.a.Button,{value:"2"},"  流程消息 ",O?R(E):""),s.a.createElement(b.a.Button,{value:"3"},"  服务消息 ",O?R(x):""),s.a.createElement(b.a.Button,{value:"1"},"  公告消息 ",O?R(I):"")),s.a.createElement(h.a,{style:{float:"right"},disabled:!g,onClick:function(){return c()},type:"primary"},"标记已读")),s.a.createElement("section",{className:"table-wrapper"},s.a.createElement(y.a,{rowSelection:N,dataSource:n,columns:C,pagination:{total:u.totalRows,current:p,defaultCurrent:1,defaultPageSize:T,onChange:function(e){return d(e)},showTotal:function(e){return s.a.createElement("span",null,"共 ",s.a.createElement("a",null,e)," 条")},showQuickJumper:!0,hideOnSinglePage:!0}})))}function R(e){return e?(e>99&&(e="99+"),"(".concat(e,")")):""}n("ma9I");function I(e){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function N(e,t){return!t||"object"!==I(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var M,j=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=N(this,(e=P(t)).call.apply(e,[this].concat(r)))).state={detail:null},n.getMessageDetail=function(){var e=n.props,t=e.match,a=void 0===t?{}:t,r=e.location,o=e.setReaded,s=a.params,c=(void 0===s?{}:s).noticeId,i=r.state,u=(void 0===i?{}:i).read;c&&Object(l.c)(l.a.getNoticeDetail,{noticeId:c},{needVersion:1.1}).then(function(e){!1===u&&o(c),n.setState({detail:e.data})})},n.goBackList=function(){n.props.history.replace({pathname:"/messageCenter/list"})},n}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(t,s.a.PureComponent),n=t,(a=[{key:"componentDidMount",value:function(){this.getMessageDetail()}},{key:"render",value:function(){var e=this.state.detail;return s.a.createElement(v.a,null,e&&s.a.createElement("div",{className:"message-detail-wrapper"},s.a.createElement("h2",{className:"message-title"},e.noticeTitle),s.a.createElement("p",{className:"message-tips"},s.a.createElement("span",null,s.a.createElement("b",null,"发布时间："),w.a.utcToDev(e.sendTime)),s.a.createElement("span",null,s.a.createElement("b",null,"消息类型："),e.noticeTypeName)),s.a.createElement("div",{className:"message-content",dangerouslySetInnerHTML:{__html:e.noticeContent}}),s.a.createElement("a",{className:"left-top",onClick:this.goBackList},"返回消息列表")))}}])&&O(n.prototype,a),r&&O(n,r),t}();n("yeL8");function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function L(){return(L=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function _(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function K(e,t){return!t||"object"!==k(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function D(e){return(D=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function B(e,t){return(B=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,"default",function(){return U});var U=Object(i.b)(function(e){return{developerInfo:e.getIn(["userCenter","developerInfo"]).toJS(),newMessageNums:e.getIn(["message","newMessageNums"]).toJS()}},function(e){return{getNewMessageNums:function(){return e(Object(u.a)())},getDeveloperInfo:function(){return e(Object(p.d)())}}})(M=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=K(this,D(t).call(this,e))).getMessageList=function(e,t){var a=n.state,r=a.noticeType,o=a.read,s=a.pageIndex,c=a.selectedRowKeys,i=a.messageList,u={pageIndex:s,pageRows:20,noticeType:r,read:o},p={};return i.length>0&&c.length===i.length&&u.pageIndex>1&&u.pageIndex--,void 0!==e&&(u[t]=e,"pageIndex"!==t&&(u.pageIndex=1)),Object.keys(u).forEach(function(e){""!==u[e]&&(p[e]=u[e])}),Object(l.c)(l.a.getNoticeList,p,{needVersion:1.1,loading:!0}).then(function(a){var r=a.data,o={messageList:r.list,pager:r.pager,selectedRowKeys:[]};t&&(o[t]=e,"pageIndex"!==t&&(o.pageIndex=1)),n.setState(o)})},n.changeRead=function(e){var t=n.state.read,a=n.props.history,r=!(window.location.hash.indexOf("/messageCenter/detail/")>-1);t===e&&r||n.getMessageList(e,"read").then(function(){r||a.replace({pathname:"/messageCenter/list"})})},n.changeMessageType=function(e){var t=e.target.value;n.getMessageList(t,"noticeType")},n.onSelectChange=function(e){n.setState({selectedRowKeys:e})},n.setReaded=function(e){var t=n.state,a=t.selectedRowKeys,r=t.messageList,o=n.props.getNewMessageNums,s="";s=e||a.map(function(e){return r[e].noticeId}).join(","),Object(l.d)(l.a.setRead,{noticeIds:s},{needVersion:1.1,loading:!0}).then(function(e){n.getMessageList(),o()})},n.chearSelectedRowKeys=function(){n.setState({selectedRowKeys:[]})},n.changePage=function(e){n.getMessageList(e,"pageIndex")},n.state={selectedRowKeys:[],messageList:[],noticeType:"",read:"",pager:{totalPages:0,currPageRows:null},pageIndex:1},n.pageTabClickHandles=[function(){return n.changeRead("")},function(){return n.changeRead(!1)},function(){return n.changeRead(!0)}],n}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&B(e,t)}(t,o["Component"]),n=t,(a=[{key:"componentDidMount",value:function(){var e=this.props,t=e.newMessageNums,n=e.getNewMessageNums,a=e.getDeveloperInfo,o=e.developerInfo;r()(t)&&n(),r()(o)&&a(),this.getMessageList()}},{key:"render",value:function(){var e=this,t=this.state,n=t.messageList,a=t.selectedRowKeys,r=t.pager,o=t.noticeType,i=t.pageIndex,l=t.read,u=this.props,p=u.match,y=u.newMessageNums,h=void 0===y?{}:y,b=u.developerInfo,v=void 0===b?{}:b,w=p.path,E=h.totalUnRead;return s.a.createElement(m.a,null,s.a.createElement("div",{className:"page-header-wrapper"},s.a.createElement(d.a,{newMessageNums:h,developerInfo:v,noCollapsed:!0})),s.a.createElement("div",{className:"content-wrapper"},s.a.createElement(f.a,{Nums:[0,E||0,0],clickHandles:this.pageTabClickHandles}),s.a.createElement("section",{className:"right-wrapper flex-column"},s.a.createElement(g.a,{noback:!0,title:"消息中心"}),s.a.createElement("div",{className:"flex1 scroll-y"},s.a.createElement(c.e,null,s.a.createElement(c.c,{path:"".concat(w,"/list"),render:function(t){return s.a.createElement(x,L({},t,{messageList:n,selectedRowKeys:a,noticeType:o,pager:r,pageIndex:i,changePage:e.changePage,onSelectChange:e.onSelectChange,newMessageNums:h,setReaded:e.setReaded,read:l,changeMessageType:e.changeMessageType}))}}),s.a.createElement(c.c,{path:"".concat(w,"/detail/:noticeId"),render:function(t){return s.a.createElement(j,L({},t,{setReaded:e.setReaded}))}}),s.a.createElement(c.b,{to:"".concat(w,"/list")}))))))}}])&&_(n.prototype,a),i&&_(n,i),t}())||M},QZRf:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var a={"/userCenter":{title:{titleIcon:"user",titleText:"用户中心"},tabs:[{tabText:"基本资料",tabPath:"/userCenter/info"},{tabText:"安全设置",tabPath:"/userCenter/security"},{tabText:"访问用户",tabPath:["/userCenter/visit","/userCenter/look"]},{tabText:"用户角色",tabPath:["/userCenter/role","/userCenter/add"]},{tabText:"操作日志",tabPath:"/userCenter/log"},{tabText:"实例管理",tabPath:["/userCenter/case"]},{tabText:"授权管理",tabPath:["/userCenter/authorize"]},{tabText:"数据资产",tabPath:["/userCenter/dataasset","userCenter/assetdetail"]}]},"/messageCenter":{title:{titleIcon:"sound",titleText:"消息中心"},notRoute:!0,tabs:[{tabText:"全部消息"},{tabText:"未读消息"},{tabText:"已读消息"}]}}},yeL8:function(e,t,n){}}]);