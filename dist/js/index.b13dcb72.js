(window.webpackJsonp=window.webpackJsonp||[]).push([["index"],{"+kVv":function(e,t,n){"use strict";var r={};n.r(r),n.d(r,"changeCurApi",function(){return p}),n.d(r,"getMethodList",function(){return d}),n.d(r,"getMethodNums",function(){return f}),n.d(r,"getCurApi",function(){return m}),n.d(r,"getProductList",function(){return y}),n.d(r,"getProtocolListByProductId",function(){return g});n("fbCW");var o=n("JPcv"),a="customMethod/GET_API",i=Object(o.fromJS)({methodList:[],MethodNums:{},pager:{},curApi:{},productList:[],protocolList:[],bindType:null}),u=function(e,t){return e.get("productList").toJS().find(function(e,n){return e.productId===t.productId}).bindType},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"customMethod/CHANGE_METHOD_LIST":return e.merge({methodList:t.methodList,pager:t.pager});case"customMethod/CHANGE_METHOD_NUMS":return e.set("MethodNums",t.MethodNums);case a:return e.set("curApi",t.curApi);case"customMethod/CHANGE_PRODUCT_LIST":return e.set("productList",t.productList);case"customMethod/CHANGE_PROTOCOL_LIST":var n=u(e,t);return e.merge({protocolList:t.protocolList,bindType:n});case"customMethod/CHANGE_CUR_API":return"productId"===t.key?e.setIn(["curApi",t.key],t.value).setIn(["curApi","dataType"],void 0).setIn(["curApi","property"],void 0):"dataType"===t.key?e.setIn(["curApi",t.key],t.value).setIn(["curApi","property"],void 0):e.setIn(["curApi",t.key],t.value);default:return e}},l=n("Nlzp"),s=function(e){return{type:a,curApi:Object(o.fromJS)(e)}},p=function(e,t){return{type:"customMethod/CHANGE_CUR_API",key:e,value:t}},d=function(e){return function(t){Object(l.c)(l.a.getMethodList,e).then(function(e){var n=e.data;0===e.code&&t(function(e){return{type:"customMethod/CHANGE_METHOD_LIST",methodList:Object(o.fromJS)(e.list),pager:Object(o.fromJS)(e.pager)}}(n))})}},f=function(){return function(e){Object(l.c)(l.a.getMethodLimit).then(function(t){var n=t.data;0===t.code&&e({type:"customMethod/CHANGE_METHOD_NUMS",MethodNums:Object(o.fromJS)(n)})})}},m=function(e){return function(t){e?Object(l.c)(l.a.getMethodDetail,{apiId:e}).then(function(e){var n=e.data;0===e.code&&t(s(n))}):t(s({apiName:"",productId:void 0,reportFormsType:4,cityTimeZone:8,ruleType:1}))}},y=function(){return function(e){Object(l.c)(l.a.getMethodProductList).then(function(t){var n=t.data;0===t.code&&e(function(e){return{type:"customMethod/CHANGE_PRODUCT_LIST",productList:Object(o.fromJS)(e)}}(n))})}},g=function(e){return function(t){Object(l.c)(l.a.getProtocolListByProductId,e).then(function(n){var r=n.data;0===n.code&&t(function(e,t){return{type:"customMethod/CHANGE_PROTOCOL_LIST",protocolList:Object(o.fromJS)(e),productId:t.productId}}(r,e))})}};n.d(t,"b",function(){return c}),n.d(t,"a",function(){return r})},"+vmU":function(e,t,n){"use strict";n.d(t,"c",function(){return c}),n.d(t,"d",function(){return l}),n.d(t,"b",function(){return s}),n.d(t,"a",function(){return p}),n.d(t,"e",function(){return d});n("pNMO"),n("TeQF"),n("5DmW"),n("27RR"),n("tkto"),n("FZtP");var r=n("Nlzp"),o=n("r+Wk");function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(n,!0).forEach(function(t){u(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c=function(e){return function(t){Object(r.c)(r.a.getCreateProduct,e).then(function(e){var n=e.data.list||[];t({type:o.d,productList:n})})}},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={pageIndex:1,pageRows:10};return function(n){Object(r.c)(r.a.otaDevVersionList,i({},t,{},e)).then(function(e){var t=e.data,r=void 0===t?{}:t;n({type:o.e,versionList:r})})}},s=function(e){return function(t){e?Object(r.c)(r.a.otaGetExtVersion,e).then(function(e){var n=e.data;t({type:o.b,extVerisonLi:n||[]})}):t({type:o.b,extVerisonLi:[]})}},p=function(){return function(e){Object(r.c)(r.a.getGroupList,{pageRows:9999}).then(function(t){var n=t.data,r=void 0===n?{}:n;e({type:o.a,deviceGorupLi:r.list||[]})})}},d=function(e){return console.log(999,e),function(t){t({type:o.c,firmwareDetails:e})}}},"0l34":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEYAAABGCAYAAABxLuKEAAANeklEQVR4Xs1ca3RU1RXe+9x7Z+5kMnk/IKEhBAnEIEuCIIigIApKq7QutGnRqhWR6LJ1dVWXqxSpj9rSWlsFIj5bKy0VUYsvLO/ycKkQLCqvAIVIJpkwSQiZx32e03UHBodhJjNz507K/ZXMnP3t73xzHvvss2cQ+ulhjOHzG6EMGVRQgFIEKGUIxcDAgQh2hiAaVJCBxBjIgBBEBicYgIcAeBhCy71TwY2IrD8oYyadvLGDOTolqGMMaghCNWXgSscfQeilDA4iwr5CEZpuuQKD6eD1ZWu5MKGRsRlqKYUJBGAUA+AzQR4BNAqwhxD4+N6r4SurR5JlwixaxEjxlTCGEJjBGJRlQox4mIjgphTWntgGuxYtQmqFb0uEWbKR1XIMZjOAUitImcVAAI+OsOr+qfiVWYywXVrCLNvK8kGF2cBgdLpELLVH2A0CrGqYhN1mcU0Ls2QDqyMAtwGc3k0uwEeiAH+9/xpsMsMtZWGW72QC7YWbGYWrzDiMtpFV4NtPsHy/TEVVA54BoNMOwZxsDOS5iN8ugJaOHySwhbhg9bzLUE0FJyVhlu9kWbQX5jMKF6XiJLptexfN/eqQXn3cS6v8AZYHwGLyQETqyoLOwjzSVlMpHKociB1m/CKBQ8QFjfMuw0Cy9kkLs3wdy6UcPJDOjnPSB45tu5XLWzx0eDwx+iKe60LPhFphR9UgzpNsB88upghuosOz867FnmRskxImJAqBnzOAwmRAY7U50spKNu2Sp8sKc5rFOG2HbHgF13TNOOGzVHEQoJNQ+F0y4iQUJjR9TsHP0hkpLR2s8MPt8ixdZ0KqnYnXvqqc2zNjgm1HqnhGzENy4OlE06pPYc4stA+ks6ZIEggrPpJulVWWnWonErWfMEpYN7qaP5yoXfT7Z9acZ/takPsUpnET+366u8/aHcrEI279klTJJ9Ne4DF4+0xxhZmdy9it5k/BlfH8xBXmTJwyNxmC8dr4giC+/qE0h1KWkfOS4Xd0tbB1wijeVKRLAV6MF+fEFCYU0SqwMN3gbdsebeSeg+qVkcJli+jzSdZNq/wc4q6/zr7G5AcogQ0eixUhxxRm+UZ2j25BmP/mBnlGRzetDJMeVw3uJbcHBvzqnay293dimZktO1oAgqjffZP4Cs+DbkYcDmH3vKn4wnnrUPQLxoGQMLjfjJNom9fel27xBVmB8bpow8C/HvELDuH0zrSl2eZ9bJXNdirActL1ddNV9n+UFxPT5yKKsCT64HnOiDFSB6WTYKFVp+SX10hzZOX0tJl1OWv9xXcC5ZEiaDrqL28VPSt38C5fgJpOYl07zvbPYRVcm1mBjVO5Zys8FpmyOEeYpevZWES4y6yDaLvlb0s/DscurzUoPTVlam487KYWoXtNkxA47EHO003EoMJsiMAAEZx2qpTlo1RZQune48gfcp+b3pgx3va2mWg4kgtj8Mp90/Bs0HhWmFDmbRMsSCeQi+70y2vkObJCs20CStsf9VlyCn9rl+h56m3unLzP9VeKq4cMwBPpfKBG4HfvFHginAk8K0zjJjaSUbgvHfBo29Wb5OmeTjqkvAi87/zUX2QFttfPBa9/yiFGLtyzp9lXFOeR3nTxkcDS+VPwSwPnrDBLN7C5CFCXLnik/eadat3eo9q4cRdB29I7/AOtwp6x2NndeQryDTyBR2nuLPHPVmAzgKb7rsEXzwoTyuYHYbHVievOHpq9aoNSf/N43fPQDUHL8sDLNzvcL60nIbziPNIye5r9AyuEMRLshQ54yLh9CI2Yxo1sImMwxwrwaIx1n6oT504ODJwyQrVkKhn4xm527W+yA74gddWNELaMH8nvs4o7Irw+fypuDwmTiWkUJnrZAP/lowZKlxqLu1XkDZyPvrR3PPmWTVz0Q327RIUej184aQV+eDqhQXj5Jvhtupdh8UhNHeIbPzhXutQK0udsr4DakU78utwlD+lV+fb3movfscKHcak3bwo8jI0bWDkDWGAFaCyMqwb7xlXlS5Yu6qHpRDGoaYrD+FulJPjm/tK/WNUHBHgCn1/PJlCE260CjcaZXOkfMzQvONZqfFnDXkaVULQsa1zPWwdL/m6VD8LgNVy2ns0ChOlWgUbjjBkYrBlV6rfkRiESO6CSk4TJecZrHr/9wMZjBZss6wODj7BxPZvHECxfA8Ikh+QppVdXnvquZaTPAPUESZudk0Ox0ecdOR/t8zr/a5UPZPA5LtvAjPXlnMOdVQ4MHCdPbbeM7LLs/BXm5g1gazavlAc17uSaQyUrqSU31md73mpMpScBIZQayNTzg0u65tg5amnO16+wXh5152dtuR80dzmOW8qdQZexK/2eAaR5pdE3reuG9k4qd8m1VpFXdBKguuI40OXc3tTuCp1trHwQwI/LNrIlwICzEjga66ICuWxSRe+NVvlw99r2f+ERv3D7bJ1WYZ6Dg6D3izCEANTXdt5m49K9bAMw0gLvHshbcSLA+TIiigFqCNMfU8nwNW6Qv7a2KDgp3c74ZN23al/p6+ni9GV/eir1w+JrkLALwN1a472DI2D6NpJSCkc71aNbWsvXZlIYMBbfTG/XkR343rDWH+U67aEw3sxzyucHj487vK190Doz9inYtGY8wIskc2N1xy02UJ2uLLs9BZKhpj5/ACRFgS4l68D2tjLrotwYRE4HeBk+EkT6nV3Tficis2sak3Mcgh0xcSaCMQY+fxBkVQlBdcrOAzvaB2ZUGDCOBJk+RIaFybZTceZQzx3h/xWNSdl2Yuc5Pq46sqKCPxgASr+peQ5Sm2f91xVvpzriUmkfOkRmOu0QJjSy2FddW9w7NZIg1SmoqkptAkc4QoytGChjoOk6qIoa+jv6ocgH3z9aaVmKIZZgobRDphNVYcfXVnmvKxDVqmgiRtc1RQZVTa7Uzohj1h4b8pLCiKkr2UQj52yiymi4bAO7GwDGJDIy+36uqDunV52oR4hf9cBoaPSApiUWqEPO2/1Je9EnZvkksNvVcA2+lPFkuEHiqoquyQOy5YuT6YgxfaimhQQy4paYQx0J3dox+G/dGYh+z0mGW3V90tFNc9xeVtTZTQsllYk6BW7ixay9YVL3ZABGkhEmsg1jFHSdAWM6GLsTnFlzCOHpMxvyPZ80C3KWiP7CHNJZUsR5Bxejl+PBdALivOsTg4zZm4LDX+sDDh7Xq9q9rDIo0/MqF8ZXU+/i+t5CK28JNh/Ian30H7bzckgcQS0/B9tK80nrsAruWFmKFRDnXbgZwqRyRWsULe/ap4049LV2cbjMo6/RsOTuYOslZbIlybBeme+5+Q+ubFllCTMCWSI5WV5Mjowcyh0cWEQSXq/EvKJN5lJfp0A+2avV7D2sjVFUlpXs1BBtqP31/t7ukmytOFmbWO00HeWGV3PkA25MuaYmz0Xahw7i9l02nG+ONd3iXuqHplMfZSC79mvD9jTrY2NNl2Q663KA8up8n784WwvdOaf6MEBt4WpXz7+/IqZrjQ2fNgEDwyq4PeNrhS/ttm/K8eOWgRhGsQqHjDVk+x51cjJTJlFnBR7pUz8IusdWSoMStY18X9VRWrQ6x7dtP1p2zWsX0De6hv+4rpo/nLBwyCATLjUz6nPX71QmtLTTGitq5SI7en2d3tkwLcjniFrcQqJwe3eP0PHIyiznUQ9mJP06pIz7YvpEW32fpWZhMj95WX9y2x71AaPoJ5VPNtW2M8fo7vorZK48Ty0k+E3wZ0ybo50278qPBX5tE2/ZKInFL99FmrYuFs8LbmMe4G59mlU3H5V2K1ryC2yqokS25wjSIQOYP0dkWk8A+WMdmKXRxLtOOj4NW0FA/+gR4qhXGvBINFbck+1NTyr3HT6uP2f1NEq3M1baV5bzP3lvge3ZWJh9JkSmLZDfbe/Uv20lmQsFqyifrNv8a/G6eHz6FOae5Szry2b5P6f8NK0vbl0oYoR55OWQ/ReNsI/+850omRLGMLrzWVa8r0Vq8vlZSlvshSZGmI/Lga2Vw8VL/z4PvX1xTJxbBIA7nmGVe1ukTwMSSyty/X+L5bBj17DB4ti/PXj+Ypv04hvdcPbjbPixLmlLQGL/1+9WmxXXKWJbRYE4ZdUv8UAyGEmNmDDQbY2s5NgxeVNXD00qt5IMgf5oU5BL9g4ts1/96gPJF0mnJIzRiUVvMNu2L5S32r36zP7oVLo+igvIv0ZOtN/43A0op4KVsjBh8Ot/JT/s8dKF/RUEptIpo61NQP+AIn7hBwuFP6Rqa7Q3LYxhfNcyVnWkRVnh7dHHm3GeKZvCPO7Tod+y1ceKaJP1mZYwYSczH1Pu8Xbrj/slVpKs40y0czqwrSCXe/zDR22N6eJbIkxo7VnESBOnPdjRo/20v2OebAe6S4r4p+sU/o8X1M+kRH46RibwpifUu0/62dyeXnqpTq37rnWkH45HJddJduc68dU1C4QXLtgf1ok1dOcvY/nubq2h+xSddSpAazWNma50MPAFHgPZWbgv34XvlBfYljY2mP8ZlERTzbKplMiRMZLq/6SOC/hxqj9I62SZGb9ZlafqLEvTwaHrEKqA4DmQOA6CPIcBjsBJhw2bs0Wyy5XFNv7lQeEzq0dGPN7/AzbqsQp/08/PAAAAAElFTkSuQmCC"},"2jDL":function(e,t,n){"use strict";n.d(t,"a",function(){return r});n("TeQF"),n("yXV3"),n("2B1R");var r=function(e,t,n,r,o,a){for(var i=e.nodeList,u=function(e){return e.filter(function(e){return"eventTrigger"===e.id})[0].list.map(function(e){return e.id})}(o),c=!1,l=0;l<i.length;l++)if(u.indexOf(i[l].nodeType)>-1){c=!0;break}return!!c&&"最多只能有一个输入类型的节点，请删除不需要的触发节点"}},"3L+O":function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"c",function(){return o}),n.d(t,"a",function(){return a}),n.d(t,"d",function(){return i});var r="show-login-modal",o="update-developer-info",a="MUEN_LIST",i="update_insyanceList"},"3d2c":function(e,t,n){},"3tak":function(e,t,n){},"4EZn":function(e,t,n){"use strict";n("pNMO"),n("TeQF"),n("5DmW"),n("27RR"),n("tkto"),n("FZtP");var r=n("JPcv"),o=n("t98y");function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(n,!0).forEach(function(t){u(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c=Object(r.fromJS)({productList:{list:[],pager:{}},productBaseInfo:{},productProtocolLists:[],productConfigSteps:[],productH5Pages:{},appsByProductId:[],timeServiceList:[],optionsList:{},productBaseTypeList:{},visibleDebugger:!1,jsContent:"",tabIndex:1,moduleList:[],hardwareType:null,moduleItem:{},commFreq:10,mcuCodeCheck:!1}),l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case o.H:return e.set("productList",t.list);case o.F:return e.set("productBaseInfo",t.info);case o.G:var n=e.getIn(["productBaseInfo"]).toJS();return e.merge({productBaseInfo:i({},n,{},t.info)});case o.I:return e.set("productProtocolLists",t.list);case o.D:return e.set("productConfigSteps",t.list);case o.E:return e.set("productH5Pages",t.data);case o.C:return e.set("appsByProductId",t.list);case o.J:return e.set("timeServiceList",t.data);case o.n:return e.set("optionsList",t.data);case o.q:return e.set("productBaseTypeList",t.data);case o.B:return e.set("visibleDebugger",t.visible);case o.w:return e.set("jsContent",t.jsContent);case o.z:return e.set("tabIndex",t.tabIndex);case o.y:return e.set("moduleList",t.list);case o.x:return e.set("moduleItem",t.moduleItem);case o.c:return e.merge({tabIndex:2,moduleItem:{}});case o.o:return e.set("mcuCodeCheck",t.bl);case o.v:return e.set("hardwareType",t.hardwareType);case o.p:return e.set("commFreq",t.commFreq);case o.d:return e.merge({productBaseInfo:i({},e.getIn(["productBaseInfo"]).toJS(),{},t.params)});default:return e}},s=Object(r.fromJS)({deviceAndWs:{wsUrl:{data:{}},productInfo:{data:{}},token:{data:{}}},websocketMessage:{devData:[],devData2:[],deviceDebuggerException:"",deviceDebuggerException2:"",onlineDevice:{}},dataTypeList:{data:[]},propertyConfig:{},deviceDebugAccountList:{data:[]},deviceDebugMacList:{data:[]},selectedData1:{},selectedData2:{}}),p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case o.j:return e.set("deviceAndWs",t.data);case o.K:return e.set("websocketMessage",t.data);case o.A:return e.setIn(["deviceAndWs","wsUrl","data"],t.data);case o.s:return e.set("websocketMessage",t.data);case o.i:return e.set("dataTypeList",t.data);case o.r:return e.set("propertyConfig",t.data);case o.l:return e.set("deviceDebugMacList",t.data||[]);case o.b:case o.m:case o.a:return e.set("deviceDebugMacList",t.data);case o.k:return e.set("deviceDebugAccountList",t.data);case o.t:return e.set("selectedData1",t.data||{});case o.u:return e.set("selectedData2",t.data||{});case o.e:return e.setIn(["websocketMessage","deviceDebuggerException"],t.data);case o.f:return e.setIn(["websocketMessage","deviceDebuggerException2"],t.data);case o.g:return e.setIn(["websocketMessage","devData"],t.data);case o.h:return e.setIn(["websocketMessage","devData2"],t.data);default:return e}},d=n("EZYW");n("GNPG");n.d(t,"b",function(){return l}),n.d(t,"a",function(){return d}),n.d(t,"c",function(){return p})},"54Vy":function(e,t,n){"use strict";n.d(t,"a",function(){return O}),n.d(t,"b",function(){return w}),n.d(t,"c",function(){return E}),n.d(t,"d",function(){return j});n("pNMO"),n("4Brf"),n("0oug"),n("ma9I"),n("TeQF"),n("4mDm"),n("2B1R"),n("sMBO"),n("zKZe"),n("5DmW"),n("27RR"),n("tkto"),n("07d7"),n("PKPk"),n("FZtP"),n("3bBZ"),n("mbEz");var r=n("wCAj"),o=(n("k3Gp"),n("kLXV")),a=(n("tULf"),n("Vl3Y")),i=(n("1vPl"),n("5rEg")),u=(n("8QGh"),n("2fM7")),c=n("q1tI"),l=n.n(c),s=n("Nlzp");function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(n,!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g=u.a.Option,v=i.a.TextArea,b=/^[\w\u4E00-\u9FA5]{1,30}$/,h=/^[1-9]\d{0,9}$/,O=a.a.create({name:"form_in_modal-project-add"})(function(e){var t=e.form,n=e.visible,r=e.onCancel,c=e.onOk,s=e.projectId,p=e.projectList,f=t.getFieldDecorator,y=t.validateFieldsAndScroll;return l.a.createElement(o.a,{visible:n,width:600,title:"新增服务",centered:!0,closable:!1,onCancel:r,onOk:function(){y(function(e,t){e||(s&&(t.projectId=s),c(m({},t)))})},destroyOnClose:!0,maskClosable:!1},l.a.createElement(a.a,d({labelCol:{span:4},wrapperCol:{span:20}},{labelAlign:"left"}),l.a.createElement(a.a.Item,{label:"服务名称"},f("name",{rules:[{required:!0,message:"请输入服务名称"},{pattern:b,message:"中英文、数字、下划线，长度不超过30"}],initialValue:""})(l.a.createElement(i.a,{placeholder:"中英文、数字、下划线，长度不超过30"}))),!s&&l.a.createElement(a.a.Item,{label:"所属项目"},f("projectId",{rules:[{required:!0,message:"请选择所属项目"}],initialValue:""})(l.a.createElement(u.a,null,l.a.createElement(g,{value:""},"选择所属项目"),p.map(function(e){var t=e.projectId,n=e.name;return l.a.createElement(g,{value:t,key:t},n)})))),l.a.createElement(a.a.Item,{label:"服务类型"},f("type",{rules:[{required:!0,message:"请选择服务类型"}],initialValue:""})(l.a.createElement(u.a,null,l.a.createElement(g,{value:""},"选择服务类型"),l.a.createElement(g,{value:"0"},"业务逻辑服务"),l.a.createElement(g,{value:"1"},"数据分析服务")))),l.a.createElement(a.a.Item,{label:"服务描述"},f("desc",{initialValue:""})(l.a.createElement(v,{placeholder:"不超过50个字符",maxLength:50,rows:3})))))}),w=function(e){var t=e.visible,n=e.onCancel,a=e.paramList,i=void 0===a?[]:a,u=e.url,c=[{title:"参数",dataIndex:"param_name",key:"param_name"},{title:"类型",dataIndex:"param_typ",key:"param_typ",render:function(e,t,n){var r=t.param_typ;return l.a.createElement("span",null,["String","int","long","float","double","boolean"][r||0])}},{title:"默认值",dataIndex:"param_default",key:"param_default"},{title:"描述",dataIndex:"param_desc",key:"param_desc",width:160}];return l.a.createElement(o.a,{visible:t,width:600,title:"调用说明",centered:!0,closable:!0,onCancel:n,onOk:n,okText:null,cancelText:null,destroyOnClose:!0,maskClosable:!1},l.a.createElement("div",{style:{marginBottom:"24px"}},l.a.createElement("b",null,"invokeUrl : "),l.a.createElement("a",null," ",u||"--")),l.a.createElement(r.a,{columns:c,dataSource:i,rowKey:"param_name",pagination:!1}))},E=a.a.create({name:"form_in_modal-project-copy"})(function(e){var t=e.form,n=e.onCancel,r=e.onOk,u=e.visible,c=e.editContent,s=t.getFieldDecorator,p=t.validateFieldsAndScroll,f=c.id,y=c.name,g=c.desc;return l.a.createElement(o.a,{visible:u,width:600,title:-1!==f?"修改":"复制服务",centered:!0,closable:!1,onCancel:n,onOk:function(){p(function(e,t){e||r(m({},t))})},destroyOnClose:!0,maskClosable:!1},l.a.createElement(a.a,d({labelCol:{span:4},wrapperCol:{span:20}},{labelAlign:"left"}),l.a.createElement(a.a.Item,{label:"服务名称"},s("name",{rules:[{required:!0,message:"请输入服务名称"},{pattern:b,message:"中英文、数字、下划线，长度不超过30"}],initialValue:y})(l.a.createElement(i.a,{placeholder:""}))),l.a.createElement(a.a.Item,{label:"服务描述"},s("desc",{initialValue:g})(l.a.createElement(v,{placeholder:"不超过50个字符",maxLength:50,rows:3})))))}),j=a.a.create({name:"form_in_modal-serve-source"})(function(e){var t=p(Object(c.useState)({}),2),n=t[0],r=t[1],u=e.form,f=e.onCancel,y=e.onOk,g=e.visible,v=e.envdata,b=void 0===v?{}:v,O=e.confirmLoading,w=u.getFieldDecorator,E=u.validateFieldsAndScroll,j=b.actionType,P=b.testEnv,I=b.proEnv,S=b.name,C=b.id,T=n.cpu,D=void 0===T?"":T,L=n.memory,k=void 0===L?"":L,_=n.replicas,A=void 0===_?"":_,N=n.timeout,M=void 0===N?"":N;Object(c.useEffect)(function(){g&&Object(s.c)(s.a.getPublishParam,{serviceId:C,envType:1==j?1:0},{loading:!0}).then(function(e){r(m({},e.data||{}))})},[g]);var x="测试环境",V="发布";return 2==j?(x="生产环境",3==I&&(V="启动")):3==P&&(V="启动"),l.a.createElement(o.a,{visible:g,width:600,title:"".concat(x).concat(V,"服务：").concat(S),centered:!0,closable:!1,onCancel:f,onOk:function(){E(function(e,t){if(!e){var n=t.cpu,r=t.memory,o=t.replicas,a=t.timeout;y(m({},t,{changed:!(n===D&&r===k&&o===A&&a===M)}))}})},destroyOnClose:!0,maskClosable:!1,confirmLoading:O},l.a.createElement("div",{style:{fontSize:"12px"}},"服务运行参数："),l.a.createElement(a.a,d({labelCol:{span:10},wrapperCol:{span:10}},{labelAlign:"right"}),l.a.createElement(a.a.Item,{label:"CPU（微核）"},w("cpu",{rules:[{required:!0,message:"请输入CPU核数"},{pattern:h,message:"正整数，不超过10位"}],initialValue:D})(l.a.createElement(i.a,{placeholder:"正整数，不超过10位"}))),l.a.createElement(a.a.Item,{label:"内存（M）"},w("memory",{rules:[{required:!0,message:"请输入内存"},{pattern:h,message:"正整数，不超过10位"}],initialValue:k})(l.a.createElement(i.a,{placeholder:"正整数，不超过10位"}))),l.a.createElement(a.a.Item,{label:"副本数（个）"},w("replicas",{rules:[{required:!0,message:"请输入副本数"},{pattern:h,message:"正整数，不超过10位"}],initialValue:A})(l.a.createElement(i.a,{placeholder:"正整数，不超过10位"}))),l.a.createElement(a.a.Item,{label:"函数超时时长（秒）"},w("timeout",{rules:[{required:!0,message:"请输入超时时长"},{pattern:h,message:"正整数，不超过10位"}],initialValue:M})(l.a.createElement(i.a,{placeholder:"正整数，不超过10位"})))))})},"6+LV":function(e,t){},"78UK":function(e,t,n){"use strict";n.d(t,"e",function(){return v}),n.d(t,"f",function(){return b}),n.d(t,"g",function(){return h}),n.d(t,"a",function(){return O}),n.d(t,"i",function(){return S}),n.d(t,"c",function(){return L}),n.d(t,"b",function(){return A}),n.d(t,"j",function(){return N}),n.d(t,"d",function(){return x}),n.d(t,"h",function(){return F});n("8/o9");var r,o=n("tsqr"),a=n("a+Kn"),i=n("Q2AE"),u=n("gtRY"),c=n("kEWA"),l=n("J76n"),s=document,p=s.body,d="draw-no-popover",f=c.h.NULL,m=null,y={x:0,y:0},g=function(){var e;return(e=console).log.apply(e,arguments)};function v(e,t){clearTimeout(r),a.a.addClass(p,d),f=c.h.PUTIN,g("currentNodeType---：",m=t);var n=e.pageX,o=e.pageY,i=e.target.getBoundingClientRect(),u=i.left,l=i.top;g("【计算】拖拽初始距离差值：",(y={x:n-u,y:o-l}).x,y.y)}function b(e){f=c.h.NULL,r=setTimeout(function(){a.a.removeClass(p,d)},1200)}function h(e){if(null!==m&&f===c.h.PUTIN){f=c.h.NULL;var t=e.pageX,n=e.pageY,r=t-y.x,o=n-y.y;g("【计算】拖拽结束节点应放置位置(相对于窗口)：",r,o),i.a.dispatch(Object(u.s)(m,r,o))}}function O(e){e.preventDefault()}var w={x:0,y:0},E={x:0,y:0},j={x:-1,y:-1},P={left:0,top:0},I=null;function S(e,t,n,o){f=c.h.MOVE,I=t;var i=e.pageX,u=e.pageY;E={x:n,y:o},w={x:i,y:u},j={x:-1,y:-1},P={left:l.a.wrap?l.a.wrap.scrollLeft:0,top:l.a.wrap?l.a.wrap.scrollTop:0},g("【计算】【节点"+t+"】初始移动的位置：",w.x,w.y),clearTimeout(r),a.a.addClass(p,d),a.a.addEvent(s,"mousemove",C),a.a.addEvent(s,"mouseup",T)}function C(e){if(null!==I&&f===c.h.MOVE){var t=e.pageX,n=e.pageY,r=E.x+t-w.x,o=E.y+n-w.y,a=l.a.wrap?l.a.wrap.scrollLeft:0,s=l.a.wrap?l.a.wrap.scrollTop:0;r=(r+=a-P.left)<0?0:r,o=(o+=s-P.top)<0?0:o;var p=-1===j.x&&-1===j.y;if(p&&r===E.x&&o===E.y)return;i.a.dispatch(Object(u.B)(I,r,o,p)),j={x:r,y:o}}}function T(e){null!==I&&f===c.h.MOVE&&-1===j.x&&-1===j.y&&i.a.dispatch(Object(u.a)(I)),r=setTimeout(function(){a.a.removeClass(p,d)},1200),I=null,f=c.h.NULL,a.a.removeEvent(s,"mousemove",C),a.a.removeEvent(s,"mouseup",T),l.a.initWH()}var D=null;function L(e,t,n){f=c.h.CONNECT,I=t,D=n,E=a.a.countCenterPoint(n),i.a.dispatch(Object(u.k)(E,t,n)),g("【计算】【Line】初始移动的位置：",E.x,E.y),a.a.addEvent(s,"mousemove",k),a.a.addEvent(s,"mouseup",_)}function k(e){if(null!==D&&f===c.h.CONNECT){var t=e.pageX,n=e.pageY;i.a.dispatch(Object(u.A)(D,t,n))}}function _(e){D&&i.a.dispatch(Object(u.h)(D)),I=null,D=null,f=c.h.NULL,a.a.removeEvent(s,"mousemove",k),a.a.removeEvent(s,"mouseup",_)}function A(e,t,n,r,a){null!==D&&f===c.h.CONNECT?r&&"forLoopEnd"!==a?o.a.warn("无法连接到已有连线的节点"):null===n?o.a.warn("目标节点不允许连接"):I===t?o.a.warn("节点无法连接自己"):(i.a.dispatch(Object(u.i)(D,t,n,a)),D=null):-1===j.x&&-1===j.y&&i.a.dispatch(Object(u.a)(t))}function N(e,t,n){e.stopPropagation(),e.preventDefault();var r=e.pageX,o=e.pageY;i.a.dispatch(Object(u.H)(t,n,r,o)),a.a.addEvent(s,"mousedown",M)}function M(){a.a.removeEvent(s,"mousedown",M),a.a.removeEvent(s,"click",M),i.a.dispatch(Object(u.x)())}function x(){a.a.removeEvent(s,"mousedown",M),a.a.addEvent(s,"click",M)}var V=0,R=0;function F(e,t){f=c.h.LOG;var n=e.pageY;V=t,g("【计算】【日志栏移动】初始移动的Y轴位置：",R=n),clearTimeout(r),a.a.addClass(p,d),a.a.addEvent(s,"mousemove",q),a.a.addEvent(s,"mouseup",B)}function q(e){if(f===c.h.LOG){var t=e.pageY,n=V+-(t-R);i.a.dispatch(Object(u.c)(Math.min(Math.max(n,0),l.a.logMaxHeight)))}}function B(e){r=setTimeout(function(){a.a.removeClass(p,d)},1200),f=c.h.NULL,a.a.removeEvent(s,"mousemove",q),a.a.removeEvent(s,"mouseup",B)}},AcTD:function(e,t,n){"use strict";var r=n("/MKj"),o=(n("pNMO"),n("4Brf"),n("0oug"),n("4mDm"),n("NBAS"),n("ExoC"),n("07d7"),n("PKPk"),n("3bBZ"),n("q1tI")),a=n.n(o),i=n("78UK"),u=n("J76n"),c=(n("2B1R"),n("sMBO"),n("Aosp"),n("diRs")),l=(n("2oDE"),n("CtXQ")),s=n("kEWA"),p=n("V0bm"),d=n("gtRY");function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var b=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),y(this,g(t).apply(this,arguments))}var n,r,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(t,o["Component"]),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.readonly,n=e.nodeList,r=e.chooseId,o=e.testEnv,u=e.debuggedMap,f=e.changeChooseId;return a.a.createElement(a.a.Fragment,null,n.map(function(e,n){var m=e.id,y=e.nodeType,g=e.x,v=e.y,b=e.pId,h=e.entryId,O=e.isError,w=e.configuration,E=((o===s.p.Debugging?u[m]:null)||{}).code,j=E===s.b.Success,P=E===s.b.Failure,I=p.a[y],S=I.name,C=I.iconCls,T=w.name,D=w.output,L=a.a.createElement("div",{className:""},"节点名称：",T,a.a.createElement("br",null),"节点类型：",S,a.a.createElement("br",null),"ID：",m),k=D.length,_="draw-nodeItem draw-nodeItem-move"+(r===m?" draw-nodeItem-selected":"")+(O?" draw-nodeItem-fault":"")+(t?" draw-readonly":""),A="draw-output-wrap"+(1===k?" draw-output-wrap-only":""),N="draw-nodeItem-icon "+(C||""),M="draw-entry"+(b?" draw-forbid":""),x={left:g+"px",top:v+"px",height:Object(d.u)(e),zIndex:30+n},V=function(e){return Object(i.b)(e,m,h,b,y)};return a.a.createElement("div",{className:_,style:x,id:m,"data-type":y,key:m,onContextMenu:t?void 0:function(e){Object(i.j)(e,s.e.NODE,m)}},a.a.createElement(c.a,{content:L,placement:"right",overlayClassName:"draw-popover",mouseEnterDelay:1},a.a.createElement("div",{className:"draw-nodeItem-inner",onMouseDown:t?void 0:function(e){return Object(i.i)(e,m,g,v)},onMouseUp:t?void 0:V,onClick:t?function(){return f(m)}:void 0},a.a.createElement("i",{className:N}),a.a.createElement("div",{className:"draw-nodeItem-text"},T),O||P?a.a.createElement(l.a,{className:"draw-nodeItem-error",type:"close-circle",theme:"filled"}):null,j?a.a.createElement(l.a,{className:"draw-nodeItem-success",type:"check-circle",theme:"filled"}):null)),b?a.a.createElement("div",{className:"draw-arrow"},a.a.createElement("div",{className:"draw-arrow-inner"})):null,h?a.a.createElement("div",{id:h,className:M,onMouseUp:t?void 0:V}):null,k>0?a.a.createElement("div",{className:A},D.map(function(e,n){var r=e.id,o=e.connectId,u="draw-output draw-output-"+n+(o?" draw-forbid":""),c=o?void 0:function(e){return Object(i.c)(e,m,r)};return a.a.createElement("div",{key:r,id:r,className:u,onMouseDown:t?void 0:c})})):null)}))}}])&&m(n.prototype,r),u&&m(n,u),t}(),h=Object(r.b)(function(e){var t=e.get("drawView");return{readonly:t.readonly,nodeList:t.nodeList,nodeMap:t.nodeMap,testEnv:t.testEnv,debuggedMap:t.debuggedMap,chooseId:t.chooseId}},function(e){return{changeChooseId:function(t){return e(Object(d.a)(t))}}})(b);function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e,t){return!t||"object"!==O(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var I=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),E(this,j(t).apply(this,arguments))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(t,o["Component"]),n=t,(r=[{key:"render",value:function(){var e=this.props.lineArrow;if(null===e)return null;var t={left:e.x+"px",top:e.y+"px"};return a.a.createElement("div",{className:"draw-arrow draw-arrow-connect",style:t},a.a.createElement("div",{className:"draw-arrow-inner"}))}}])&&w(n.prototype,r),i&&w(n,i),t}(),S=Object(r.b)(function(e){return{lineArrow:e.get("drawView").lineArrow}})(I);function C(e){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function D(e,t){return!t||"object"!==C(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function L(e){return(L=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var _=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),D(this,L(t).apply(this,arguments))}var n,r,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(t,o["Component"]),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.readonly,n=e.lineList,r=e.chooseId,o=e.chooseLineId,u=e.changeChooseId,c=e.changeChooseLineId;return a.a.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",id:"drawView-Line",onClick:t?void 0:function(e){u(null)},onContextMenu:t?void 0:function(e){Object(i.j)(e,s.e.CONTEXT,s.e.CONTEXT)}},n.map(function(e){var n=e.uniqueId,l=e.path,p=n===r||n===o?"#0070CC":"#c1c1c1";return a.a.createElement("g",{key:n},a.a.createElement("path",{id:n,d:l,fill:"none",stroke:p,strokeWidth:1}),a.a.createElement("path",{d:l,fill:"none",stroke:"rgba(255,0,0,.0)",strokeWidth:20,onMouseEnter:function(){return c(n)},onMouseLeave:function(){return c(null)},onClick:t?void 0:function(e){e.stopPropagation(),u(n)},onContextMenu:t?void 0:function(e){Object(i.j)(e,s.e.LINE,n)}}))}))}}])&&T(n.prototype,r),u&&T(n,u),t}(),A=Object(r.b)(function(e){var t=e.get("drawView");return{readonly:t.readonly,lineList:t.lineList,chooseId:t.chooseId,chooseLineId:t.chooseLineId}},function(e){return{changeChooseId:function(t){return e(Object(d.a)(t))},changeChooseLineId:function(t){return e(Object(d.b)(t))}}})(_),N=(n("L/Qf"),n("2/Rp")),M=n("kRHp"),x=n("7i3Y");function V(e){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function R(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function F(e,t){return!t||"object"!==V(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function q(e){return(q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function B(e,t){return(B=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var J=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),F(this,q(t).apply(this,arguments))}var n,r,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&B(e,t)}(t,o["Component"]),n=t,(r=[{key:"componentDidUpdate",value:function(){u.a.initWH()}},{key:"render",value:function(){var e=this.props,t=e.readonly,n=e.showChooser,r=e.showConfiguration,o=e.showLog,u=e.showLogHeight,c=e.toggleChooserView,l=e.toggleConfigurationView,s=e.toggleLogView;if(t)return null;var p={bottom:u},d=(n?"隐藏":"显示")+"左侧栏",f=(o?"隐藏":"显示")+"日志栏",m=(r?"隐藏":"显示")+"右侧栏",y=n?"#333":"#c1c1c1",g=o?"#333":"#c1c1c1",v=r?"#333":"#c1c1c1";return a.a.createElement("div",{className:"draw-toolBox",style:p},a.a.createElement("div",{className:"draw-toolBox-group"},a.a.createElement(M.a,{content:d},a.a.createElement(N.a,{type:"link",onClick:c},a.a.createElement(x.b,{icon:x.a.LeftView,fill:y}))),a.a.createElement(M.a,{content:f},a.a.createElement(N.a,{type:"link",onClick:s},a.a.createElement(x.b,{icon:x.a.LogView,fill:g}))),a.a.createElement(M.a,{content:m},a.a.createElement(N.a,{type:"link",onClick:l},a.a.createElement(x.b,{icon:x.a.RightView,fill:v})))),a.a.createElement("div",{className:"draw-toolBox-resize",onMouseDown:function(e){return Object(i.h)(e,u)}}))}}])&&R(n.prototype,r),c&&R(n,c),t}(),U=Object(r.b)(function(e){var t=e.get("drawView");return{showChooser:t.showChooser,showConfiguration:t.showConfiguration,showLog:t.showLog,showLogHeight:t.showLogHeight,readonly:t.readonly}},function(e){return{toggleChooserView:function(){return e(Object(d.J)())},toggleConfigurationView:function(){return e(Object(d.K)())},toggleLogView:function(){return e(Object(d.M)())}}})(J),H=(n("ma9I"),n("AUBz"),n("ZTPi")),G=n("OIuG");function Q(e){return(Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function W(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Z(e,t){return!t||"object"!==Q(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function z(e){return(z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function K(e,t){return(K=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Y,X=H.a.TabPane;!function(e){e.RETURN="0",e.RESULT="1"}(Y||(Y={}));var $=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=Z(this,(e=z(t)).call.apply(e,[this].concat(o)))).state={tab:Y.RETURN},n.animated={inkBar:!0,tabPane:!1},n.tab=function(e){return n.setState({tab:e})},n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&K(e,t)}(t,o["Component"]),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.isShow,n=e.height,r=e.debuggedResult,o=e.debuggedOutput,i=e.toggle,c=e.toFullscreen;if(!t)return null;var l=this.state.tab,s={height:n},p=n===u.a.logMaxHeight,d=p?x.a.FullscreenBack:x.a.Fullscreen,f=a.a.createElement(a.a.Fragment,null,a.a.createElement(M.a,{content:p?"关闭全屏显示":"全屏显示"},a.a.createElement(N.a,{type:"link",onClick:c},a.a.createElement(x.b,{icon:d}))),a.a.createElement(M.a,{content:"关闭日志栏"},a.a.createElement(N.a,{type:"link",onClick:i},a.a.createElement(x.b,{icon:x.a.Close}))));return a.a.createElement("div",{className:"draw-log",style:s},a.a.createElement(H.a,{activeKey:l,animated:this.animated,onChange:this.tab,tabBarExtraContent:f},a.a.createElement(X,{tab:"API调用结果",key:Y.RETURN},r?a.a.createElement(G.a,{keyName:"日志",data:r}):null),a.a.createElement(X,{tab:"全局日志",key:Y.RESULT},o?a.a.createElement(G.a,{keyName:"全节点日志",data:o}):null)))}}])&&W(n.prototype,r),i&&W(n,i),t}(),ee=Object(r.b)(function(e){var t=e.get("drawView");return{isShow:t.showLog,height:t.showLogHeight,debuggedResult:t.debuggedResult,debuggedOutput:t.debuggedOutput}},function(e){return{toggle:function(){return e(Object(d.M)())},toFullscreen:function(){return e(Object(d.L)())}}})($);function te(e){return(te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ne(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function re(e,t){return!t||"object"!==te(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function oe(e){return(oe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ae(e,t){return(ae=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ie=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),re(this,oe(t).apply(this,arguments))}var n,r,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ae(e,t)}(t,o["Component"]),n=t,(r=[{key:"componentDidMount",value:function(){u.a.init("drawView-wrap","drawView-inner","drawView-Line")}},{key:"render",value:function(){var e,t=this.props,n=t.readonly,r=t.showChooser,o=t.showConfiguration,c=t.showLog,l=t.showLogHeight,s=r?"":" draw-no-chooser";return s+=o?"":" draw-no-configuration",s+=n?" draw-readonly":"",c&&(e={bottom:Math.min(l+p.g,u.a.logMaxHeight)}),a.a.createElement("div",{className:"draw-content"+s},a.a.createElement("div",{className:"draw-inner",id:"drawView-wrap",style:e,onDrop:n?void 0:i.g,onDragOver:n?void 0:i.a},a.a.createElement("div",{id:"drawView-inner",className:"draw-list"},a.a.createElement(h,null),a.a.createElement(S,null),a.a.createElement(A,null))),a.a.createElement(U,null),a.a.createElement(ee,null))}}])&&ne(n.prototype,r),c&&ne(n,c),t}();t.a=Object(r.b)(function(e){var t=e.get("drawView");return{readonly:t.readonly,showChooser:t.showChooser,showConfiguration:t.showConfiguration,showLog:t.showLog,showLogHeight:t.showLogHeight}})(ie)},Bffz:function(e,t,n){"use strict";n.d(t,"b",function(){return r});n("yq1k"),n("tkto"),n("FZtP");var r="/v5/web/open",o="/v4/web/tencentcloud/upload";"open.clife.cn"!=window.location.hostname&&"cms.clife.cn"!=window.location.hostname||(o="https://cms.clife.cn/v4/web/tencentcloud/upload");var a="?version=1.1",i=["upFileUrl"],u={upFileUrl:o,loginCheck:"/common/admin/loginCheck",logout:"/common/admin/logout",verifyCodeUrl:"/common/admin/getImgVeriCode",register:"/public/account/register",registerConfirm:"/public/account/registerConfirm",resendRegisterEmail:"/public/account/resendRegisterEmail",resetPassword:"/public/account/resetPassword",subResetPassword:"/reset/sub/resetPwd",forgetPasswordAuth:"/reset/forget/auth",resendForgetPasswordEmail:"/reset/forget/resendEmail",resetAuth:"/reset/auth",authConfirm:"/reset/authConfirm",resetEmail:"/reset/resetEmail",resetEmailConfirm:"/reset/emailConfirm",setPassword:"/reset/setPassword",getDeveloperInfo:"/developer/getDeveloperInfo",upDeveloperInfo:"/developer/updateInfo",getRightsOneself:"/rights/getRightsOneself",cancelAccount:"/developer/cancelAccount",withdraw:"/developer/withdraw",getProductList:"/product/listAllProductAndAccreditInfo",copyProduct:"/product/copy",delectProduct:"/product/deleteProduct",getProductBaseInfo:"/product/getProduct",updateProductBaseInfo:"/product/update",getProtocolTemplates:"/protoManage/getProtocolTemplatesByProductId",addProtocolTemplates:"/protoManage/saveProtocolTemplates",getProtocolList:"/productProtocol/getProtocolListByProductId",saveProtocol:"/productProtocol/saveProtocol",delProtocol:"/protoManage/delProtocol",exportProtocol:"//protoManage/exportProtocolToJson",getProtocolDictionaryCommonList:"/protoManage/getProtocolDictionaryCommonList",searchProtocolDictionary:"/protoManage/searchProtocolDictionary",getSubjectMenu:"/protoManage/getSubjectMenu",getSubjectExtendMenu:"/protoManage/getSubjectExtendMenu",getFunctionMenu:"/protoManage/getFunctionMenu",getFunctionExtendMenu:"/protoManage/getFunctionExtendMenu",getTsl:"/tsl/getTSL",exportTsl:"/tsl/export",saveNoProductId:"/thing/label/saveNoProductId",getConfigSteps:"/product/getConfigSteps",saveConfigSteps:"/product/saveConfigSteps",getH5Pages:"/projectManage/getProjectPage",getTemplateMarket:"/h5/template/getTemplateMarket",getTemplateBaseInfo:"/h5/template/getTemplateBaseInfo",getTemplateAnalysis:"/h5/template/getAnalysis",useAppPanelTemplate:"/projectManage/useAppPanelTemplate",saveProject:"/projectManage/saveProject",delProject:"/projectManage/delProject",copyProject:"/projectManage/copyProject",getAppsByProductId:"/projectManage/getAppsByProductId",getFormalPubHistory:"/projectManage/getFormalPubHistory",getGreyPubHistory:"/projectManage/getGreyPubHistory",garyUpdate:"/projectManage/garyUpdate",formalUpdate:"/projectManage/formalUpdate",offlineUiDesign:"/projectManage/offlineUiDesign",cancelGrayUpdate:"/projectManage/cancelGrayUpdate",netWorkDelete:"/device/netWorkLogo/delete",netWorkAddAndUpdate:"/device/netWorkLogo/addAndUpdate",getLinkConfiguration:"/device/netWorkLogo/getDetail",getLinkHelpImg:"/product/help/get",saveLinkHelpImg:"/product/help/save",getTimeServiceList:"/timerService/getList",updateTimeService:"/timerService/update",getTimeService:"/timerService/get",saveTimeService:"/timerService/save",getSceneFunctionList:"/scene/getSceneFunctionList",addBatchSceneFunction:"/scene/addBatchSceneFunction",addOrUpdateSingleCondition:"/scene/addOrUpdateSingleCondition",addCustomAction:"/scene/addCustomAction",updateSceneFunction:"/scene/updateSceneFunction",deleteSceneFunctionById:"/scene/deleteSceneFunctionById",auditBatchSceneFunction:"/scene/auditBatchSceneFunction",getAuditRecord:"/scene/getAuditRecord",queryServerConfig:"/device/debug/queryServerConfig",productIdentifier:"/product/getProductIdentifier",accessToken:"/device/debug/getAccessToken",dataTypeList:"/device/debug/getDataTypeList",propertyConfig:"/device/debug/getPropertyConfig_v1.1",deviceDebugAccountGetList:"/device/debug/account/getList",deviceDebugAccountInsert:"/device/debug/account/insert",deviceDebugAccountDelete:"/device/debug/account/delete",deviceDebugMacGetList:"/device/debug/mac/getList",deviceDebugMacInsert:"/device/debug/mac/insert",deviceDebugMacDelete:"/device/debug/mac/delete",upgradeDebug:"/device/debug/upgradeDebug",debugSecretList:"/device/debug/mac/debugSecretList",addDebugMac:"/device/debug/mac/addDebugMac",delDebugMac:"/device/debug/mac/delDebugMac",getApiList:"/apiInfo/getOpenApiList",getDimensionList:"/dimension/getDimensionList",getMethodList:"/stats/customApi/getMethodList",getMethodLimit:"/stats/customApi/getMethodLimit",getMethodProductList:"/stats/singleMonitor/behavior/getProductList",getProtocolListByProductId:"/protoManage/getProtocolListByProductId",addMethod:"/stats/customApi/addMethod",getMethodDetail:"/stats/customApi/getMethodDeail",delMethod:"/stats/customApi/delMethod",getCatalogList:"/product/getCatalogList",productBaseTypeList:"/product/baseType/list",addProduct:"/product/addProduct",moduleBrandList:"/product/moduleBrand/list",getModuleList:"/product/getModuleList",mcuCodeCheck:"/protoManage/mcuCodeCheck",mcuCodeExport:"/protoManage/mcuCodeExport",saveModule:"/product/saveModule",getModuleInfo:"/product/getModuleInfo",versionList:"/device/version/list",getAllDeviceVersionType:"/device/version/getAllDeviceVersionType",getAllFirmwareVersionType:"/device/version/getAllFirmwareVersionType",versionAdd:"/device/version/add",versionDelete:"/device/version/delete",versionCheckMac:"/device/version/checkMac",versionValidate:"/device/version/validate",versionPublish:"/device/version/publish",saveCommerceInfo:"/product/saveCommerceInfo",productPublishAdd:"/productPublish/add",getCommerceInfo:"/product/getCommerceInfo",getPublishProductInfo:"/product/getPublishProductInfo",getProductLabelList:"/label/getList",getProductLabelBaseList:"/label/getDownList",addProductLabel:"/label/add",updateProductLabel:"/label/update",delProductLabel:"/label/delete",getThingLabelList:"/thing/label/getList",getUserProduct:"/deviceInfo/getProduct",getDeviceStat:"/deviceInfo/deviceStat",getDeviceList:"/deviceInfo/getDeviveList",getDeviceInfo:"/deviceInfo/get",getDeviceLabelList:"/deviceLabel/getList",getLabelBaseList:"/deviceLabel/getDownList",addDeviceLabel:"/deviceLabel/add",updateDeviceLabel:"/deviceLabel/update",deleteDeviceLabel:"/deviceLabel/delete",exportDeviceList:"/deviceV5/export",getChildlist:"/public/account/getChildlist",freezeChild:"/public/account/freezeChild",unfreezeChild:"/public/account/unfreezeChild",deleteChild:"/public/account/deleteChild",getRoleList:"/role/getRoleList",addMultiChild:"/public/account/addMultiChild",updateChild:"/public/account/updateChild",getChildWithSecret:"/public/account/getChildWithSecret",getRights:"/rights/getRights",getRolePage:"/role/getRolePage",deleteRole:"/role/deleteRole",getGroupMenuList:"/rolePlus/getGroupMenuList",saveRole:"/rolePlus/saveRole",getProvince:"/stats/analysis/getProvince",getCityByProvinceId:"/stats/analysis/getCityByProvinceId",getDataSubscriptionList:"/data/push/config/getList",getCurSubscription:"/data/push/config/getByUrlConfId",stopCurSubscription:"/data/push/config/stop"+a,enabledCurSubscription:"/data/push/config/enabled"+a,getProductByDeveloperId:"/data/push/config/getProductByDeveloperId",getLabelByProductId:"/data/push/config/getLabelByProductId",createSubscription:"/data/push/config/create"+a,saveSubscription:"/data/push/config/save"+a,getApplicationList:"/devapp/getAppList",saveAppBaseInfo:"/devapp/saveAppBaseInfo"+a,saveMiniProgramsInfo:"/devapp/saveMiniProgramsInfo"+a,deleteRelationProduct:"/devapp/deleteRelaProduct"+a,deleteAppVersion:"/devapp/version/delete"+a,getAppInfo:"/devapp/getAppInfo",updateRelaProduct:"/devapp/updateRelaProduct"+a,deleteApp:"/devapp/delete"+a,createAppVersion:"/devapp/version/add"+a,getAppVersionDetail:"/devapp/version/get",getRelaProducts:"/devapp/getRelaProducts",getVersionList:"/devapp/getList",getDevProductList:"/devapp/getDevProductList",getOperateLogList:"/operate/log/getList",getNoticeList:"/systemNotice/getNoticeList",getNoticeDetail:"/systemNotice/getNoticeDetail",setRead:"/systemNotice/setRead",getUnreadQuantity:"/systemNotice/getUnreadQuantity",getJsContent:"/protoManage/getJsProtoScript",sumbitJsContent:"/protoManage/saveJsProtoScript",getStatisticsData:"/device/register/statistics",getDeviceRegisterList:"/device/register/list",registerImport:"/device/register/import",getStatistics:"/device/register/senior/statistics",getSeniorDeviceList:"/device/register/senior/list",getDeviceWarningTotal:"/warning/info/total",getWarningList:"/warning/info/getList",saveWarningConfig:"/warning/rule/add",getWarningConfigLi:"/warning/rule/getList",delWarningConfig:"/warning/rule/delete",startWarningConfigLi:"/warning/rule/startRule",stopWarningConfig:"/warning/rule/stopRule",getWarningConfigDetail:"/warning/rule/get",getWarningInfo:"/warning/info/get",dealWithWarning:"/warning/info/deal",reflushWarningDeviceIds:"/warning/info/flush",getRomoteConfigListByProduct:"/remote/config/product/task/getPage",saveRomoteConfig:"/remote/config/product/task/save",submitRomoteConfig:"/remote/config/product/task/submit",deleteRomoteConfig:"/remote/config/product/task/delete",getAllDeviceInfo:"/remote/config/product/device/getAllDeviceInfoPage",getDeviceInfoByIdOrMacAddress:"/remote/config/product/device/getDeviceInfoByIdOrMacAddress",downloadRemoteDeviceTemplateExcel:"/remote/config/product/device/downloadExcel",importRemoteDeviceExcel:"/remote/config/product/device/importExcel",getRemoteDetail:"/remote/config/product/task/get",getResultTotal:"/remote/config/product/task/getResultTotal",getDeviceResultList:"/remote/config/product/task/getResultPager",retryByTaskId:"/remote/config/product/task/retry",batchRetry:"/remote/config/product/task/batchRetry",exportTaskResult:"/remote/config/product/task/exportResult",getReceiveMsg:"/remote/config/product/task/getReceiveMsg",getRomoteConfigListForDevice:"/remote/config/device/task/getPage",getRemoteDetailForDevice:"/remote/config/device/task/get",saveRomoteConfigForDevice:"/remote/config/device/task/saveAndSubmit",retryByTaskIdForDevice:"/remote/config/device/task/retry",getReceiveMsgForDevice:"/remote/config/device/task/getReceiveMsg",getCaseList:"/instance/getList",getCasePageList:"/instance/getPage",updateCaseStatus:"/instance/updateStatus",addCase:"/instance/add",applySource:"/instance/update",getAuthorizeList:"/auth/getList",deleAuthorize:"/auth/deleteAuth",getAuthList:"/auth/authList",addAuthorize:"/auth/add",getDownProduct:"/project/device/getDownProduct",getAuthorServeList:"/serve/getServerList",getDataAssetsList:"/data/assets/getList",getDataAssetsListAuth:"/data/assets/getAssetsList",addDataAssets:"/data/assets/add",delDataAssets:"/data/assets/delete",updateDataAssets:"/data/assets/update",getInfoDataAssets:"/data/assets/get",testDataAssets:"/data/assets/test",getGroupList:"/group/getList",getGroupListAuth:"/group/getGroupList",updateGroup:"/group/addOrUpdate",deleteGroup:"/group/delete",getGroupDetail:"/group/get",getGroupDeviceList:"/group/getDeviceList",addGroupDevice:"/group/relaDevice",getGroupSlctDev:"/group/getRelaList",delGroupDevice:"/group/deleteRela",getCreateProduct:"/prod/getCreateProduct",getProjectList:"/project/getList",addProject:"/project/add",updateProject:"/project/update",deleteProject:"/project/delete",getProductInProject:"/prod/getProduct",getRelaProduct:"/prod/getRelaProduct",getRelaDevice:"/project/device/getRelaDevice",getDeviceInProject:"/project/device/getDevice",getServeList:"/serve/getList",serveAdd:"/serve/add",serveCopy:"/serveOpe/duplicate",serveDelete:"/serve/delete",servePublish:"/serveOpe/publish",serveInvoke:"/serveOpe/invoke",serveCallExplain:"/serveOpe/callExplain",getAllRelatedProduct:"/project/device/getDownProduct",getAllRelatedDevice:"/project/device/getRelatedDevice",unrelaProduct:"/prod/unrelaProduct",unrelaDevice:"/project/device/unrelaDevice",relaProduct:"/prod/relaProduct",relaDevice:"/project/device/relaDevice",addDevice:"/project/device/addDevice",getServiceLog:"/serveOpe/getServiceLog",getFlowData:"/serveOpe/editFlow",saveFlowData:"/serveOpe/saveFlow",getDataAnlzType:"/serveOpe/getDataAnlzType",getInvokeUrl:"/serveOpe/getInvokeUrl",parserSql:"/dataAccess/parserSql",getServeStatu:"/serve/get",getDownTbTreeByDs:"/dataAccess/getDownTbTreeByDs",getPublishParam:"/serveOpe/getPublishParam",updateServe:"/serve/update",sqlTestTslData:"/dataoperate/search/tslData",getProLogicTreeData:"/dataoperate/search/struct/product",sqlTestProductData:"/dataoperate/search/data/product",downTslHistory:"/dataoperate/search/download/history",addTslHistory:"/dataoperate/search/dataDownload",getDownDevice:"/project/device/getDevice",getDownPropEvent:"/device5/getDownPropEvent",getDownDatasource:"/data/assets/getDownDatasource",getDownTableByDatasource:"/dataAccess/getDownTableByDatasource",getDownFieldsByDatasourceTable:"/dataAccess/getDownFieldsByDatasourceTable",getDownEventList:"/device5/getDownEventList",getDataTransferList:"/transfer/getList",delOneTransfer:"/transfer/delete",saveTransfer:"/transfer/save",getDataTransfer:"/transfer/get",getTransferMenuList:"/transfer/getMenuList",getTransferDataTable:"/transfer/getTableInfo",checkSqlTransfer:"/transfer/checkSQL",getRocketMQTopicList:"/transfer/getRocketMQTopicList",geMonitorList:"/monitor/list",startMonitor:"/monitor/start",stopMonitor:"/monitor/stop",deleteMonitor:"/monitor/delete",addMonitor:"/monitor/add",updateMonitor:"/monitor/update",getMonitor:"/monitor/get",getTransfer4Monitor:"/transfer/getTransferList4Monitor",otaDevVersionList:"/device/version/5/getList",otaGetExtVersion:"/device/version/5/getExtVersion",otaAddVersion:"/device/version/5/add",otaImportMac:"/device/version/5/importMac",otaValidate:"/device/version/5/validate",otaDeleteVer:"/device/version/5/delete",otaRelease:"/device/version/5/publish",otaGetBatch:"/device/version/5/publish/getBatch",otaGetVersionDetail:"/device/version/5/version/get",otaGetBatchDevice:"/device/version/5/publish/get",otaGetBatchInfo:"/device/version/5/publish/getBatchInfo",otaCancelDevicePub:"/device/version/5/publish/cancel",otaValiGetinfo:"/device/version/5/validate/getInfo"};Object.keys(u).forEach(function(e){i.includes(e)||(u[e]=r+u[e])}),t.a=u},CpnY:function(e,t,n){"use strict";n("pNMO"),n("4Brf"),n("0oug"),n("4mDm"),n("2B1R"),n("sMBO"),n("NBAS"),n("tkto"),n("ExoC"),n("07d7"),n("PKPk"),n("FZtP"),n("3bBZ"),n("tULf");var r=n("Vl3Y"),o=(n("1vPl"),n("5rEg")),a=(n("Aosp"),n("diRs")),i=(n("2oDE"),n("CtXQ")),u=(n("AUBz"),n("ZTPi")),c=n("q1tI"),l=n.n(c),s=n("LgsE"),p=n("V0bm"),d=n("kEWA"),f=n("OIuG");function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t){return!t||"object"!==m(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var h=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),g(this,v(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(t,c["Component"]),n=t,(r=[{key:"render",value:function(){var e=this.props.data||{},t=e.code,n=e.data,r=this.props.nodeItem.configuration.name,o=t===d.b.Success,a='"'.concat(r,'"日志'),i=o?void 0:"draw-debug-error";return l.a.createElement("div",{className:"draw-debug"},l.a.createElement("span",null,a),o?l.a.createElement(f.a,{keyName:r,data:n}):l.a.createElement(l.a.Fragment,null,l.a.createElement("br",null),l.a.createElement("span",{className:i},n+"")))}}])&&y(n.prototype,r),o&&y(n,o),t}();function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e,t){return!t||"object"!==O(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,"b",function(){return C}),n.d(t,"c",function(){return T});var I,S=u.a.TabPane;!function(e){e.CONFIG="0",e.LOG="1"}(I||(I={}));var C={layout:"vertical",labelCol:{xs:{span:24},sm:{span:24}},wrapperCol:{xs:{span:24},sm:{span:24}}},T=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return l.a.createElement(l.a.Fragment,null,e,t?l.a.createElement(a.a,{content:t,overlayClassName:"draw-popover"},l.a.createElement(i.a,{type:"question-circle"})):null,n||null)},D=T(s.a.nameStr,s.a.nameExplain),L={},k=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=E(this,j(t).call(this,e))).animated={inkBar:!0,tabPane:!1},n.tab=function(e){return n.setState({tab:e})},n.itemError=!1,n.state={tab:I.CONFIG},n}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(t,c["Component"]),n=t,(a=[{key:"componentDidMount",value:function(){var e=this.props,t=e.form,n=e.nodeItem,r=n.id,o=n.isError;L[r]&&t.setFields(L[r]),this.itemError=o,o&&t.validateFields()}},{key:"componentDidUpdate",value:function(){var e=this.props,t=e.form,n=e.nodeItem,r=n.isError,o=n.configuration.name;r!==this.itemError&&(this.itemError=r,r&&t.validateFields()),o!==t.getFieldValue("name")&&t.setFieldsValue({name:o})}},{key:"componentWillUnmount",value:function(){var e=this.props,t=e.form,n=e.nodeItem.id,r=t.getFieldsError(),o=!1,a={};Object.keys(r).forEach(function(e){r[e]&&(o=!0,a[e]={errors:(r[e]||[]).map(function(t){return{field:e,message:t}})})}),L[n]=o?a:void 0}},{key:"render",value:function(){var e=this.state.tab,t=this.props,n=t.readonly,a=t.render,i=t.form,c=t.nodeItem,d=t.log,f=t.debuggedMap,m=c.id,y=c.nodeType,g=c.configuration.name,v=i.getFieldDecorator,b=p.a[y].apiDocumentLink,O=b?l.a.createElement("div",{className:"draw-del"},l.a.createElement("a",{href:b,target:"_blank",rel:"noreferrer",className:"draw-use-node"},s.a.nameMore)):null,w=f[m]?d||l.a.createElement(h,{nodeItem:c,data:f[m]}):null;return l.a.createElement("div",{className:"draw-config-inner"},l.a.createElement(u.a,{activeKey:e,animated:this.animated,onChange:this.tab},l.a.createElement(S,{tab:"节点配置",key:I.CONFIG},l.a.createElement(r.a,C,l.a.createElement(r.a.Item,{label:D},O,v("name",{initialValue:g,rules:s.a.name()})(l.a.createElement(o.a,{placeholder:"请输入"+s.a.nameStr,disabled:n}))),a(i))),l.a.createElement(S,{tab:"节点日志",key:I.LOG},w||l.a.createElement("p",null,"暂无日志"))))}}])&&w(n.prototype,a),i&&w(n,i),t}();t.a=r.a.create({name:"BaseConfiguration",onValuesChange:function(e,t,n){var r=e.nodeItem.id,o=e.changeNodeConfiguration;console.log(888888,r,t);var a=!1,i={};Object.keys(t).forEach(function(e){/^__.*__$/.test(e)||(a=!0,i[e]=t[e])}),a&&o(r,i)}})(k)},EZYW:function(e,t,n){"use strict";n.r(t),n.d(t,"updateProductListAction",function(){return f}),n.d(t,"getProductListAction",function(){return m}),n.d(t,"updateProductBaseInfo",function(){return y}),n.d(t,"getProductBaseInfo",function(){return g}),n.d(t,"updateProtocolLists",function(){return v}),n.d(t,"getProtocolLists",function(){return b}),n.d(t,"updateConfigSteps",function(){return h}),n.d(t,"getConfigSteps",function(){return O}),n.d(t,"updateH5Manages",function(){return w}),n.d(t,"getH5Manages",function(){return E}),n.d(t,"updateAppsByProductId",function(){return j}),n.d(t,"getAppsByProductId",function(){return P}),n.d(t,"updateTimeServiceList",function(){return I}),n.d(t,"getTimeServiceList",function(){return S}),n.d(t,"updateCatalogListAction",function(){return C}),n.d(t,"getCatalogListAction",function(){return T}),n.d(t,"updateProductBaseTypeListAction",function(){return D}),n.d(t,"getProductBaseTypeListAction",function(){return L}),n.d(t,"updateAddProductAction",function(){return k}),n.d(t,"getAddProductAction",function(){return _}),n.d(t,"triggerDebugger",function(){return A}),n.d(t,"getJsContent",function(){return N}),n.d(t,"setJsContent",function(){return M}),n.d(t,"submitJsContent",function(){return x}),n.d(t,"updateInfo",function(){return V}),n.d(t,"updateInfoDetail",function(){return R}),n.d(t,"switchTab",function(){return F}),n.d(t,"getModuleList",function(){return q}),n.d(t,"setHardwareTypeAction",function(){return B}),n.d(t,"setHardwareType",function(){return J}),n.d(t,"setModuleList",function(){return U}),n.d(t,"setModuleItem",function(){return H}),n.d(t,"changeModule",function(){return G}),n.d(t,"saveModule",function(){return Q}),n.d(t,"setProductInfo",function(){return W}),n.d(t,"modifyCommFreq",function(){return Z}),n.d(t,"setHardwareParam",function(){return z}),n.d(t,"updateMcuCodeCheck",function(){return K}),n.d(t,"getMcuCodeCheck",function(){return Y});n("pNMO"),n("TeQF"),n("5DmW"),n("27RR"),n("tkto"),n("07d7"),n("5s+n"),n("FZtP"),n("8/o9");var r=n("tsqr"),o=n("BkRI"),a=n.n(o),i=n("Nlzp"),u=n("JPcv"),c=n("t98y"),l=n("P2RN");function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(n,!0).forEach(function(t){d(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=function(e){return{type:c.H,list:Object(u.fromJS)(e)}},m=function(e){return function(t,n){Object(i.c)(i.a.getProductList,p({},e,{instanceId:2}),{needVersion:1.2,loading:!0}).then(function(e){var n=e.data,r=f(n);t(r)})}},y=function(e){return{type:c.F,info:Object(u.fromJS)(e)}},g=function(e){return function(t,n){Object(i.c)(i.a.getProductBaseInfo,{productId:e},{needVersion:1.1,loading:!0}).then(function(e){var n=y(e.data);t(n)})}},v=function(e){return{type:c.I,list:Object(u.fromJS)(e)}},b=function(e){return function(t,n){Object(i.c)(i.a.getProtocolList,{productId:e},{needVersion:1.2,loading:!0}).then(function(e){var n=v(e.data.list);t(n)})}},h=function(e){return{type:c.D,list:Object(u.fromJS)(e)}},O=function(e){return function(t,n){Object(i.c)(i.a.getConfigSteps,{productId:e}).then(function(e){var n=h(e.data);t(n)})}},w=function(e){return{type:c.E,data:Object(u.fromJS)(e)}},E=function(e){return function(t,n){Object(i.c)(i.a.getH5Pages,p({},e,{date:+new Date}),{needVersion:"1.1"}).then(function(e){var n=w(e.data);t(n)})}},j=function(e){return{type:c.C,list:Object(u.fromJS)(e)}},P=function(e){return function(t,n){Object(i.c)(i.a.getAppsByProductId,{productId:e},{needVersion:"1.1"}).then(function(e){var n=a()(e.data||[]),r=j(n);t(r)})}},I=function(e){return{type:c.J,data:Object(u.fromJS)(e)}},S=function(e){return function(t,n){Object(i.c)(i.a.getTimeServiceList,e,{loading:!0}).then(function(e){var n=I(e.data);t(n)})}},C=function(e){return{type:c.n,data:Object(u.fromJS)(e)}},T=function(){return function(e,t){Object(i.c)(i.a.getCatalogList).then(function(t){var n=C(t);e(n)})}},D=function(e){return{type:c.q,data:Object(u.fromJS)(e)}},L=function(){return function(e,t){Object(i.c)(i.a.productBaseTypeList).then(function(t){var n=D(t);e(n)})}},k=function(e){return{type:c.q,data:Object(u.fromJS)(e)}},_=function(e){return function(t,n){Object(i.d)(i.a.addProduct,e,{loading:!0}).then(function(e){0==e.code&&(Object(l.a)({type:"success",message:"创建成功",description:"创建产品成功！"}),window.history.back())})}},A=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return function(n){return n(e&&t?N(t):M("")),n({type:c.B,visible:e})}},N=function(e){return function(t){return Object(i.c)(i.a.getJsContent,{productId:e},{loading:!0}).then(function(e){var n=e.data;0===e.code&&t(M(n?n.scriptContent:""))})}},M=function(e){return{type:c.w,jsContent:e}},x=function(e,t){return function(n){return Object(i.d)(i.a.sumbitJsContent,{productId:e,javascript:t},{loading:!0}).then(function(e){0===e.code&&(Object(l.a)({type:"success",duration:3,message:"保存成功"}),n(A(!1)))})}},V=function(e){return function(t){return Object(i.d)(i.a.updateProductBaseInfo,e,{needFormData:!0,loading:!0}).then(function(n){return 0===n.code?(r.a.success("保存成功"),t(R(e)),Promise.resolve(1)):Promise.resolve(0)})}},R=function(e){return{type:c.G,info:e}},F=function(e){return function(t){return 1===e&&t(H({})),t({type:c.z,tabIndex:e})}},q=function(e){return function(t){return t(B(e.hardwareType)),Object(i.c)(i.a.getModuleList,e,{loading:!0}).then(function(e){return 0===e.code?(t(U(e.data)),Promise.resolve(e.data)):Promise.resolve(0)})}},B=function(e){return{type:c.v,hardwareType:e}},J=function(e){return function(t){t(B(e))}},U=function(e){return{type:c.y,list:Object(u.fromJS)(e)}},H=function(e){return{type:c.x,moduleItem:Object(u.fromJS)(e)}},G=function(){return{type:c.c}},Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,n){var r=n().getIn(["product"]).toJS(),o=r.hardwareType,a=r.commFreq,u=r.moduleItem,c=p({productId:r.productBaseInfo.productId,hardwareType:o,commFreq:+a,moduleId:u.moduleId},e);return Object(i.c)(i.a.saveModule,c,{loading:!0}).then(function(e){return 0===e.code?(Object(l.a)({type:"success",message:"保存信息成功！",duration:3}),t(W(c)),Promise.resolve(1)):Promise.resolve(0)})}},W=function(e){return{type:c.d,params:e}},Z=function(e){return{type:c.p,commFreq:e}},z=function(e){var t=e.hardwareType,n=e.commFreq;return function(e){e(J(t)),e(Z(n))}},K=function(e){return{type:c.o,bl:Object(u.fromJS)(e)}},Y=function(e){return function(t){return Object(i.c)(i.a.mcuCodeCheck,{productId:e},{noNotification:!0}).then(function(e){0===e.code&&t(K(!0))})}}},"F6+i":function(e,t,n){},GNPG:function(e,t,n){"use strict";n.d(t,"f",function(){return v}),n.d(t,"l",function(){return b}),n.d(t,"k",function(){return h}),n.d(t,"s",function(){return O}),n.d(t,"e",function(){return w}),n.d(t,"i",function(){return E}),n.d(t,"h",function(){return j}),n.d(t,"u",function(){return P}),n.d(t,"b",function(){return S}),n.d(t,"c",function(){return C}),n.d(t,"d",function(){return T}),n.d(t,"a",function(){return D}),n.d(t,"t",function(){return L}),n.d(t,"g",function(){return k}),n.d(t,"j",function(){return _}),n.d(t,"m",function(){return N}),n.d(t,"n",function(){return x}),n.d(t,"q",function(){return V}),n.d(t,"r",function(){return R}),n.d(t,"o",function(){return F}),n.d(t,"p",function(){return q});n("oVuX"),n("FZtP"),n("O+I2");var r=n("TeRw"),o=n("Nlzp"),a=n("JPcv"),i=n("t98y"),u=n("vDqi"),c=n.n(u),l=[],s=[],p="",d="",f={};function m(e){return Object(o.c)(o.a.queryServerConfig,{productId:e})}function y(e){return Object(o.c)(o.a.productIdentifier,{productId:e})}function g(){return Object(o.c)(o.a.accessToken)}var v=function(e){return function(t,n){c.a.all([m(e),y(e),g()]).then(c.a.spread(function(e,n,r){var o=function(e){return{type:i.j,data:Object(a.fromJS)(e)}}({wsUrl:e,productInfo:n,token:r});t(o)}))}};var b=function(e){return function(t,n){var o,u,c;e.dataTypeString={U:"上行数据",D:"下行数据",E:"调试异常信息"}[e.dataType],e.packetLengthString=e.packetLength+"字节",e.dataLengthString=e.dataLength+"字节",e.id=function(){for(var e=[],t=0;t<36;t++)e[t]="0123456789abcdef".substr(Math.floor(16*Math.random()),1);return e[14]="4",e[19]="0123456789abcdef".substr(3&e[19]|8,1),e[8]=e[13]=e[18]=e[23]="-",e.join("")}(),0==e.bussinessType||1==e.bussinessType?"FF03"==e.command?p=e.parseData.exception+"\r\n"+p:l.unshift(e):2==e.bussinessType||3==e.bussinessType?"FF04"==e.command||"FF05"==e.command?d=e.parseData.exception+"\r\n"+d:s.unshift(e):"FFFF"==e.command&&e.parseData.info&&r.a.open({message:"命令调试提示",description:e.parseData.info,style:{width:500,marginLeft:-265}}),o=e.macAddress,u=e.packetStart,f[o]={time:(new Date).getTime(),packetStart:u},t((c={devData:l,devData2:s,onlineDevice:f,deviceDebuggerException:p,deviceDebuggerException2:d},{type:i.K,data:Object(a.fromJS)(c)}))}},h=function(e){return function(e,t){c.a.all([g()]).then(c.a.spread(function(t){var n,r=(n=t,{type:i.A,data:Object(a.fromJS)(n)});e(r)}))}},O=function(e){return function(e,t){e(function(e){return{type:i.s,data:Object(a.fromJS)(e)}}({deviceDebuggerDataList:[],deviceDebuggerDataList2:[],deviceDebuggerException:"",deviceDebuggerException2:"",onlineDevice:{}}))}},w=function(e){return function(t,n){Object(o.c)(o.a.dataTypeList,{productId:e}).then(function(e){var n=function(e){return{type:i.i,data:Object(a.fromJS)(e)}}(e);t(n)})}},E=function(e){return function(t,n){Object(o.c)(o.a.propertyConfig,{productId:e},{needVersion:1.1}).then(function(e){var n=e.data,r=n.idList,o={},u=function(e){r[e].forEach(function(t){o[t]=e})};for(var c in r)u(c);var l=function(e){return{type:i.r,data:Object(a.fromJS)(e)}}({propertyConfigId:o,propertyConfig:n.protocolList});t(l)})}},j=function(e){return function(t,n){Object(o.c)(o.a.debugSecretList,{productId:e},{loading:!0}).then(function(e){console.log("data--------",e);var n=P(e);t(n)})}},P=function(e){return{type:i.l,data:Object(a.fromJS)(e)}},I=function(e){return{type:i.b,data:Object(a.fromJS)(e)}},S=function(e){return function(t,n){t(I(e))}},C=function(e,t,n){return function(r,a){if(n){var i=I(n);r(i)}else Object(o.c)(o.a.delDebugMac,{id:t},{loading:!0}).then(function(t){0==t.code&&Object(o.c)(o.a.debugSecretList,{productId:e},{loading:!0}).then(function(e){var t=P(e);r(t)})})}},T=function(e){return function(t,n){t(function(e){return{type:i.m,data:Object(a.fromJS)(e)}}(e))}},D=function(e){return function(t,n){t(function(e){return{type:i.a,data:Object(a.fromJS)(e)}}(e))}},L=function(e){return{type:i.k,data:Object(a.fromJS)(e)}},k=function(e){return function(t,n){Object(o.c)(o.a.deviceDebugAccountGetList,{productId:e}).then(function(e){var n=L(e);t(n)})}},_=function(e){return function(t,n){t(L(e))}},A=function(e){return{type:i.t,data:Object(a.fromJS)(e)}},N=function(e){return function(t,n){t(A(e))}},M=function(e){return{type:i.u,data:Object(a.fromJS)(e)}},x=function(e){return function(t,n){t(M(e))}},V=function(){return function(e,t){var n;e((n=p="",{type:i.e,data:Object(a.fromJS)(n)}))}},R=function(){return p="",function(e,t){var n;e((n=p,{type:i.f,data:Object(a.fromJS)(n)}))}},F=function(){return function(e,t){var n=(l=[],{type:i.g,data:Object(a.fromJS)(l)}),r=A({});e(n),e(r)}},q=function(){return function(e,t){var n=(s=[],{type:i.h,data:Object(a.fromJS)(l)}),r=M({});e(n),e(r)}}},Hglc:function(e,t,n){},J76n:function(e,t,n){"use strict";n("pNMO"),n("4Brf"),n("0oug"),n("x0AG"),n("pjDv"),n("4mDm"),n("oVuX"),n("2B1R"),n("07d7"),n("JfAA"),n("PKPk"),n("FZtP"),n("3bBZ");var r=n("a+Kn"),o=n("V0bm"),a=n("gtRY");function i(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var u=document,c=window,l=new function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.wrap=void 0,this.inner=void 0,this.svg=void 0,this.width=void 0,this.height=void 0,this.logMaxHeight=u.documentElement.clientHeight-o.o-o.g,this.viewMinWidth=0,this.viewMinHeight=0,this.init=function(e,n,r){t.setDom(e,n,r),t.wrap&&(t.initWH(),t.bindResize())},this.setDom=function(e,n,r){t.wrap=u.getElementById(e),t.inner=u.getElementById(n),t.svg=u.getElementById(r)},this.initWH=function(){if(t.wrap){t.width=t.wrap.offsetWidth+20,t.height=t.wrap.offsetHeight+20,t.logMaxHeight=u.documentElement.clientHeight-o.o-o.g;var e=t.svg,n=t.inner,r=t.width,a=t.height,i=t.viewMinWidth,c=t.viewMinHeight;if(e&&n){var l=Math.max(r,i)+"px",s=Math.max(a,c)+"px";e.setAttribute("height",s),n.style.width=l,n.style.height=s}}},this.checkMin=function(e){var n=Math.max.apply(Math,i(e.map(function(e){return e.x})))+o.l,r=Math.max.apply(Math,i(e.map(function(e){var t=e.y,n=e.configuration.output.length;return t+(n<=1?32:18*n)})));t.viewMinWidth=n,t.viewMinHeight=r,t.initWH()},this.bindResize=function(){r.a.addEvent(c,"resize",t.checkSize)},this.checkSize=function(){t.svg&&t.initWH()},this.countPath=function(e,n){var r=e,o=n||e;return t.getLineString(r,o)},this.getLineString=function(e,n){var r=["M"+e.x,e.y].join(" "),o=t.getCenterPoint(e,n),a=t.getQPoint(e,o);return r+=["Q"+a.x,a.y,o.x,o.y].join(" "),r+=["T"+n.x,n.y].join(" ")},this.getCenterPoint=function(e,t){return{x:(e.x+t.x)/2,y:(e.y+t.y)/2}},this.getQPoint=function(e,t){e.x;return{x:e.x<=t.x?(e.x+t.x)/2+(t.x-e.x)/10:e.x+3*Math.abs(e.x-t.x)/5,y:e.y}},this.checkLine=function(e,n,r,o){var a=e.entryId,i=e.pOutputId,u=e.configuration.output,c=e.pIdpOutputIdSpare;i&&a&&t.resetLine(o[i],n),c.length>0&&c.forEach(function(e){t.resetLine(o[e[1]],n)}),u.forEach(function(e){var r=e.id;e.connectEntryId&&t.resetLine(o[r],n)})},this.resetLine=function(e,n){var r=e.id,i=e.outputId,u=e.toId;if(u){var c=n[r],l=c.x,s=c.y,p=c.configuration.output,d=Object(a.u)(n[r]),f=p.length,m=p.findIndex(function(e){return e.id===i});e.startPoint={x:l+o.m,y:1===f?s+d/2:s+18*m+2.5+6.5},e.path=t.countPath(e.startPoint,Object(o.i)(n[u]))}}};t.a=l},Kwcz:function(e,t,n){"use strict";n.d(t,"g",function(){return r}),n.d(t,"f",function(){return o}),n.d(t,"e",function(){return a}),n.d(t,"c",function(){return i}),n.d(t,"d",function(){return u}),n.d(t,"a",function(){return c}),n.d(t,"b",function(){return l});var r="DEVICE_UPDATE_PRODUCT_LIST",o="UPDATE_DEVICE_STAT",a="UPDATE_DEVICE_LIST",i="UPDATE_DEVICE_LABEL",u="UPDATE_DEVICE_LABELBASE",c="UPDATE_DEFAULT_DEVICE_LABEL",l="UPDATE_DEVICE_COUNT_STATU"},LgsE:function(e,t,n){"use strict";n("TWNs"),n("JfAA");var r=function(e){return{required:!0,message:e+"不能为空"}},o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;return{pattern:new RegExp("^.{"+e+","+t+"}$"),message:"长度为"+(t?e+"~"+t:"最少"+e)+"个字符"}},a=function(e,t){return{pattern:e,message:t}},i=/^[a-zA-Z0-9\-()_\u4e00-\u9fa5]{1,30}$/,u=/^[a-zA-Z][\w_]{0,49}$/,c=/^(\/?[\w_]+)*$/,l=/https?:\/\/[-A-Za-z0-9+&@#/%?=~_|!:,.;]+[-A-Za-z0-9+&@#/%=~_|]/,s=/^[0-9]{1,30}$/,p={nameStr:"节点名称",nameMore:"如何使用该节点？",nameExplain:"支持中英文、数字、特殊字符_-()，长度不超过30个字符",nameTest:i,isRequire:r,checkRules:a,name:function(){return[r("节点名称"),a(i,"支持中英文、数字、特殊字符_-()，长度不超过30个字符")]},paramExplain:"仅支持字母大小写、数字、下划线，必须以字母开头，长度不超过50个字符",param:function(e){return[r(e),a(u,"仅支持字母大小写、数字、下划线，必须以字母开头，长度不超过50个字符")]},actionExplain:"使用SDK调用时作为API的参数“action”进行调用。使用Web或移动工作台调用的时候无需在相关工作台输入该参数。请求path长度为2~50个字符，只支持字母数字下划线斜线，不能以斜线结尾",action:function(e){return[r(e),o(2,50),a(c,"只支持字母数字下划线斜线，不能以斜线结尾")]},urlExplain:"请输入URL地址，如：https://www.example.com",urlTest:l,url:[r("后端请求地址"),a(l,"请输入正确的URL格式")],isInt:function(e){return[r(e),a(s,"请输入非负整数")]},isIntNotRequire:function(){return[a(s,"请输入非负整数")]}};t.a=p},Nlzp:function(e,t,n){"use strict";var r=n("Bffz"),o=(n("pNMO"),n("4Brf"),n("ma9I"),n("TeQF"),n("yq1k"),n("yXV3"),n("zKZe"),n("5DmW"),n("27RR"),n("tkto"),n("07d7"),n("5s+n"),n("FZtP"),n("BkRI")),a=n.n(o),i=n("vDqi"),u=n.n(i),c=n("P2RN"),l=n("Qyje"),s=n.n(l),p=n("DgvE"),d=n("Q2AE"),f=n("vS40"),m=n("+VSf");function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(n,!0).forEach(function(t){v(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b=[],h=[],O=u.a.create({method:"get",timeout:3e4,headers:{"Content-Type":"application/x-www-form-urlencoded","X-Requested-With":"XMLHttpRequest"},transformRequest:function(e,t){return t["Content-Type"].indexOf("application/x-www-form-urlencoded")>-1?s.a.stringify(e):e}});function w(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};0===(b=b.filter(function(t){return t!==e.url})).length&&d.a.dispatch(Object(m.a)(!1))}function E(e){var t=e.type,n=void 0===t?"warn":t,r=e.message,o=void 0===r?"请求异常":r,a=e.description,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};h.includes(i.url)?h.filter(function(e){return e!==i.url}):Object(c.a)({type:n,message:o,description:a})}function j(e){var t=a()(e),n=t,r=n.method,o=void 0===r?"get":r,i=n.needVersion,u=n.needFormData,c=n.needJson,l=n.loading,s=n.noNotification,f=n.url,y=n.data;l&&(0===b.length&&d.a.dispatch(Object(m.a)(!0)),b.push(f)),s&&h.push(f),delete t.loading;var g="get"===o?"params":"data";if(i&&(t[g].version=i),delete t.needVersion,t.noInstance&&(delete t[g].superInstanceId,delete t.noInstance),"get"===o&&delete t.data,"post"===o&&u){var v=Object(p.m)(y);t=Object.assign(t,{data:v,headers:{"Content-Type":"multipart/form-data"}})}if(delete t.needFormData,"post"===o&&c){var w=JSON.stringify(y);t=Object.assign(t,{data:w,headers:{"Content-Type":"application/json"}})}return delete t.needJson,O(t)}function P(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return t.superInstanceId||(t.superInstanceId=localStorage.getItem("superInstanceId")),j(g({url:e,params:t},n,{},r))}function I(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return t.superInstanceId||(t.superInstanceId=localStorage.getItem("superInstanceId")),j(g({url:e,method:"post",data:t},n,{},r))}O.interceptors.request.use(function(e){return e},function(e){return Promise.reject(e)}),O.interceptors.response.use(function(e){var t=e.data,n=e.status,r=e.statusText,o=e.config;if(w(o),t){var a=t.code,i=t.msg;return void 0!==a&&0!==a?(100010110===a?d.a.dispatch(Object(f.a)(!0)):E({description:i},o),Promise.reject(t)):t}return E({type:"error"},o),Promise.reject({status:n,statusText:r})},function(e){var t=e.response,n=e.config,r=null;if(w(n),t&&t.data){var o=t.data,a=o.code,i=o.msg;a&&i&&(r="code : ".concat(a," ; msg : ").concat(i))}return E({type:"error",message:"请求失败",description:r||"请稍后重试！"},n),Promise.reject(e)}),n.d(t,"a",function(){return r.a}),n.d(t,"c",function(){return P}),n.d(t,"d",function(){return I}),n.d(t,"b",function(){return u.a})},Per8:function(e,t,n){"use strict";n.d(t,"f",function(){return i}),n.d(t,"d",function(){return u}),n.d(t,"c",function(){return c}),n.d(t,"b",function(){return l}),n.d(t,"a",function(){return s}),n.d(t,"e",function(){return p});n("07d7"),n("5s+n"),n("p532");var r=n("Nlzp"),o=n("JPcv"),a=n("Kwcz"),i=function(e){return function(t,n){Object(r.c)(r.a.getDownProduct,e,{loading:!0}).then(function(e){var n=function(e){return{type:a.g,list:Object(o.fromJS)(e)}}(e.data&&e.data.list||[]);t(n)})}},u=function(e){return function(t){t({type:a.b,statu:!1}),Object(r.c)(r.a.getDeviceStat,e).then(function(e){t({type:a.f,data:Object(o.fromJS)(e.data)})}).finally(function(){t({type:a.b,statu:!0})})}},c=function(e){return function(t){Object(r.c)(r.a.getDeviceList,e,{loading:!0}).then(function(e){t({type:a.e,data:Object(o.fromJS)(e.data)})})}},l=function(e){return function(t){Object(r.c)(r.a.getDeviceLabelList,e).then(function(e){t({type:a.c,data:Object(o.fromJS)(e.data)})})}},s=function(e){return function(t){Object(r.c)(r.a.getDeviceLabelList,e).then(function(e){t({type:a.a,data:Object(o.fromJS)(e.data)})})}},p=function(e){return function(t){Object(r.d)(r.a.getLabelBaseList,e).then(function(e){t({type:a.d,data:Object(o.fromJS)(e.data||[])})})}}},Q2AE:function(e,t,n){"use strict";var r=n("ANjH"),o=n("sINF"),a=n("0R0V"),i=n("4EZn"),u=n("JPcv"),c=n("Kwcz"),l=Object(u.fromJS)({productList:[],deviceStat:{},deviceList:{},deviceLabel:{list:[],pager:{}},deviceLabelBase:[],defaultLabel:[],freshStatu:!0}),s=(n("Per8"),n("3L+O")),p=Object(u.fromJS)({loginModalStatu:!1,developerInfo:{},muenList:[],instanceList:[]}),d=(n("vS40"),n("yrct")),f=n("+kVv"),m=n("rvMJ"),y=n("hGlg"),g=Object(u.fromJS)({newMessageNums:{}}),v=(n("d8kt"),n("pNMO"),n("4Brf"),n("0oug"),n("ma9I"),n("TeQF"),n("fbCW"),n("x0AG"),n("pjDv"),n("4mDm"),n("pDQq"),n("5DmW"),n("27RR"),n("tkto"),n("07d7"),n("JfAA"),n("PKPk"),n("FZtP"),n("3bBZ"),n("8/o9"),n("tsqr")),b=n("b9dg"),h=n("kEWA"),O=n("V0bm"),w=n("J76n"),E=n("gtRY"),j=n("Z5S8");function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function I(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(n,!0).forEach(function(t){T(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function D(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var L={show:!1,type:h.e.NULL,id:null,x:0,y:0},k={isLoading:!1,isError:!1,list:[]},_=function(e){var t={nodeList:e.nodeList,lineList:e.lineList,chooseId:e.chooseId},n=D(e.stackHistory);return n.push(JSON.stringify(t)),n},A=function(e,t,n,r){var o=_(e),a=O.a[t].canDrop(e,t,n,r);if(a)return v.a.error(a),e;var i=D(e.nodeList),u=C({},e.nodeMap),c=Object(O.d)(e,t,n,r);return i.push(c),u[c.id]=c,w.a.checkMin(i),C({},e,{mustSave:!0,nodeList:i,nodeMap:u,chooseId:c.id,showConfiguration:!0,stackHistory:o})},N=function(e,t,n,r,o){var a=e.stackHistory;o&&(a=_(e));var i=D(e.nodeList),u=C({},e.nodeMap),c=D(e.lineList),l=C({},e.lineMap);return u[t].x=n,u[t].y=r,w.a.checkMin(i),w.a.checkLine(u[t],u,c,l),C({},e,{nodeList:i,nodeMap:u,lineList:c,lineMap:l,stackHistory:a})},M=function(e,t,n,r){var o=_(e),a=D(e.lineList),i=C({},e.lineMap),u=t.x,c=t.y,l=Object(O.j)(e,u,c),s=Object(O.c)(e,l,n,r);return a.push(s),i[r]=s,C({},e,{lineList:a,lineMap:i,lineArrow:l,connectId:r,stackHistory:o})},x=function(e,t,n,r){var o=D(e.lineList),a=C({},e.lineMap),i=a[t].startPoint,u=Object(O.j)(e,n,r);return a[t].path=w.a.countPath(i,u),C({},e,{lineList:o,lineMap:a,lineArrow:u})},V=function(e,t){var n=function(e){var t=D(e.stackHistory);return t.pop(),t}(e),r=D(e.lineList),o=C({},e.lineMap);return r=r.filter(function(e){return e.outputId!==t}),o[t]=void 0,C({},e,{lineList:r,lineMap:o,lineArrow:null,connectId:null,stackHistory:n})},R=function(e,t,n,r,o){var a=D(e.lineList),i=C({},e.lineMap),u=D(e.nodeList),c=C({},e.nodeMap),l=i[t],s=l.id,p=l.startPoint;i[t].toId=n,i[t].entryId=r,i[t].path=w.a.countPath(p,Object(O.i)(c[n]));var d="forLoopEnd"===o&&c[n].pId,f=c[s].configuration.output.find(function(e){return e.id===t})||{};if(f.connectEntryId=r,d){var m=c[n].pIdpOutputIdSpare||[];c[n].pIdpOutputIdSpare=[].concat(D(m),[[s,t]])}else f.connectId=n,c[n].pId=s,c[n].pOutputId=t;var y=c[s],g=c[n];return j.c[y.nodeType].afterConnect(h.c.StartPoint,y.configuration,y,g,e),j.c[g.nodeType].afterConnect(h.c.EndPoint,g.configuration,y,g,e),C({},e,{mustSave:!0,nodeList:u,nodeMap:c,lineList:a,lineMap:i,lineArrow:null,connectId:null})},F=function(e,t){var n=C({},e,{chooseId:t});return null!==t&&e.nodeMap[t]&&(n.showConfiguration=!0),n},q=function(e,t,n,r,o){var a=C({},e,{chooseId:n,contextMenu:{show:!0,type:t,id:n,x:r,y:o}});return t===h.e.NODE&&(a.showConfiguration=!0),a},B=function(e){var t=_(e),n=D(e.lineList),r=C({},e.lineMap),o=D(e.nodeList),a=C({},e.nodeMap),i=e.chooseId,u=i;i=null;var c=n.find(function(e){return e.uniqueId===u})||{},l=c.id,s=void 0===l?"":l,p=c.outputId,d=void 0===p?"":p,f=c.toId,m=c.entryId,y=n.findIndex(function(e){return e.uniqueId===u});y>-1&&n.splice(y,1),r[d]=void 0;var g=a[s],v=f&&a[f]||void 0,b=g.configuration.output.find(function(e){return e.id===d}),h=v.pIdpOutputIdSpare||[];if(v&&h.length>0)if(b.connectId){var O=I(h.pop(),2),w=O[0],E=O[1];v.pId=w,v.pOutputId=E;var j=a[w].configuration.output.find(function(e){return e.id===E});j.connectId=f,j.connectEntryId=m}else{var P=h.findIndex(function(e){return e[0]==s});h.splice(P,1)}else v&&(v.pId=null,v.pOutputId=null);return b&&(b.connectId=void 0,b.connectEntryId=void 0),C({},e,{mustSave:!0,nodeList:o,nodeMap:a,lineList:n,lineMap:r,chooseId:i,stackHistory:t})},J=function(e,t,n,r,o){var a=n[e],i=a.pId,u=a.pOutputId,c=a.configuration.output,l=a.pIdpOutputIdSpare,s=t.findIndex(function(t){return t.id===e});s>-1&&t.splice(s,1),n[e]=void 0,[[i,u]].concat(D(l)).forEach(function(e){var t=I(e,2),a=t[0],i=t[1];if(a&&i){var u=n[a].configuration.output.find(function(e){return e.id===i});u&&(u.connectId=void 0,u.connectEntryId=void 0);var c=r.findIndex(function(e){return e.outputId===i});c>-1&&r.splice(c,1),o[i]=void 0}}),c.forEach(function(e){var t=e.id,a=e.connectId,i=e.connectEntryId;if(i&&((s=r.findIndex(function(e){return e.outputId===t}))>-1&&r.splice(s,1),o[t]=void 0,a)){var u=n[a];if(u.pId=null,u.pOutputId=null,u.pIdpOutputIdSpare.length>0){var c=I(u.pIdpOutputIdSpare.pop(),2),l=c[0],p=c[1];u.pId=l,u.pOutputId=p;var d=n[l].configuration.output.find(function(e){return e.id===p});d.connectId=a,d.connectEntryId=i}}})},U=function(e){var t=_(e),n=D(e.lineList),r=C({},e.lineMap),o=D(e.nodeList),a=C({},e.nodeMap),i=e.chooseId,u=i;return i=null,u&&J(u,o,a,n,r),C({},e,{mustSave:!0,nodeList:o,nodeMap:a,lineList:n,lineMap:r,chooseId:i,stackHistory:t})},H=function(e,t,n){var r=D(e.nodeList),o=C({},e.nodeMap),a=D(e.lineList),i=C({},e.lineMap);if(o[t]){var u=o[t].configuration.output,c=u.length;if(o[t].configuration=C({},o[t].configuration,{},n),o[t].isError){var l=!!j.c[o[t].nodeType].validate(o[t].configuration,o[t],e);l||(o[t].isError=l)}var s=o[t].configuration.output;if(c!==s.length){var p=o[t].pOutputId;p&&w.a.resetLine(i[p],o),u.forEach(function(e){var t=e.id,n=e.connectId,r=e.connectEntryId;if(-1===s.findIndex(function(e){return e.id===t})){if(n&&r){var u=a.findIndex(function(e){return e.outputId===t});u>-1&&a.splice(u,1),i[t]=void 0,o[n].pId=null,o[n].pOutputId=null}}else r&&w.a.resetLine(i[t],o)})}}return C({},e,{mustSave:!0,nodeList:r,nodeMap:o,lineList:a,lineMap:i})},G=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=D(e.nodeList),o=C({},e.nodeMap),a=P(t),i="string"===a||"number"===a?[t]:t;return i.forEach(function(e){o[e]&&(o[e].isError=n)}),C({},e,{nodeList:r,nodeMap:o})},Q=function(e){var t=D(e.stackHistory),n=t.pop();if(n){var r=JSON.parse(n),o=r.nodeList,a=r.lineList,i=r.chooseId,u={},c={};return o.forEach(function(e){return u[e.id]=e}),a.forEach(function(e){return c[e.outputId]=e}),w.a.checkMin(o),C({},e,{mustSave:!0,stackHistory:t,nodeList:o,nodeMap:u,lineList:a,lineMap:c,chooseId:i})}return C({},e,{stackHistory:t})},W=function(e){var t=_(e),n=D(e.nodeList),r=C({},e.nodeMap),o=D(e.lineList),a=C({},e.lineMap),i=e.chooseId,u={type:h.f.CUT,nodeData:Object(O.b)(r[i])};return J(i,n,r,o,a),C({},e,{mustSave:!0,nodeList:n,nodeMap:r,lineList:o,lineMap:a,stackHistory:t,copy:u})},Z=function(e){var t=e.chooseId,n=e.nodeMap,r={type:h.f.COPY,nodeData:Object(O.b)(n[t])};return C({},e,{copy:r})},z=function(e){var t=D(e.stackHistory),n=e.contextMenu,r=n.x,o=n.y,a=e.copy,i=a,u=i.type,c=i.nodeData;u===h.f.CUT&&(a=null);var l=Object(O.n)(c,r,o,e),s=D(e.nodeList),p=C({},e.nodeMap);return!1!==l&&(t=_(e),s.push(l),p[l.id]=l,w.a.checkMin(s)),C({},e,{mustSave:!0,nodeList:s,nodeMap:p,copy:a,stackHistory:t})},K=function(e){var t=e.nodeList,n=e.nodeMap,r=e.lineList,o=e.lineMap;if(0===t.length)return e;var a=_(e),i=Object(E.g)(t,n,r,o),u=i.nodeList,c=i.nodeMap,l=i.lineList,s=i.lineMap;return w.a.checkMin(u),C({},e,{nodeList:u,nodeMap:c,lineList:l,lineMap:s,stackHistory:a})},Y=function(e,t,n,r,o,a,i,u,c){var l={};try{l=Object(E.n)(a,JSON.parse(i)),w.a.checkMin(l.nodeList)}catch(e){setTimeout(function(){v.a.error("节点编排数据解析失败")},200)}return C({},e,{action:t||"",authCheck:n||0,flowId:r,productionName:o,testEnv:u,proEnv:c},l)},X=function(e,t,n,r){var o={isSaving:!1,root:t,action:n,authCheck:r};return o.testEnv=h.p.Compiled,C({},e,{mustSave:!1},o)},$=function(e){var t={isSaving:!1};return t.testEnv=h.p.Running,C({},e,{mustSave:!1},t)},ee=function(e,t){return C({},e,{testEnv:h.p.Debugging,showLog:!0,showLogHeight:e.showLogHeight||O.f},Object(E.o)(t))},te={readonly:!1,action:"",authCheck:0,projectId:null,serviceId:null,flowId:null,productionName:null,mustSave:!0,testEnv:h.p.Developing,proEnv:h.p.Developing,isSaving:!1,isInDeploy:!1,isInDebug:!1,isInPublish:!1,isopenPublish:!1,showChooser:!0,showConfiguration:!0,showConfigurationWithFullScreen:!1,showLog:!1,showLogHeight:0,showDebugInput:!1,searchText:"",root:null,nodeList:[],nodeMap:{},debuggedData:null,debuggedResult:null,debuggedOutput:null,debuggedMap:{},lineList:[],lineMap:{},connectId:null,lineArrow:null,contextMenu:L,chooseId:null,chooseLineId:null,copy:null,stackHistory:[],isLoading:!1,product:C({},k),api:C({},k),platformapi:C({},k),mqTopic:C({},k),rocketMQTopic:C({},k),database:C({},k),redis:C({},k)},ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.isLoading,o=t.action,a=t.authCheck,i=t.projectId,u=t.serviceId,c=t.flowId,l=t.readonly,s=t.productionName,p=t.nodeList,d=t.lineList,f=t.testEnv,m=t.proEnv,y=t.searchText,g=t.nodeId,v=t.nodeType,h=t.x,E=t.y,j=t.isMoveStart,P=t.startPoint,I=t.startNodeId,S=t.startOutputId,D=t.currentOutputId,k=t.toId,_=t.entryId,J=t.showType,ne=t.id,re=t.config,oe=t.isError,ae=t.listKey,ie=t.list,ue=t.root,ce=t.data,le=t.logHeight,se=t.isopenPublish;switch(n){case b.x:return C({},te,{projectId:i,serviceId:u,readonly:l});case b.C:return C({},e,{isLoading:r});case b.M:return X(C({},e),ue,o,a);case b.s:return $(C({},e));case b.n:return ee(C({},e),ce);case b.K:return Y(C({},e),o,a,c,s,p,d,f,m);case b.B:return C({},e,T({},ae,{isLoading:!0,isError:!1,list:[]}));case b.A:return C({},e,T({},ae,{isLoading:!1,isError:!1,list:ie}));case b.z:return C({},e,T({},ae,{isLoading:!1,isError:!0,list:[]}));case b.e:return C({},e,{searchText:y});case b.a:return F(C({},e),ne);case b.b:return C({},e,{chooseLineId:ne});case b.t:return A(C({},e),v,h,E);case b.E:return N(C({},e),g,h,E,j);case b.j:return M(C({},e),P,I,S);case b.y:return x(C({},e),D,h,E);case b.g:return V(C({},e),D);case b.h:return R(C({},e),D,k,_,v);case b.O:return q(C({},e),J,ne,h,E);case b.v:return C({},e,{contextMenu:C({},L)});case b.o:return B(C({},e));case b.p:return U(C({},e));case b.d:return H(C({},e),g,re);case b.F:return G(C({},e),g,oe);case b.T:return Q(C({},e));case b.k:return W(C({},e));case b.i:return Z(C({},e));case b.H:return z(C({},e));case b.f:return K(C({},e));case b.N:return C({},e,{isSaving:!0});case b.L:return C({},e,{isSaving:!1});case b.r:return C({},e,{isInDeploy:!0});case b.q:return C({},e,{isInDeploy:!1});case b.m:return C({},e,{isInDebug:!0});case b.l:return C({},e,{isInDebug:!1});case b.J:return C({},e,{isInPublish:!0});case b.I:return C({},e,{isInPublish:!1});case b.G:return C({},e,{isopenPublish:se});case b.P:return C({},e,{showDebugInput:!0});case b.w:return C({},e,{showDebugInput:!1});case b.Q:return C({},e,{showChooser:!e.showChooser});case b.R:return C({},e,{showConfiguration:!e.showConfiguration});case b.S:return C({},e,{showLog:!e.showLog,showLogHeight:e.showLog?0:O.f});case b.u:return C({},e,{showConfigurationWithFullScreen:!e.showConfigurationWithFullScreen});case b.c:return C({},e,{showLog:le>0,showLogHeight:le});case b.D:return C({},e,{showLogHeight:e.showLogHeight===w.a.logMaxHeight?O.f:w.a.logMaxHeight});default:return e}},re=n("r+Wk");function oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oe(n,!0).forEach(function(t){ie(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oe(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function ie(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ue={productList:[],versionList:{list:[],pager:{}},extVerisonLi:[],deviceGorupLi:[],firmwareDetails:{}},ce=re.d,le=re.e,se=re.b,pe=re.a,de=re.c,fe=(n("+vmU"),Object(a.combineReducers)({product:i.b,deviceDebug:i.c,device:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case c.g:return e.set("productList",t.list);case c.f:return e.set("deviceStat",t.data);case c.e:return e.set("deviceList",t.data);case c.c:return e.set("deviceLabel",t.data);case c.d:return e.set("deviceLabelBase",t.data);case c.a:return e.set("defaultLabel",t.data);case c.b:return e.set("freshStatu",t.statu);default:return e}},userCenter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case s.b:return e.set("loginModalStatu",t.statu||!1);case s.c:return e.set("developerInfo",t.info||!1);case s.a:return e.set("muenList",t.data||[]);case s.d:return e.set("instanceList",t.data||[]);default:return e}},deviceDataApi:d.b,customMethod:f.b,otaUpgrade:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.productList,o=t.versionList,a=t.extVerisonLi,i=t.deviceGorupLi,u=t.firmwareDetails;switch(n){case ce:return ae({},e,{productList:r});case le:return ae({},e,{versionList:o});case se:return ae({},e,{extVerisonLi:a});case pe:return ae({},e,{deviceGorupLi:i});case de:return ae({},e,{firmwareDetails:u});default:return e}},loadingShow:m.a,message:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y.a:return e.set("newMessageNums",t.data||{});default:return e}},drawView:ne})),me=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||r.c,ye=Object(r.d)(fe,me(Object(r.a)(o.a)));t.a=ye},QtFR:function(e,t,n){},V0bm:function(e,t,n){"use strict";n.d(t,"o",function(){return d}),n.d(t,"m",function(){return f}),n.d(t,"l",function(){return m}),n.d(t,"g",function(){return y}),n.d(t,"f",function(){return g}),n.d(t,"k",function(){return v}),n.d(t,"a",function(){return b}),n.d(t,"h",function(){return h}),n.d(t,"i",function(){return O}),n.d(t,"j",function(){return w}),n.d(t,"e",function(){return E}),n.d(t,"d",function(){return j}),n.d(t,"b",function(){return P}),n.d(t,"n",function(){return I}),n.d(t,"c",function(){return S});n("pNMO"),n("4Brf"),n("0oug"),n("yyme"),n("TeQF"),n("4mDm"),n("2B1R"),n("sMBO"),n("5DmW"),n("27RR"),n("tkto"),n("07d7"),n("PKPk"),n("FZtP"),n("3bBZ"),n("8/o9");var r=n("tsqr"),o=n("a+Kn"),a=n("J76n"),i=n("gtRY"),u=n("Z5S8");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(n,!0).forEach(function(t){s(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var d=52,f=136,m=144,y=30,g=196,v=u.a,b=u.c,h=u.b,O=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.x,r=e.y,o=Object(i.u)(e);return{x:n-(t?0:11),y:r+o/2}},w=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=e.showChooser,i=(a.a.wrap?a.a.wrap.scrollLeft:0)+(o?t-220:t),u=(a.a.wrap?a.a.wrap.scrollTop:0)+n-d;return r&&(i=i<0?0:i,u=u<0?0:u),{x:i,y:u}},E=function(){return{id:o.a.getUnique()}},j=function(e,t,n,r){var a=b[t],i=a.name,u=a.entryNum,c=p(a.output,1)[0],s=a.initData,d=w(e,n,r,!0);return l({id:o.a.getUnique(),nodeType:t},d,{entryId:u>0?o.a.getUnique():null,pId:null,pOutputId:null,isError:!1,pIdpOutputIdSpare:[],configuration:l({name:i,output:Array(c).fill(null).map(function(){return E()})},s())})},P=function(e){var t=e.nodeType,n=e.entryId,r=e.isError,a=e.configuration;return(a=o.a.getCopyByPure(a)).output=a.output.map(function(e){return l({},e,{id:"",connectId:void 0,connectEntryId:void 0})}),{id:"",nodeType:t,x:0,y:0,entryId:n?"":null,pId:null,pOutputId:null,isError:r,configuration:a}},I=function(e,t,n,a){var i=e.nodeType,u=e.entryId,c=e.isError,s=e.configuration,p=w(a,t,n,!0),d=p.x,f=p.y,m=b[i].canDrop(a,i,d,f);return m?(r.a.error(m),!1):((s=o.a.getCopyByPure(s)).output=s.output.map(function(e){return l({},e,{id:o.a.getUnique(),connectId:void 0,connectEntryId:void 0})}),{id:o.a.getUnique(),nodeType:i,x:d,y:f,entryId:""===u?o.a.getUnique():null,pId:null,pOutputId:null,isError:c,configuration:s})},S=function(e,t,n,r){return{uniqueId:o.a.getUnique(),id:n,outputId:r,startPoint:t,path:a.a.countPath(t),toId:null,entryId:null}}},XZxo:function(e,t,n){var r={"./zh-cn":"XDpg","./zh-cn.js":"XDpg"};function o(e){var t=a(e);return n(t)}function a(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=a,e.exports=o,o.id="XZxo"},Z5S8:function(e,t,n){"use strict";n("pNMO"),n("TeQF"),n("2B1R"),n("sMBO"),n("5DmW"),n("27RR"),n("tkto"),n("FZtP");var r=n("ZShN"),o=(n("4Brf"),n("0oug"),n("ma9I"),n("4mDm"),n("zKZe"),n("NBAS"),n("ExoC"),n("07d7"),n("PKPk"),n("3bBZ"),n("qNb/"),n("PArb")),a=(n("K4yd"),n("9yH6")),i=(n("tULf"),n("Vl3Y")),u=(n("8QGh"),n("2fM7")),c=n("q1tI"),l=n.n(c),s=n("CpnY"),p=n("kEWA"),d=n("LgsE"),f=n("be64");function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return!t||"object"!==m(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var E=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,c=new Array(r),s=0;s<r;s++)c[s]=arguments[s];return(n=h(this,(e=O(t)).call.apply(e,[this].concat(c)))).onChange=function(e){var t=n.props,r=t.nodeItem.id;(0,t.changeNodeConfiguration)(r,e)},n.tab=function(e){n.props.nodeItem.isError&&setTimeout(function(){e.validateFields()},200)},n.getProtocolComponent=function(e){var t=n.props,r=t.readonly,o=t.nodeItem.configuration,a=o.productId,c=o.protocolType,s=t.product,p=s.isLoading,m=s.isError,y=s.list,g=e.getFieldDecorator,v=m||0===y.length;return l.a.createElement(l.a.Fragment,null,l.a.createElement(i.a.Item,{label:"选择产品"},g("productId",{initialValue:a,rules:[d.a.isRequire("产品")]})(l.a.createElement(u.a,{showSearch:!0,placeholder:v?"暂无可用产品":"请选择产品",notFoundContent:"未找到相应记录",optionFilterProp:"children",loading:p,disabled:v||r},y.map(function(e){var t=e.id,n=e.value;return l.a.createElement(u.a.Option,{value:t,key:t},n)})))),l.a.createElement(i.a.Item,{label:"选择Topic",required:!0},g("protocolType",{initialValue:c,rules:[d.a.isRequire("Topic")]})(l.a.createElement(u.a,{showSearch:!0,placeholder:"请选择Topic",notFoundContent:"未找到相应记录",optionFilterProp:"children",disabled:r},f.m.map(function(e){var t=e.id,n=e.value;return l.a.createElement(u.a.Option,{value:t,key:t},n)})))))},n.getUserDefined=function(e){var t=n.props,r=t.readonly,o=t.mqTopic,a=o.isError,c=o.isLoading,s=o.list,p=t.nodeItem.configuration,f=a||0===s.length,m=p.queueId,y=e.getFieldDecorator;return l.a.createElement(l.a.Fragment,null,l.a.createElement(i.a.Item,{label:"监听Topic"},y("queueId",{initialValue:m,rules:[d.a.isRequire("自定义队列")]})(l.a.createElement(u.a,{showSearch:!0,placeholder:f?"暂无可用队列":"请选择自定义队列",notFoundContent:"未找到相应记录",optionFilterProp:"children",loading:c,disabled:f||r},s.map(function(e){var t=e.id,n=e.value;return l.a.createElement(u.a.Option,{value:t,key:t},n)})))),l.a.createElement("a",{className:"goto-dataasset",href:"#/userCenter/dataasset",target:"_blank"},"数据资产知识库管理"))},n.getChildren=function(e){var t=n.props,r=t.readonly,u=t.nodeItem.configuration.type,c=e.getFieldDecorator,s=u===p.n.ProductProtocol?n.getProtocolComponent(e):n.getUserDefined(e);return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"draw-group"},l.a.createElement("div",{className:"draw-group-inner"},"Topic配置")),l.a.createElement(i.a.Item,{label:"订阅Topic类型",required:!0},c("type",{initialValue:u})(l.a.createElement(a.a.Group,{disabled:r,onChange:function(){return n.tab(e)}},f.B.map(function(e){var t=e.id,n=e.value;return l.a.createElement(a.a,{value:t,key:t},n)})))),l.a.createElement(o.a,null),s)},n}var n,r,m;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(t,c["Component"]),n=t,(r=[{key:"render",value:function(){var e=this.props.nodeItem.id,t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(n,!0).forEach(function(t){v(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},this.props,{log:void 0,render:this.getChildren});return l.a.createElement(s.a,y({},t,{key:e}))}}])&&b(n.prototype,r),m&&b(n,m),t}(),j=n("2jDL"),P={id:"mqttEvent",name:"MQTT事件",nodeType:102,iconCls:"mqttEvent",description:"侦听MQTT Topic上报的设备消息并触发服务，无需定义物模型",apiDocumentLink:"",canDrop:j.a,entryNum:0,output:[1,1,1],configuration:E,initData:function(){return{type:p.n.ProductProtocol,productId:void 0,protocolType:void 0,queueId:void 0,params:[],showParamModal:!1,showParamId:void 0}},validate:function(e,t,n){var r=e.type,o=e.productId,a=e.protocolType,i=e.queueId;if(r===p.n.ProductProtocol){if(void 0===o)return"产品不能为空";if(void 0===a)return"Topic不能为空"}else if(void 0===i)return"监听Topic的选择队列不能为空";return!1},toData:function(e,t,n){var r=e.type,o=e.productId,a=e.protocolType,i=e.queueId;return{dsType:r,productId:void 0===o?null:o,eventType:void 0===a?null:a,dsId:void 0===i?null:i}},toConfiguration:function(e){var t=e.dsType,n=e.productId,r=e.eventType,o=e.dsId;return{type:t,productId:null===n?void 0:n,protocolType:null===r?void 0:r,queueId:null===o?void 0:o}}},I=(n("yXV3"),n("fbCW"),n("x0AG"),n("pjDv"),n("pDQq"),n("JfAA"),n("1vPl"),n("5rEg")),S=(n("L/Qf"),n("2/Rp")),C=(n("2oDE"),n("CtXQ")),T=(n("k994"),n("NJEC")),D=(n("+2oP"),n("rNhl"),n("UxlC"),n("k3Gp"),n("kLXV")),L=(n("U8R4"),n("+eQT")),k=(n("8/o9"),n("tsqr")),_=n("wd/R"),A=n.n(_);function N(e){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(n,!0).forEach(function(t){V(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function V(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function R(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function F(e,t){return!t||"object"!==N(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function q(e){return(q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function B(e,t){return(B=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var J="选择用于比较的数据源",U={width:"100%"},H=f.f[0].id,G=f.c[0].id,Q=f.z[0].id,W={source:p.g.Value,sourceType:H,sourceValue:"",operate:void 0,target:p.g.Value,targetType:H,targetValue:""},Z=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=F(this,(e=q(t)).call.apply(e,[this].concat(o)))).state=x({},W),n.isInit=!1,n.changeFirst=function(e,t){var r=t===p.g.Value?H:Q;e===p.i.Source?n.setState({source:t,sourceType:r,sourceValue:""}):n.setState({target:t,targetType:r,targetValue:""})},n.changeSecond=function(e,t){var r=t===p.q.Boolean?G:"";e===p.i.Source?n.setState({sourceType:t,sourceValue:r}):n.setState({targetType:t,targetValue:r})},n.changeThird=function(e,t){e===p.i.Source?n.setState({sourceValue:t}):n.setState({targetValue:t})},n.changeOperate=function(e){n.setState({operate:e})},n.onClose=function(){n.props.hide()},n.check=function(){var e=n.props,t=e.needSource,r=void 0===t||t,o=e.needOperate,a=void 0===o||o,i=n.state,u=i.source,c=i.sourceType,l=i.sourceValue,s=i.operate,d=i.target,m=i.targetType,y=i.targetValue;if(r&&u===p.g.Value){if(c===p.q.Number&&isNaN(parseFloat(l)))return k.a.error("请输入正确的数值"),!1;if(""===l)return k.a.error(c===p.q.String?"请输入字符串":"请选择时间"),!1}if(a&&void 0===s)return k.a.error("请选择比较方式"),!1;if(a&&f.i.indexOf(s)>-1)return!0;if(d===p.g.Value){if(m===p.q.Number&&isNaN(parseFloat(y)))return k.a.error("请输入正确的数值"),!1;if(""===y)return k.a.error(m===p.q.String?"请输入字符串":"请选择时间"),!1}return!0},n.submit=function(){if(n.check()){var e=n.props,t=e.submit,r=e.hide,o=x({},n.state);(o.source===p.g.Value&&o.sourceType)===p.q.Number&&(o.sourceValue=parseFloat(o.sourceValue)+""),(o.target===p.g.Value&&o.targetType)===p.q.Number&&(o.targetValue=parseFloat(o.targetValue)+""),t(o),r()}},n.getSource=function(e,t,r,o){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],c=n.props,s=c.parents,d=c.onlyNumber,m=void 0!==d&&d,y=c.label,g=t===p.g.Value,v=t===p.g.Node,b=g&&!m?f.f:g&&m?f.f.slice(0,1):s,h=y||(a?"选择数据源":J),O=function(t){return n.changeThird(e,t.target.value.replace(/[^\d.]/g,""))},w=function(t){return n.changeThird(e,t.target.value)},E=function(t){return n.changeThird(e,t)},j=function(t){return n.changeThird(e,t)},P=null;if(g)P=r===p.q.Number||r===p.q.String?l.a.createElement(I.a,{placeholder:"请输入一个"+(r===p.q.Number?"数值":"字符串"),onChange:r===p.q.Number?O:w,value:o}):r===p.q.Boolean?l.a.createElement(u.a,{placeholder:"请选择",value:o,onChange:E},f.c.map(function(e){var t=e.id,n=e.value;return l.a.createElement(u.a.Option,{value:t,key:t},n)})):l.a.createElement(L.a,{placeholder:"请选择日期和时间",format:"YYYY-MM-DD HH:mm:ss",style:U,showToday:!1,showTime:{defaultValue:A()("00:00:00","HH:mm:ss")},onChange:j});else if(v){var S=s.find(function(e){return e.id===r})||{},C=S.type,T=S.list;P=C===p.l.LIST?l.a.createElement(u.a,{placeholder:"请选择",value:o,onChange:E},(T||[]).map(function(e){var t=e.id,n=e.value;return l.a.createElement(u.a.Option,{value:t,key:t},n)})):l.a.createElement(I.a,{placeholder:"不填写变量名则默认为整个返回值",onChange:w,value:o})}return l.a.createElement(i.a.Item,{label:h,required:!0},l.a.createElement("div",{className:"draw-menu-group"},f.E.map(function(r){var o=r.id,a=r.value,i=r.disabled,u=t===o,c=u||i?void 0:function(){return n.changeFirst(e,o)};return l.a.createElement("div",{className:"draw-menu"+(u?" draw-menu-selected":"")+(i?" draw-menu-disabled":""),onClick:c,key:o},a)})),l.a.createElement("div",{className:"draw-line"},l.a.createElement(u.a,{placeholder:"请选择",value:r,disabled:g&&m,onChange:function(t){return n.changeSecond(e,t)}},b.map(function(e){var t=e.id,n=e.value;return l.a.createElement(u.a.Option,{value:t,key:t},n)}))),l.a.createElement("div",{className:"draw-line"},P))},n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&B(e,t)}(t,c["Component"]),n=t,(r=[{key:"componentDidUpdate",value:function(){var e=this.props,t=this.isInit,n=e.isShow,r=e.id,o=e.list;if(!t&&n)if(this.isInit=!0,void 0===r)this.setState(x({},W));else{var a=o.find(function(e){return e.id===r})||{},i=a.source,u=void 0===i?p.g.Value:i,c=a.sourceType,l=void 0===c?H:c,s=a.sourceValue,d=void 0===s?"":s,f=a.operate,m=a.target,y=void 0===m?p.g.Value:m,g=a.targetType,v=void 0===g?H:g,b=a.targetValue,h=void 0===b?"":b;this.setState({source:u,sourceType:l,sourceValue:d,operate:f,target:y,targetType:v,targetValue:h})}else t&&!n&&(this.isInit=!1)}},{key:"render",value:function(){var e=this.props,t=e.isShow,n=e.title,r=e.needSource,o=void 0===r||r,a=e.needOperate,c=void 0===a||a,d=this.state,m=d.source,y=d.sourceType,g=d.sourceValue,v=d.operate,b=d.target,h=d.targetType,O=d.targetValue,w=o?this.getSource(p.i.Source,m,y,g):null,E=-1===f.i.indexOf(v)?this.getSource(p.i.Target,b,h,O,!c):null,j=c?l.a.createElement(i.a.Item,{label:"选择比较方式",required:!0},l.a.createElement(u.a,{placeholder:"请选择比较方式",value:v,onChange:this.changeOperate},f.g.map(function(e){var t=e.id,n=e.value;return l.a.createElement(u.a.Option,{value:t,key:t},n)}))):null;return l.a.createElement(D.a,{title:n,width:360,maskClosable:!1,wrapClassName:"draw-small-form",visible:t,destroyOnClose:!0,onOk:this.submit,onCancel:this.onClose},l.a.createElement(i.a,s.b,w,w?l.a.createElement("div",{className:"draw-line"}):null,j,E?l.a.createElement("div",{className:"draw-line"}):null,E))}}])&&R(n.prototype,r),o&&R(n,o),t}(),z=i.a.create({name:"ValueMatchModal"})(Z);function K(e){return(K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Y(){return(Y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function X(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function $(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?X(n,!0).forEach(function(t){ee(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function ee(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function te(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function ne(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function re(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function oe(e,t){return!t||"object"!==K(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ae(e){return(ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ie(e,t){return(ie=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ue=10,ce=f.s[0].id,le=1,se={id:"conditionalJudgment",name:"条件判断",nodeType:201,iconCls:"conditionalJudgment",description:"满足指定条件则输出True，否则输出False",apiDocumentLink:"",entryNum:1,output:[2,2,2],configuration:function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=oe(this,(e=ae(t)).call.apply(e,[this].concat(o)))).onChange=function(e){var t=n.props,r=t.nodeItem.id;(0,t.changeNodeConfiguration)(r,e)},n.changeLogic=function(e,t){var r=n.props.nodeItem.configuration.list,o={list:ne(r)},a=r.findIndex(function(t){return t.id===e});a>-1&&(o.list[a].logic=t),n.onChange(o)},n.reverse=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=n.props.nodeItem.configuration.list,o={list:ne(r)},a=r.findIndex(function(t){return t.id===e});if(a>-1){var i,u=t?a-1:a,c=o.list.splice(u,2);if(2===c.length){var l=te(c,2),s=l[0].logic,p=l[1].logic;c[0].logic=p,c[1].logic=s}(i=o.list).splice.apply(i,[u,0].concat(ne(c.reverse())))}n.onChange(o)},n.down=function(e){n.reverse(e)},n.up=function(e){n.reverse(e,!0)},n.delAll=function(e){n.props.nodeItem.configuration.list.length>0&&(n.onChange({list:[]}),e.setFieldsValue({__listLen__:0}),e.validateFields(["__listLen__"]))},n.del=function(e,t){var r=n.props.nodeItem.configuration.list,o={list:ne(r)},a=r.findIndex(function(t){return t.id===e});a>-1&&o.list.splice(a,1),t.setFieldsValue({__listLen__:o.list.length}),t.validateFields(["__listLen__"]),n.onChange(o)},n.hideListModal=function(){n.onChange({showListModal:!1,showListId:void 0})},n.addListItem=function(){n.onChange({showListModal:!0,showListId:void 0})},n.editListItem=function(e){n.onChange({showListModal:!0,showListId:e})},n.saveListItem=function(e,t){var r=n.props.nodeItem.configuration,o=r.list,a=r.showListId,i={showListId:void 0,showListModal:!1};if(a){var u=o.find(function(e){return e.id===a});u&&Object.assign(u,e)}else o.push($({id:le++,logic:ce},e)),t.setFieldsValue({__listLen__:o.length});n.onChange($({},i,{list:ne(o)}))},n.getDel=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return r?t:l.a.createElement(T.a,{title:e,overlayClassName:"draw-confirm",okText:"删除",okType:"danger",getPopupContainer:function(){return document.body},cancelText:"取消",placement:"topRight",onConfirm:n},t)},n.getChildren=function(e){var t=n.props,r=t.readonly,o=t.parents,a=t.nodeItem.configuration,c=a.list,p=a.showListModal,d=a.showListId,m=c.length>=ue,y=m?"最多添加"+ue+"条件组":"条件",g=0===c.length,v="draw-del"+(g?" disabled":"");return l.a.createElement(l.a.Fragment,null,l.a.createElement(i.a.Item,{label:Object(s.c)("条件配置","可以设置多个子条件，按顺序进行判断并产生最终的布尔值"),required:!0},r?null:l.a.createElement("div",{className:v},n.getDel("您确定要删除所有条件配置吗？",l.a.createElement(C.a,{type:"delete",theme:"filled"}),function(){return n.delAll(e)},g)),l.a.createElement("div",{className:"draw-topic"},c.map(function(t,a){var i=t.id,s=t.operate,p=t.source,d=t.sourceType,m=t.sourceValue,y=t.target,g=t.targetType,v=t.targetValue,b=t.logic,h=f.i.indexOf(s)>-1,O=c.length-1===a,w=Object(f.q)(p,d,m,o)+" ",E=h?"":Object(f.q)(y,g,v,o),j="条件"+(a+1)+"："+w+(h?f.h[s].value2:f.h[s].value)+" "+E,P=O?null:l.a.createElement("div",{className:"draw-logic"},l.a.createElement("div",{className:"draw-logic-inner"},l.a.createElement("div",{className:"draw-logic-content"},l.a.createElement(u.a,{placeholder:"请选择",value:b,onChange:function(e){return n.changeLogic(i,e)},disabled:r},f.s.map(function(e){var t=e.id,n=e.value;return l.a.createElement(u.a.Option,{value:t,key:t},n)})))));return l.a.createElement(l.a.Fragment,{key:i},l.a.createElement("div",{className:"draw-topic-item"},l.a.createElement("span",{title:j},j),r?null:l.a.createElement("div",{className:"draw-topic-right"},0===a?null:l.a.createElement(C.a,{type:"up",onClick:function(){return n.up(i)}}),O?null:l.a.createElement(C.a,{type:"down",onClick:function(){return n.down(i)}}),l.a.createElement(C.a,{type:"edit",onClick:function(){return n.editListItem(i)}}),n.getDel("确定删除该路径吗？",l.a.createElement(C.a,{type:"close"}),function(){return n.del(i,e)}))),P)})),r?null:l.a.createElement(S.a,{block:!0,icon:"plus",onClick:n.addListItem,disabled:m},y),e.getFieldDecorator("__listLen__",{initialValue:c.length,rules:[{pattern:/^[1-9]\d*$/,message:"条件配置不能为空"}]})(l.a.createElement(I.a,{type:"hidden"}))),l.a.createElement(z,{title:"配置条件",needSource:!0,needOperate:!0,isShow:p,parents:o,id:d,list:c,hide:n.hideListModal,submit:function(t){return n.saveListItem(t,e)}}))},n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ie(e,t)}(t,c["Component"]),n=t,(r=[{key:"render",value:function(){var e=this.props.nodeItem.id,t=$({},this.props,{log:void 0,render:this.getChildren});return l.a.createElement(s.a,Y({},t,{key:e}))}}])&&re(n.prototype,r),o&&re(n,o),t}(),outputType:p.l.LIST,outputValue:function(e,t){return[{id:"",value:"判断节点-判断结果"}]},initData:function(){return{list:[],showListModal:!1,showListId:void 0}},validate:function(e,t,n){return 0===e.list.length&&"条件配置不能为空"},toData:function(e,t,n,r){var o=e.list,a=t.pId;return{conditions:o.map(function(e){var t=e.source,n=e.sourceType,o=e.sourceValue,i=e.operate,u=e.target,c=e.targetType,l=e.targetValue,s=e.logic,d=Object(f.o)(t,n,o,r,a),m=d.target,y=d.targetType,g=d.targetValue,v=f.i.indexOf(i)>-1,b=Object(f.o)(u,c,l,r,a),h=b.target,O=b.targetType,w=b.targetValue;return{source:m,sourceType:y,sourceValue:g,operate:i,target:v?p.g.Value:h,targetType:v?p.q.Number:O,targetValue:v?"":w,logicOperate:s}})}},toConfiguration:function(e){var t=e.conditions,n=-99;return{list:t.map(function(e){var t=e.source,r=e.sourceType,o=e.sourceValue,a=e.operate,i=e.target,u=e.targetType,c=e.targetValue,l=e.logicOperate,s=Object(f.p)(t,r,o),p=s.target,d=s.targetType,m=s.targetValue,y=Object(f.p)(i,u,c),g=y.target,v=y.targetType,b=y.targetValue;return{id:--n,source:p,sourceType:d,sourceValue:m,operate:a,target:g,targetType:v,targetValue:b,logic:l}})}}},pe=n("V0bm");function de(e){return(de="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fe(){return(fe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function me(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function ye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ge(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ye(n,!0).forEach(function(t){ve(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ye(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function ve(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function be(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function he(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Oe(e,t){return!t||"object"!==de(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function we(e){return(we=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ee(e,t){return(Ee=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var je=1;function Pe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Ie={id:"optionJudgment",name:"路径选择",nodeType:202,iconCls:"optionJudgment",description:"根据输入的数据进行if-else判断以分配后续路径",apiDocumentLink:"",entryNum:1,output:[2,0,10],configuration:function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=Oe(this,(e=we(t)).call.apply(e,[this].concat(o)))).onChange=function(e){var t=n.props,r=t.nodeItem.id;(0,t.changeNodeConfiguration)(r,e)},n.reverse=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=n.props.nodeItem.configuration.paths,o={paths:be(r)},a=r.findIndex(function(t){return t.id===e});if(a>-1){var i,u=t?a-1:a,c=o.paths.splice(u,2);(i=o.paths).splice.apply(i,[u,0].concat(be(c.reverse())))}n.onChange(o)},n.downPath=function(e){n.reverse(e)},n.upPath=function(e){n.reverse(e,!0)},n.delAllPath=function(e){n.props.nodeItem.configuration.paths.length>0&&(n.onChange({output:[],paths:[]}),e.setFieldsValue({__pathLen__:0}),e.validateFields(["__pathLen__"]))},n.delPath=function(e,t){var r=n.props.nodeItem.configuration,o=r.output,a=r.paths,i={output:be(o),paths:be(a)},u=a.findIndex(function(t){return t.id===e});u>-1&&(i.output.splice(u,1),i.paths.splice(u,1),t.setFieldsValue({__pathLen__:i.paths.length}),t.validateFields(["__pathLen__"])),n.onChange(i)},n.hidePathModal=function(){n.onChange({showPathModal:!1,showPathId:void 0})},n.addInput=function(){n.onChange({showPathModal:!0,showPathId:f.r})},n.addPath=function(){n.onChange({showPathModal:!0,showPathId:void 0})},n.editPath=function(e){n.onChange({showPathModal:!0,showPathId:e})},n.savePath=function(e,t){var r=n.props.nodeItem.configuration,o=r.output,a=r.paths,i=r.showPathId,u={showPathId:void 0,showPathModal:!1};if(i){var c=a.find(function(e){return e.id===i});if(c)Object.assign(c,e);else if(i===f.r){var l={id:f.r};Object.assign(l,e),u.input=[l],t.setFieldsValue({__inputLen__:1})}}else a.push(ge({id:je++},e)),u.output=be(o),u.output.push(Object(pe.e)()),t.setFieldsValue({__pathLen__:a.length});n.onChange(ge({},u,{paths:be(a)}))},n.getDel=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return r?t:l.a.createElement(T.a,{title:e,overlayClassName:"draw-confirm",okText:"删除",okType:"danger",getPopupContainer:function(){return document.body},cancelText:"取消",placement:"topRight",onConfirm:n},t)},n.getChildren=function(e){var t=n.props,r=t.readonly,o=t.parents,a=t.nodeItem,u=a.nodeType,c=a.configuration,p=me(pe.a[u].output,3)[2],d=c.input,m=c.paths,y=c.showPathModal,g=c.showPathId,v=f.r===g,b=v?"配置输入":"配置路径",h=m.length>=p,O=h?"最多添加"+p+"条路径":"路径",w=d.length>0?l.a.createElement("div",{className:"draw-topic"},d.map(function(e){var t=e.id,a=e.target,i=e.targetType,u=e.targetValue;return l.a.createElement("div",{className:"draw-topic-item",key:t},l.a.createElement("span",null,Object(f.q)(a,i,u,o)),r?null:l.a.createElement("div",{className:"draw-topic-right"},l.a.createElement(C.a,{type:"edit",onClick:function(){return n.editPath(t)}})))})):l.a.createElement(S.a,{block:!0,icon:"plus",onClick:n.addInput,disabled:r},"输入"),E=0===m.length,j="draw-del"+(E?" disabled":""),P=l.a.createElement(i.a.Item,{label:Object(s.c)("路径配置","路径选择的输入变量，用于对比所有路径的条件，可以是一个固定值或者来自其他节点的动态值。"),required:!0},r?null:l.a.createElement("div",{className:j},n.getDel("您确定要删除所有路径吗？",l.a.createElement(C.a,{type:"delete",theme:"filled"}),function(){return n.delAllPath(e)},E)),l.a.createElement("div",{className:"draw-topic"},m.map(function(t,a){var i=t.id,u=t.operate,c=t.target,s=t.targetType,p=t.targetValue,d=f.i.indexOf(u)>-1?"":Object(f.q)(c,s,p,o),y="路径"+(a+1)+"："+f.h[u].value+" "+d;return l.a.createElement("div",{className:"draw-topic-item",key:i},l.a.createElement("span",{title:y},y),r?null:l.a.createElement("div",{className:"draw-topic-right"},0===a?null:l.a.createElement(C.a,{type:"up",onClick:function(){return n.upPath(i)}}),a===m.length-1?null:l.a.createElement(C.a,{type:"down",onClick:function(){return n.downPath(i)}}),l.a.createElement(C.a,{type:"edit",onClick:function(){return n.editPath(i)}}),n.getDel("确定删除该路径吗？",l.a.createElement(C.a,{type:"close"}),function(){return n.delPath(i,e)})))})),r?null:l.a.createElement(S.a,{block:!0,icon:"plus",onClick:n.addPath,disabled:h},O),e.getFieldDecorator("__pathLen__",{initialValue:m.length,rules:[{pattern:/^[1-9]\d*$/,message:"路径不能为空"}]})(l.a.createElement(I.a,{type:"hidden"})));return l.a.createElement(l.a.Fragment,null,l.a.createElement(i.a.Item,{label:Object(s.c)("输入","路径选择的输入变量，用于对比所有路径的条件，可以是一个固定值或者来自其他节点的动态值"),required:!0},w,e.getFieldDecorator("__inputLen__",{initialValue:d.length,rules:[{pattern:/^[1-9]\d*$/,message:"输入不能为空"}]})(l.a.createElement(I.a,{type:"hidden"}))),P,l.a.createElement(z,{title:b,needSource:!1,needOperate:!v,isShow:y,parents:o,id:g,list:d.concat(m),hide:n.hidePathModal,submit:function(t){return n.savePath(t,e)}}))},n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ee(e,t)}(t,c["Component"]),n=t,(r=[{key:"render",value:function(){var e=this.props.nodeItem.id,t=ge({},this.props,{log:void 0,render:this.getChildren});return l.a.createElement(s.a,fe({},t,{key:e}))}}])&&he(n.prototype,r),o&&he(n,o),t}(),initData:function(){return{input:[],paths:[{id:-99,operate:f.i[0],target:p.g.Value,targetType:p.q.Number,targetValue:""},{id:-98,operate:f.i[1],target:p.g.Value,targetType:p.q.Number,targetValue:""}],showPathModal:!1,showPathId:void 0}},validate:function(e,t,n){var r=e.input,o=e.paths;return 0===r.length?"输入不能为空":0===o.length&&"路径配置不能为空"},toData:function(e,t,n,r){var o=Pe(e.input,1)[0],a=e.paths,i=t.pId,u=o.target,c=o.targetType,l=o.targetValue,s=Object(f.o)(u,c,l,r,i);return{source:s.target,sourceType:s.targetType,sourceValue:s.targetValue,targets:a.map(function(e){var t=e.operate,n=e.target,o=e.targetType,a=e.targetValue,u=Object(f.o)(n,o,a,r,i);return{operate:t,target:u.target,targetType:u.targetType,targetValue:u.targetValue}})}},toConfiguration:function(e){var t=e.source,n=e.sourceType,r=e.sourceValue,o=e.targets,a=Object(f.p)(t,n,r),i=a.target,u=a.targetType,c=a.targetValue,l=-99;return{input:[{id:f.r,target:i,targetType:u,targetValue:c}],paths:o.map(function(e){var t=e.operate,n=e.target,r=e.targetType,o=e.targetValue,a=Object(f.p)(n,r,o),i=a.target,u=a.targetType,c=a.targetValue;return{id:--l,operate:t,target:i,targetType:u,targetValue:c}})}}};function Se(e){return(Se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ce(){return(Ce=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function De(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Te(n,!0).forEach(function(t){Le(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Te(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Le(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ke(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function _e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ae(e,t){return!t||"object"!==Se(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ne(e){return(Ne=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Me(e,t){return(Me=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var xe=10,Ve=1,Re=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=Ae(this,(e=Ne(t)).call.apply(e,[this].concat(o)))).onChange=function(e){var t=n.props,r=t.nodeItem.id;(0,t.changeNodeConfiguration)(r,e)},n.changeLogic=function(e){n.onChange({logic:e})},n.delAll=function(e){n.props.nodeItem.configuration.list.length>0&&(n.onChange({list:[]}),e.setFieldsValue({__listLen__:0}),e.validateFields(["__listLen__"]))},n.del=function(e,t){var r=n.props.nodeItem.configuration.list,o={list:ke(r)},a=r.findIndex(function(t){return t.id===e});a>-1&&o.list.splice(a,1),t.setFieldsValue({__listLen__:o.list.length}),t.validateFields(["__listLen__"]),n.onChange(o)},n.hideListModal=function(){n.onChange({showListModal:!1,showListId:void 0})},n.addInput=function(){n.onChange({showListModal:!0,showListId:f.r})},n.addListItem=function(){n.onChange({showListModal:!0,showListId:void 0})},n.editListItem=function(e){n.onChange({showListModal:!0,showListId:e})},n.saveListItem=function(e,t){var r=n.props.nodeItem.configuration,o=r.list,a=r.showListId,i={showListId:void 0,showListModal:!1};if(a){var u=o.find(function(e){return e.id===a});if(u)Object.assign(u,e);else if(a===f.r){var c={id:f.r};Object.assign(c,e),i.input=[c],t.setFieldsValue({__inputLen__:1})}}else o.push(De({id:Ve++},e)),t.setFieldsValue({__listLen__:o.length});n.onChange(De({},i,{list:ke(o)}))},n.getDel=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return r?t:l.a.createElement(T.a,{title:e,overlayClassName:"draw-confirm",okText:"删除",okType:"danger",getPopupContainer:function(){return document.body},cancelText:"取消",placement:"topRight",onConfirm:n},t)},n.getChildren=function(e){var t=n.props,r=t.readonly,o=t.parents,a=t.nodeItem.configuration,c=a.input,p=a.logic,d=a.list,m=a.showListModal,y=a.showListId,g=f.r===y,v=g?"选择源数据":"选择参数",b=g?"配置源数据":"配置参数",h=d.length>=xe,O=h?"最多添加"+xe+"个参数":"参数",w=c.length>0?l.a.createElement("div",{className:"draw-topic"},c.map(function(e){var t=e.id,a=e.target,i=e.targetType,u=e.targetValue;return l.a.createElement("div",{className:"draw-topic-item",key:t},l.a.createElement("span",null,Object(f.q)(a,i,u,o)),r?null:l.a.createElement("div",{className:"draw-topic-right"},l.a.createElement(C.a,{type:"edit",onClick:function(){return n.editListItem(t)}})))})):r?null:l.a.createElement(S.a,{block:!0,icon:"plus",onClick:n.addInput},"配置源数据"),E=0===d.length,j="draw-del"+(E?" disabled":""),P=l.a.createElement(i.a.Item,{label:Object(s.c)("参数配置","用于与数据源进行依次计算的各个参数配置"),required:!0},r?null:l.a.createElement("div",{className:j},n.getDel("您确定要删除所有参数吗？",l.a.createElement(C.a,{type:"delete",theme:"filled"}),function(){return n.delAll(e)},E)),l.a.createElement("div",{className:"draw-topic"},d.map(function(t,a){var i=t.id,u=t.target,c=t.targetType,s=t.targetValue,p="参数"+(a+1)+"："+Object(f.q)(u,c,s,o);return l.a.createElement("div",{className:"draw-topic-item",key:i},l.a.createElement("span",{title:p},p),r?null:l.a.createElement("div",{className:"draw-topic-right"},l.a.createElement(C.a,{type:"edit",onClick:function(){return n.editListItem(i)}}),n.getDel("确定删除该参数吗？",l.a.createElement(C.a,{type:"close"}),function(){return n.del(i,e)})))})),r?null:l.a.createElement(S.a,{block:!0,icon:"plus",onClick:n.addListItem,disabled:h},O),e.getFieldDecorator("__listLen__",{initialValue:d.length,rules:[{pattern:/^[1-9]\d*$/,message:"参数不能为空"}]})(l.a.createElement(I.a,{type:"hidden"})));return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"draw-group"},l.a.createElement("div",{className:"draw-group-inner"},"输入配置")),l.a.createElement(i.a.Item,{label:Object(s.c)("数据源","数值计算节点的数据源只能是数值型数据。用于作为下述计算的基准数"),required:!0},w,e.getFieldDecorator("__inputLen__",{initialValue:c.length,rules:[{pattern:/^[1-9]\d*$/,message:"数据源不能为空"}]})(l.a.createElement(I.a,{type:"hidden"}))),l.a.createElement("div",{className:"draw-group"},l.a.createElement("div",{className:"draw-group-inner"},"数值计算")),l.a.createElement(i.a.Item,{label:Object(s.c)("运算方法","数值计算节点的数据源只能是数值型数据。用于作为下述计算的基准数"),required:!0},l.a.createElement(u.a,{placeholder:"请选择",value:p,onChange:n.changeLogic,disabled:r},f.t.map(function(e){var t=e.id,n=e.value;return l.a.createElement(u.a.Option,{value:t,key:t},n)}))),P,l.a.createElement(z,{title:b,label:v,needSource:!1,needOperate:!1,onlyNumber:!0,isShow:m,parents:o,id:y,list:c.concat(d),hide:n.hideListModal,submit:function(t){return n.saveListItem(t,e)}}))},n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Me(e,t)}(t,c["Component"]),n=t,(r=[{key:"render",value:function(){var e=this.props.nodeItem.id,t=De({},this.props,{log:void 0,render:this.getChildren});return l.a.createElement(s.a,Ce({},t,{key:e}))}}])&&_e(n.prototype,r),o&&_e(n,o),t}();function Fe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var qe=f.t[0].id,Be={id:"calculat",name:"数值计算",nodeType:203,iconCls:"calculat",description:"对来自设备，API等的数据进行数值计算并输出结果",apiDocumentLink:"",entryNum:1,output:[1,1,1],configuration:Re,outputType:p.l.LIST,outputValue:function(e,t){return[{id:"",value:"计算节点-计算结果"}]},initData:function(){return{input:[],logic:qe,list:[],showListModal:!1,showListId:void 0}},validate:function(e,t,n){var r=e.input,o=e.list;return 0===r.length?"数据源配置不能为空":0===o.length&&"参数配置不能为空"},toData:function(e,t,n,r){var o=t.pId,a=Fe(e.input,1)[0],i=e.logic,u=e.list,c=a.target,l=a.targetType,s=a.targetValue,p=Object(f.o)(c,l,s,r,o);return{source:p.target,sourceType:p.targetType,sourceValue:p.targetValue,operateSign:i,targets:u.map(function(e){var t=e.target,n=e.targetType,a=e.targetValue,i=Object(f.o)(t,n,a,r,o);return{target:i.target,targetType:i.targetType,targetValue:i.targetValue}})}},toConfiguration:function(e){var t=e.source,n=e.sourceType,r=e.sourceValue,o=e.operateSign,a=e.targets,i=Object(f.p)(t,n,r),u=i.target,c=i.targetType,l=i.targetValue,s=-99;return{input:[{id:f.r,target:u,targetType:c,targetValue:l}],logic:o,list:a.map(function(e){var t=e.target,n=e.targetType,r=e.targetValue,o=Object(f.p)(t,n,r),a=o.target,i=o.targetType,u=o.targetValue;return{id:--s,target:a,targetType:i,targetValue:u}})}}},Je=n("fPXa"),Ue=n("a+Kn");function He(e){return(He="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ge(){return(Ge=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Qe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function We(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ze(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ze(e,t){return!t||"object"!==He(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ke(e){return(Ke=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ye(e,t){return(Ye=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Xe={id:"nodeJsScript",name:"NodeJS脚本",nodeType:204,iconCls:"nodeJsScript",description:"支持JavaScript进行业务开发，可进行参数解析处理等",apiDocumentLink:"",entryNum:1,output:[1,1,1],configuration:function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=ze(this,(e=Ke(t)).call.apply(e,[this].concat(o)))).onChange=function(e){var t=n.props,r=t.nodeItem.id;(0,t.changeNodeConfiguration)(r,e)},n.changeTemplate=function(e){n.onChange({jsType:e})},n.setCode=function(e,t){n.onChange({js:e}),t.setFieldsValue({__js__:Ue.a.toTrim(e)}),t.validateFields(["__js__"])},n.fullScreen=function(){n.props.fullScreen()},n.getDevice=function(e){var t=n.props,r=t.readonly,o=t.product,a=o.isLoading,c=o.isError,s=o.list,p=t.nodeItem.configuration,m=p.productId,y=p.eventType,g=e.getFieldDecorator,v=c||0===s.length;return l.a.createElement(l.a.Fragment,null,l.a.createElement(i.a.Item,{label:"选择产品"},g("productId",{initialValue:m,rules:[d.a.isRequire("产品")]})(l.a.createElement(u.a,{showSearch:!0,placeholder:v?"暂无可用产品":"请选择产品",notFoundContent:"未找到相应记录",optionFilterProp:"children",loading:a,disabled:v||r},s.map(function(e){var t=e.id,n=e.value;return l.a.createElement(u.a.Option,{value:t,key:t},n)})))),l.a.createElement(i.a.Item,{label:"选择协议"},g("eventType",{initialValue:y,rules:[d.a.isRequire("协议")]})(l.a.createElement(u.a,{showSearch:!0,placeholder:"请选择协议",notFoundContent:"未找到相应记录",optionFilterProp:"children",disabled:r},f.m.map(function(e){var t=e.id,n=e.value;return l.a.createElement(u.a.Option,{value:t,key:t},n)})))))},n.getChildren=function(e){var t=n.props,r=t.readonly,o=t.isFullScreen,a=t.nodeItem.configuration,c=a.jsType,s=a.js,m=c===p.k.DEVICEACCESS?n.getDevice(e):null;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"draw-group"},l.a.createElement("div",{className:"draw-group-inner"},"Node.js（Node v6.10）")),l.a.createElement(i.a.Item,{label:"脚本",required:!0},r?null:l.a.createElement("div",{className:"draw-del"},l.a.createElement("div",{className:"draw-del-group"},l.a.createElement(S.a,{type:"link",onClick:n.fullScreen},o?"退出全屏":"全屏"))),l.a.createElement(u.a,{placeholder:"请选择",value:c,onChange:n.changeTemplate,disabled:r},f.a.map(function(e){var t=e.id,n=e.value;return l.a.createElement(u.a.Option,{value:t,key:t},n)}))),m,l.a.createElement(i.a.Item,null,l.a.createElement(Je.a,{readOnly:r,code:s,onChange:function(t){return n.setCode(t,e)}}),e.getFieldDecorator("__js__",{initialValue:s,rules:[d.a.isRequire("NodeJS脚本")]})(l.a.createElement(I.a,{type:"hidden"}))))},n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ye(e,t)}(t,c["Component"]),n=t,(r=[{key:"render",value:function(){var e=this.props.nodeItem.id,t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qe(n,!0).forEach(function(t){We(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qe(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},this.props,{log:void 0,render:this.getChildren});return l.a.createElement(s.a,Ge({},t,{key:e}))}}])&&Ze(n.prototype,r),o&&Ze(n,o),t}(),initData:function(){return{dependency:[],jsType:p.k.BLANK,js:"/**\n* @param {Object} payload 上一节点的输出\n*/\nmodule.exports = async function(payload) {\n  // Insert your decryption code\n  return payload;\n}",productId:void 0,eventType:void 0}},validate:function(e,t,n){var r=e.jsType,o=e.js,a=e.productId,i=e.eventType;return""===Ue.a.toTrim(o)?"NodeJs脚本不能为空":r===p.k.DEVICEACCESS&&(void 0===a?"产品不能为空":void 0===i&&"协议不能为空")},toData:function(e,t,n){var r=e.dependency,o=e.jsType,a=e.js,i=e.productId,u=e.eventType;return{dependency:r,jsType:o,js:a,productId:o===p.k.BLANK?null:i,eventType:o===p.k.BLANK?null:u}},toConfiguration:function(e){var t=e.dependency,n=e.jsType,r=e.js,o=e.productId,a=e.eventType;return{dependency:t,jsType:n,js:r,productId:null===o?void 0:o,eventType:null===a?void 0:a}}};function $e(e){return($e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function et(){return(et=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function tt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function nt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ot(e,t){return!t||"object"!==$e(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function at(e){return(at=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function it(e,t){return(it=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ut=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=ot(this,(e=at(t)).call.apply(e,[this].concat(o)))).onChange=function(e){var t=n.props,r=t.nodeItem.id;(0,t.changeNodeConfiguration)(r,e)},n.setParams=function(e){n.onChange({params:e})},n.getChildren=function(e){var t=n.props,r=t.readonly,o=t.nodeItem.configuration,a=o.method,c=o.apiUrl,p=o.encode,m=o.params,y=e.getFieldDecorator;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"draw-group"},l.a.createElement("div",{className:"draw-group-inner"},"API配置")),l.a.createElement(i.a.Item,{label:"请求方式",required:!0},y("method",{initialValue:a})(l.a.createElement(u.a,{disabled:r},f.v.map(function(e){var t=e.id,n=e.value;return l.a.createElement(u.a.Option,{value:t,key:t},n)})))),l.a.createElement(i.a.Item,{label:Object(s.c)("API地址",d.a.urlExplain)},y("apiUrl",{initialValue:c,rules:d.a.url})(l.a.createElement(I.a,{placeholder:"请输入API地址",disabled:r}))),l.a.createElement(i.a.Item,{label:"编码",required:!0},y("encode",{initialValue:p})(l.a.createElement(u.a,{disabled:r},f.l.map(function(e){var t=e.id,n=e.value;return l.a.createElement(u.a.Option,{value:t,key:t},n)})))),l.a.createElement(i.a.Item,{label:"参数编写"},l.a.createElement(Je.a,{readOnly:r,mode:"json",code:m,onChange:n.setParams})))},n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&it(e,t)}(t,c["Component"]),n=t,(r=[{key:"render",value:function(){var e=this.props.nodeItem.id,t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tt(n,!0).forEach(function(t){nt(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tt(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},this.props,{log:void 0,render:this.getChildren});return l.a.createElement(s.a,et({},t,{key:e}))}}])&&rt(n.prototype,r),o&&rt(n,o),t}(),ct=f.v[1].id,lt=f.l[0].id,st={id:"tripartieApi",name:"API服务调用",nodeType:301,iconCls:"tripartieApi",description:"支持调用外部的API，返回body将完整传递，需要后续添加脚本节点进行解析",apiDocumentLink:"",entryNum:1,output:[1,1,1],configuration:ut,initData:function(){return{method:ct,apiUrl:"",encode:lt,params:'{\n  "param1": "",\n  "param2": ""\n}'}},validate:function(e,t,n){var r=e.apiUrl,o=e.params;return""===r?"API地址不能为空":d.a.urlTest.test(r)?!Ue.a.isJsonString(o)&&"参数格式应为结构体":"API地址格式不正确"},toData:function(e,t,n){return{method:e.method,apiUrl:e.apiUrl,encode:e.encode,params:e.params}},toConfiguration:function(e){return{method:e.method,apiUrl:e.apiUrl,encode:e.encode,params:e.params}}};function pt(e){return(pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dt(){return(dt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ft(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function mt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function gt(e,t){return!t||"object"!==pt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function vt(e){return(vt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function bt(e,t){return(bt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ht={id:"officialAPI",name:"项目内API调用",nodeType:302,iconCls:"officialAPI",description:"支持调用项目内其他API，支持返回body解析",apiDocumentLink:"",entryNum:1,output:[1,1,1],configuration:function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=gt(this,(e=vt(t)).call.apply(e,[this].concat(o)))).state={mustReCode:!1},n.onChange=function(e){var t=n.props,r=t.nodeItem.id;(0,t.changeNodeConfiguration)(r,e)},n.setParams=function(e){n.onChange({params:e})},n.setParams2=function(e){var t=n.props.api.list.find(function(t){return t.id===e});t&&(n.setParams(t.params),n.setState({mustReCode:!0}))},n.getChildren=function(e){var t=n.state.mustReCode,r=n.props,o=r.readonly,a=r.api,c=a.isLoading,s=a.isError,p=a.list,f=r.nodeItem.configuration,m=f.apiId,y=f.params,g=e.getFieldDecorator,v=s||0===p.length;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"draw-group"},l.a.createElement("div",{className:"draw-group-inner"},"可用API配置")),l.a.createElement(i.a.Item,{label:"API"},g("apiId",{initialValue:m,rules:[d.a.isRequire("API")]})(l.a.createElement(u.a,{showSearch:!0,placeholder:v?"暂无可用API":"请选择API",notFoundContent:"未找到相应记录",optionFilterProp:"children",loading:c,disabled:v||o,onChange:n.setParams2},p.map(function(e){var t=e.id,n=e.value;return l.a.createElement(u.a.Option,{value:t,key:t},n)})))),void 0===m||t?null:l.a.createElement(i.a.Item,{label:"API入参"},l.a.createElement(Je.a,{readOnly:o,mode:"json",code:y,onChange:n.setParams})))},n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&bt(e,t)}(t,c["Component"]),n=t,(r=[{key:"componentDidUpdate",value:function(){this.state.mustReCode&&this.setState({mustReCode:!1})}},{key:"render",value:function(){var e=this.props.nodeItem.id,t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ft(n,!0).forEach(function(t){mt(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ft(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},this.props,{log:void 0,render:this.getChildren});return l.a.createElement(s.a,dt({},t,{key:e}))}}])&&yt(n.prototype,r),o&&yt(n,o),t}(),initData:function(){return{apiId:void 0,params:"{\n}"}},validate:function(e,t,n){var r=e.apiId,o=e.params;return void 0===r?"项目内API不能为空":!Ue.a.isJsonString(o)&&"参数格式应为结构体"},toData:function(e,t,n){var r=e.apiId,o=e.params,a=n.api.list.find(function(e){return e.id===r});return{flowId:r,apiUrl:(a||{}).invokeUrl||"",params:o}},toConfiguration:function(e){var t=e.flowId;return{apiId:null===t?void 0:t,params:e.params}}},Ot=(n("GRva"),n("gK9i")),wt=(n("mbEz"),n("wCAj"));function Et(e){return(Et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function jt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Pt(e,t){return!t||"object"!==Et(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function It(e){return(It=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function St(e,t){return(St=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ct={width:"100%"},Tt=f.c[0].id,Dt=f.z[0].id,Lt=function(e){function t(e){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Pt(this,It(t).call(this,e))).defaultType=void 0,n.state={mustReCode:!1},n.getValue=function(e){return e===p.q.Boolean?Tt:e!==p.q.Time?e===p.q.Array?"[]":e===p.q.Object?"{\n}":"":void 0},n.changeFirst=function(e){var t=e===p.g.Value?n.defaultType:Dt,r=n.getValue(t);n.props.onChange({source:e,sourceType:t,sourceValue:r})},n.changeSecond=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];n.props.onChange({sourceType:e,sourceValue:t?"":n.getValue(e)}),e!==p.q.Array&&e!==p.q.Object||n.setState({mustReCode:!0})},n.changeThird=function(e){n.props.onChange({sourceValue:e})};var r=e.onlyNumber,o=void 0!==r&&r,a=e.onlyString,i=void 0!==a&&a,u=e.onlyArray,c=void 0===u||u,l=e.moreValueType,s=void 0!==l&&l,d=o?f.f.slice(0,1):i?f.f.slice(2,3):c?f.e.slice(0,1):s?f.f.concat(f.e):f.f;return n.defaultType=d[0].id,n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&St(e,t)}(t,c["Component"]),n=t,(r=[{key:"componentDidUpdate",value:function(){this.state.mustReCode&&this.setState({mustReCode:!1})}},{key:"render",value:function(){var e=this,t=this.state.mustReCode,n=this.props,r=n.source,o=n.sourceType,a=n.sourceValue,i=n.parents,c=n.readonly,s=void 0!==c&&c,d=n.onlyNumber,m=void 0!==d&&d,y=n.onlyString,g=void 0!==y&&y,v=n.onlyArray,b=void 0!==v&&v,h=n.moreValueType,O=void 0!==h&&h,w=r===p.g.Value,E=r===p.g.Node,j=o===p.q.Array,P=o===p.q.Object,S=w&&m?f.f.slice(0,1):w&&g?f.f.slice(2,3):w&&b?f.e.slice(0,1):w&&O?f.f.concat(f.e):w?f.f:i,C=function(t){return e.changeThird(t.target.value)},T=function(t){return e.changeThird(t)},D=null;if(w)o===p.q.Number||o===p.q.String?D=l.a.createElement(I.a,{placeholder:"请输入一个"+(o===p.q.Number?"数值":"字符串"),onChange:o===p.q.Number?function(t){return e.changeThird(t.target.value.replace(/[^\d.]/g,""))}:C,value:a,disabled:s}):o===p.q.Boolean?D=l.a.createElement(u.a,{placeholder:"请选择",value:a,onChange:T,disabled:s},f.c.map(function(e){var t=e.id,n=e.value;return l.a.createElement(u.a.Option,{value:t,key:t},n)})):o===p.q.Time?D=l.a.createElement(L.a,{placeholder:"请选择日期和时间",format:f.n,style:Ct,showToday:!1,showTime:{defaultValue:A()("00:00:00","HH:mm:ss")},value:a,onChange:function(t){return e.changeThird(t)},disabled:s}):(j||P)&&(D=t?null:l.a.createElement(Je.a,{mode:P?"json":"",height:145,readOnly:s,code:a,onChange:T}));else if(E){var k=i.find(function(e){return e.id===o})||{},_=k.type,N=k.list;D=_===p.l.LIST?l.a.createElement(u.a,{placeholder:"请选择",value:a,onChange:T,disabled:s},(N||[]).map(function(e){var t=e.id,n=e.value;return l.a.createElement(u.a.Option,{value:t,key:t},n)})):l.a.createElement(I.a,{placeholder:"不填写变量名则默认为整个返回值",onChange:C,value:a,disabled:s})}return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"draw-menu-group"},f.E.map(function(t){var n=t.id,o=t.value,a=t.disabled,i=r===n,u=i||a||s?void 0:function(){return e.changeFirst(n)};return l.a.createElement("div",{className:"draw-menu"+(i?" draw-menu-selected":"")+(a||s?" draw-menu-disabled":""),onClick:u,key:n},o)})),l.a.createElement("div",{className:"draw-line"},l.a.createElement(u.a,{placeholder:"请选择",value:o,disabled:w&&(m||g||b)||s,onChange:function(t){return e.changeSecond(t,E)}},S.map(function(e){var t=e.id,n=e.value;return l.a.createElement(u.a.Option,{value:t,key:t},n)}))),l.a.createElement("div",{className:"draw-line"},D))}}])&&jt(n.prototype,r),o&&jt(n,o),t}();function kt(e){return(kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _t(){return(_t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function At(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Nt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Mt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xt(e,t){return!t||"object"!==kt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Vt(e){return(Vt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Rt(e,t){return(Rt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ft={id:"httpResponse",name:"HTTP返回",nodeType:701,iconCls:"httpResponse",description:"配置HTTP请求返回的数据，返回码等内容",apiDocumentLink:"",entryNum:1,output:[0,0,0],configuration:function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=xt(this,(e=Vt(t)).call.apply(e,[this].concat(o)))).state={show:["1"]},n.columns=[{title:"返回码",width:60,dataIndex:"code",key:"code"},{title:"信息",dataIndex:"message",key:"message",ellipsis:!0}],n.toggle=function(e){n.setState({show:e})},n.onChange=function(e){var t=n.props,r=t.nodeItem.id;(0,t.changeNodeConfiguration)(r,e)},n.getChildren=function(e){var t=n.state.show,r=n.props,o=r.readonly,a=r.parents,u=r.nodeItem.configuration,c=u.source,p=u.sourceType,d=u.sourceValue,m=Object(s.c)("输出","API返回的body可以是静态数据或来自其他节点（在第一个输入框内指定）；如果来自其他节点，可以返回一个值或一个json。");return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"draw-group"},l.a.createElement("div",{className:"draw-group-inner"},"返回")),l.a.createElement(i.a.Item,{label:m,required:!0},l.a.createElement(Lt,{readonly:o,moreValueType:!0,parents:a,source:c,sourceType:p,sourceValue:d,onChange:n.onChange})),l.a.createElement("div",{className:"draw-group"},l.a.createElement("div",{className:"draw-group-inner"},"返回码")),l.a.createElement(Ot.a,{defaultActiveKey:t,onChange:n.toggle},l.a.createElement(Ot.a.Panel,{header:"系统返回码",key:"1"},l.a.createElement(wt.a,{size:"small",pagination:!1,columns:n.columns,rowKey:"code",dataSource:f.D}))))},n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Rt(e,t)}(t,c["Component"]),n=t,(r=[{key:"render",value:function(){var e=this.props.nodeItem.id,t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?At(n,!0).forEach(function(t){Nt(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):At(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},this.props,{log:void 0,render:this.getChildren});return l.a.createElement(s.a,_t({},t,{key:e}))}}])&&Mt(n.prototype,r),o&&Mt(n,o),t}(),initData:function(){return{source:p.g.Value,sourceType:p.q.Number,sourceValue:""}},afterConnect:function(e,t,n,r,o){e===p.c.EndPoint&&Object.assign(t,{source:p.g.Node,sourceType:n.id,sourceValue:""})},validate:function(e,t,n){var r=e.source,o=e.sourceType,a=e.sourceValue;if(r===p.g.Value){if(o===p.q.Array&&!Ue.a.isArrayString(a))return"输出内容格式应为数组";if(o===p.q.Object&&!Ue.a.isJsonString(a))return"输出内容格式应为结构体"}return!1},toData:function(e,t,n,r){var o=e.source,a=e.sourceType,i=e.sourceValue,u=t.pId,c=Object(f.o)(o,a,i,r,u);return{source:c.target,sourceType:c.targetType,value:c.targetValue}},toConfiguration:function(e){var t=e.source,n=e.sourceType,r=e.value,o=Object(f.p)(t,n,r);return{source:o.target,sourceType:o.targetType,sourceValue:o.targetValue}}};n("4l63");function qt(e){return(qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Bt(){return(Bt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Jt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Ut(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ht(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Gt(e,t){return!t||"object"!==qt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Qt(e){return(Qt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Wt(e,t){return(Wt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Zt="//支持透传数据，最大不超过256KB\n[101010]",zt={id:"mqttRelease",name:"MQTT发布",nodeType:401,iconCls:"mqttRelease",description:"通过MQTT Topic发布消息到设备，无需定义物模型",apiDocumentLink:"",entryNum:1,output:[1,1,1],configuration:function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,c=new Array(r),s=0;s<r;s++)c[s]=arguments[s];return(n=Gt(this,(e=Qt(t)).call.apply(e,[this].concat(c)))).onChange=function(e){var t=n.props,r=t.nodeItem.id;(0,t.changeNodeConfiguration)(r,e)},n.tab=function(e){n.props.nodeItem.isError&&setTimeout(function(){e.validateFields()},200)},n.changeType=function(e){var t=parseInt(e.target.value);n.onChange({msgType:t,message:t===p.d.Node?f.A:Zt})},n.changeMsg=function(e){n.onChange({message:e})},n.getProtocolComponent=function(e){var t=n.props,r=t.readonly,o=t.nodeItem.configuration,a=o.productId,c=o.protocolType,s=t.product,p=s.isLoading,m=s.isError,y=s.list,g=e.getFieldDecorator,v=m||0===y.length;return l.a.createElement(l.a.Fragment,null,l.a.createElement(i.a.Item,{label:"选择产品"},g("productId",{initialValue:a,rules:[d.a.isRequire("产品")]})(l.a.createElement(u.a,{showSearch:!0,placeholder:v?"暂无可用产品":"请选择产品",notFoundContent:"未找到相应记录",optionFilterProp:"children",loading:p,disabled:v||r},y.map(function(e){var t=e.id,n=e.value;return l.a.createElement(u.a.Option,{value:t,key:t},n)})))),l.a.createElement(i.a.Item,{label:"选择Topic",required:!0},g("protocolType",{initialValue:c,rules:[d.a.isRequire("Topic")]})(l.a.createElement(u.a,{showSearch:!0,placeholder:"请选择Topic",notFoundContent:"未找到相应记录",optionFilterProp:"children",disabled:r},f.m.map(function(e){var t=e.id,n=e.value;return l.a.createElement(u.a.Option,{value:t,key:t},n)})))))},n.getUserDefined=function(e){var t=n.props,r=t.readonly,o=t.mqTopic,a=o.isError,c=o.isLoading,s=o.list,p=t.nodeItem.configuration,f=a||0===s.length,m=p.queueId,y=e.getFieldDecorator;return l.a.createElement(l.a.Fragment,null,l.a.createElement(i.a.Item,{label:"监听Topic"},y("queueId",{initialValue:m,rules:[d.a.isRequire("自定义队列")]})(l.a.createElement(u.a,{showSearch:!0,placeholder:f?"暂无可用队列":"请选择自定义队列",notFoundContent:"未找到相应记录",optionFilterProp:"children",loading:c,disabled:f||r},s.map(function(e){var t=e.id,n=e.value;return l.a.createElement(u.a.Option,{value:t,key:t},n)})))),l.a.createElement("a",{className:"goto-dataasset",href:"#/userCenter/dataasset",target:"_blank"},"数据资产知识库管理"))},n.getChildren=function(e){var t=n.props,r=t.readonly,c=t.nodeItem.configuration,s=t.parents,d=c.type,m=c.msgType,y=c.message,g=e.getFieldDecorator,v=d===p.n.ProductProtocol?n.getProtocolComponent(e):n.getUserDefined(e);return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"draw-group"},l.a.createElement("div",{className:"draw-group-inner"},"Topic配置")),l.a.createElement(i.a.Item,{label:"订阅Topic类型",required:!0},g("type",{initialValue:d})(l.a.createElement(a.a.Group,{disabled:r,onChange:function(){return n.tab(e)}},f.B.map(function(e){var t=e.id,n=e.value;return l.a.createElement(a.a,{value:t,key:t},n)})))),l.a.createElement("div",{className:"draw-line"}),v,l.a.createElement(o.a,null),l.a.createElement(i.a.Item,{label:"下发内容类型",required:!0},l.a.createElement(a.a.Group,{value:m,onChange:n.changeType,disabled:r},f.j.map(function(e){var t=e.id,n=e.value;return l.a.createElement(a.a,{value:t,key:t},n)}))),l.a.createElement("div",{className:"draw-group"},l.a.createElement("div",{className:"draw-group-inner"},"message")),l.a.createElement(i.a.Item,null,m===p.d.Node?l.a.createElement(u.a,{placeholder:"请选择节点",value:y,onChange:n.changeMsg,disabled:r},s.map(function(e){var t=e.id,n=e.value;return l.a.createElement(u.a.Option,{value:t,key:t},n+" 输出内容")})):l.a.createElement(Je.a,{mode:"",readOnly:r,height:280,code:y,onChange:n.changeMsg})))},n}var n,r,m;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Wt(e,t)}(t,c["Component"]),n=t,(r=[{key:"render",value:function(){var e=this.props.nodeItem.id,t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jt(n,!0).forEach(function(t){Ut(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jt(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},this.props,{log:void 0,render:this.getChildren});return l.a.createElement(s.a,Bt({},t,{key:e}))}}])&&Ht(n.prototype,r),m&&Ht(n,m),t}(),initData:function(){return{type:p.n.ProductProtocol,productId:void 0,protocolType:void 0,queueId:void 0,params:[],showParamModal:!1,showParamId:void 0,msgType:p.d.Node,message:f.A}},validate:function(e,t,n){var r=e.type,o=e.productId,a=e.protocolType,i=e.queueId,u=e.message;if(r===p.n.ProductProtocol){if(void 0===o)return"产品不能为空";if(void 0===a)return"Topic不能为空"}else if(void 0===i)return"监听Topic的选择队列不能为空";return(void 0===u||""===u)&&"下发内容不能为空"},toData:function(e,t,n){var r=e.type,o=e.productId,a=e.protocolType,i=e.queueId,u=e.msgType,c=e.message,l=t.pId;return{msgType:u,message:u===p.d.Node&&c===f.A?l:c,dsType:r,productId:void 0===o?null:o,eventType:void 0===a?null:a,dsId:void 0===i?null:i}},toConfiguration:function(e){var t=e.msgType,n=e.message,r=e.dsType,o=e.productId,a=e.eventType,i=e.dsId;return{type:r,productId:null===o?void 0:o,protocolType:null===a?void 0:a,queueId:null===i?void 0:i,msgType:t,message:n}}};function Kt(e){return(Kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Yt(){return(Yt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Xt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function $t(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function en(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function tn(e,t){return!t||"object"!==Kt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function nn(e){return(nn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function rn(e,t){return(rn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var on="//支持透传数据，最大不超过256KB\n[101010]",an={id:"rocketMQRelease",name:"RocketMQ发布",nodeType:402,iconCls:"rocketMQRelease",description:"通过RocketMq发布消息到指定Topic",apiDocumentLink:"",entryNum:1,output:[1,1,1],configuration:function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(n=tn(this,(e=nn(t)).call.apply(e,[this].concat(o)))).onChange=function(e){var t=n.props,r=t.nodeItem.id;(0,t.changeNodeConfiguration)(r,e)},n.changeType=function(e){var t=parseInt(e.target.value);n.onChange({msgType:t,message:t===p.d.Node?f.A:on})},n.changeMsg=function(e){n.onChange({message:e})},n.getChildren=function(e){var t=n.props,r=t.readonly,o=t.nodeItem.configuration,c=o.dsId,s=o.msgType,m=o.message,y=t.parents,g=t.rocketMQTopic,v=g.isLoading,b=g.isError,h=g.list,O=e.getFieldDecorator,w=b||0===h.length;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"draw-group"},l.a.createElement("div",{className:"draw-group-inner"},"参数配置")),l.a.createElement(i.a.Item,{label:"下发Topic"},O("dsId",{initialValue:c,rules:[d.a.isRequire("下发Topic")]})(l.a.createElement(u.a,{showSearch:!0,placeholder:w?"暂无可用Topic":"请选择Topic",notFoundContent:"未找到相应记录",optionFilterProp:"children",loading:v,disabled:w||r},h.map(function(e){var t=e.id,n=e.value;return l.a.createElement(u.a.Option,{value:t,key:t},n)})))),l.a.createElement("a",{className:"goto-dataasset",href:"#/userCenter/dataasset",target:"_blank"},"数据资产知识库管理"),l.a.createElement(i.a.Item,{label:"下发内容类型",required:!0},l.a.createElement(a.a.Group,{value:s,onChange:n.changeType,disabled:r},f.j.map(function(e){var t=e.id,n=e.value;return l.a.createElement(a.a,{value:t,key:t},n)}))),l.a.createElement("div",{className:"draw-group"},l.a.createElement("div",{className:"draw-group-inner"},"message")),l.a.createElement(i.a.Item,null,s===p.d.Node?l.a.createElement(u.a,{placeholder:"请选择节点",value:m,onChange:n.changeMsg,disabled:r},y.map(function(e){var t=e.id,n=e.value;return l.a.createElement(u.a.Option,{value:t,key:t},n+" 输出内容")})):l.a.createElement(Je.a,{readOnly:r,mode:"",height:280,code:m,onChange:n.changeMsg})))},n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&rn(e,t)}(t,c["Component"]),n=t,(r=[{key:"render",value:function(){var e=this.props.nodeItem.id,t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xt(n,!0).forEach(function(t){$t(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xt(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},this.props,{log:void 0,render:this.getChildren});return l.a.createElement(s.a,Yt({},t,{key:e}))}}])&&en(n.prototype,r),o&&en(n,o),t}(),initData:function(){return{msgType:p.d.Node,message:f.A,dsId:void 0}},validate:function(e,t,n){var r=e.dsId,o=e.message;return void 0===r?"下发Topic不能为空":(void 0===o||""===o)&&"下发内容不能为空"},toData:function(e,t,n){var r=e.dsId,o=e.msgType,a=e.message,i=t.pId;return{dsId:void 0===r?null:r,msgType:o,message:o===p.d.Node&&a===f.A?i:a}},toConfiguration:function(e){var t=e.dsId;return{dsId:null===t?void 0:t,msgType:e.msgType,message:e.message}}};function un(e){return(un="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cn(){return(cn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ln(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function sn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function dn(e,t){return!t||"object"!==un(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function fn(e){return(fn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function mn(e,t){return(mn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var yn={id:"mySql",name:"数据库MySQL",nodeType:502,iconCls:"mySql",description:"暂无描述",apiDocumentLink:"",entryNum:1,output:[1,1,1],configuration:function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=dn(this,(e=fn(t)).call.apply(e,[this].concat(o)))).onChange=function(e){var t=n.props,r=t.nodeItem.id;(0,t.changeNodeConfiguration)(r,e)},n.setSQL=function(e,t){n.onChange({exeSql:e}),t.setFieldsValue({__sql__:Ue.a.toTrim(e)}),t.validateFields(["__sql__"])},n.setValues=function(e,t){n.onChange({values:e}),t.setFieldsValue({__query__:Ue.a.toTrim(e)}),t.validateFields(["__query__"])},n.getChildren=function(e){var t=n.props,r=t.readonly,o=t.nodeItem.configuration,a=t.database,c=a.isLoading,s=a.isError,p=a.list,f=o.dsId,m=o.values,y=o.exeSql,g=e.getFieldDecorator,v=s||0===p.length;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"draw-group"},l.a.createElement("div",{className:"draw-group-inner"},"参数")),l.a.createElement(i.a.Item,{label:"数据库选择"},g("dsId",{initialValue:f,rules:[d.a.isRequire("数据库")]})(l.a.createElement(u.a,{showSearch:!0,placeholder:v?"暂无可用数据库":"请选择数据库",notFoundContent:"未找到相应记录",optionFilterProp:"children",loading:c,disabled:v||r},p.map(function(e){var t=e.id,n=e.value;return l.a.createElement(u.a.Option,{value:t,key:t},n)})))),l.a.createElement("a",{className:"goto-dataasset",href:"#/userCenter/dataasset",target:"_blank"},"数据资产知识库管理"),l.a.createElement(i.a.Item,{label:"SQL输入",required:!0},l.a.createElement(Je.a,{readOnly:r,mode:"mysql",height:200,code:y,onChange:function(t){return n.setSQL(t,e)}}),g("__sql__",{initialValue:y,rules:[d.a.isRequire("SQL输入")]})(l.a.createElement(I.a,{type:"hidden"}))),l.a.createElement(i.a.Item,{label:"入参选择",required:!0},l.a.createElement(Je.a,{readOnly:r,mode:"json",height:120,code:m,onChange:function(t){return n.setValues(t,e)}}),g("__query__",{initialValue:m,rules:[d.a.isRequire("入参")]})(l.a.createElement(I.a,{type:"hidden"}))))},n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&mn(e,t)}(t,c["Component"]),n=t,(r=[{key:"render",value:function(){var e=this.props.nodeItem.id,t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ln(n,!0).forEach(function(t){sn(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ln(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},this.props,{log:void 0,render:this.getChildren});return l.a.createElement(s.a,cn({},t,{key:e}))}}])&&pn(n.prototype,r),o&&pn(n,o),t}(),initData:function(){return{dsId:void 0,exeSql:"SELECT * FROM tb_flow_definition\nwhere flow_id in (:flow_id)\nand version = :version;",values:"{\n}"}},validate:function(e,t,n){var r=e.dsId,o=e.exeSql,a=e.values;return void 0===r?"MySQL数据库不能为空":""===Ue.a.toTrim(o)?"SQL输入不能为空":""===Ue.a.toTrim(a)?"入参不能为空":!Ue.a.isJsonString(a)&&"入参格式应为结构体"},toData:function(e,t,n){var r=e.dsId;return{dml:{exeSql:e.exeSql,values:e.values},dsId:void 0===r?null:r}},toConfiguration:function(e){var t=e.dml,n=t.exeSql,r=t.values,o=e.dsId;return{dsId:null===o?void 0:o,exeSql:n,values:r}}};function gn(e){return(gn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vn(){return(vn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function bn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function hn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function On(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function wn(e,t){return!t||"object"!==gn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function En(e){return(En=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function jn(e,t){return(jn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Pn={id:"keyValue",name:"键值对操作",nodeType:503,iconCls:"keyValue",description:"主键-存储值的存储方式，快速对主键对应的值进行增删改查，无需购买数据库",apiDocumentLink:"",entryNum:1,output:[1,1,1],configuration:function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=wn(this,(e=En(t)).call.apply(e,[this].concat(o)))).onChange=function(e){var t=n.props,r=t.nodeItem.id;(0,t.changeNodeConfiguration)(r,e)},n.get__=function(e,t){return e===p.g.Value&&""===t?"":"1"},n.onChangeKey=function(e,t){var r=n.props.nodeItem.configuration.key,o=e.source,a=e.sourceType,i=e.sourceValue,u={};"source"in e&&(u.key=o),"sourceType"in e&&(u.keyType=a),"sourceValue"in e&&(u.keyValue=i),t.setFieldsValue({__keyValue__:n.get__("source"in e?o:r,i)}),t.validateFields(["__keyValue__"]),n.onChange(u)},n.onChangeValue=function(e,t){var r=n.props.nodeItem.configuration.value,o=e.source,a=e.sourceType,i=e.sourceValue,u={};"source"in e&&(u.value=o),"sourceType"in e&&(u.valueType=a),"sourceValue"in e&&(u.valueValue=i),t.setFieldsValue({__valueValue__:n.get__("source"in e?o:r,i)}),t.validateFields(["__valueValue__"]),n.onChange(u)},n.getChildren=function(e){var t=n.props,r=t.readonly,o=t.parents,a=t.nodeItem.configuration,c=t.redis,m=c.isLoading,y=c.isError,g=c.list,v=e.getFieldDecorator,b=y||0===g.length,h=a.redis,O=a.opeType,w=a.key,E=a.keyType,j=a.keyValue,P=a.value,S=a.valueType,C=a.valueValue,T=n.get__(w,j),D=n.get__(P,C);return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"draw-group"},l.a.createElement("div",{className:"draw-group-inner"},"参数")),l.a.createElement(i.a.Item,{label:"选择Redis数据源"},v("redis",{initialValue:h,rules:[d.a.isRequire("Redis数据源")]})(l.a.createElement(u.a,{showSearch:!0,placeholder:b?"暂无可用Redis数据源":"请选择Redis数据源",notFoundContent:"未找到相应记录",optionFilterProp:"children",loading:m,disabled:b||r},g.map(function(e){var t=e.id,n=e.value;return l.a.createElement(u.a.Option,{value:t,key:t},n)})))),l.a.createElement("a",{className:"goto-dataasset",href:"#/userCenter/dataasset",target:"_blank"},"数据资产知识库管理"),l.a.createElement("div",{className:"draw-group"},l.a.createElement("div",{className:"draw-group-inner"},"KV存储配置")),l.a.createElement(i.a.Item,{label:Object(s.c)("操作","操作对应的是键（Key）值（Value）对存储的增删改查等操作。"),required:!0},v("opeType",{initialValue:O,rules:[d.a.isRequire("操作")]})(l.a.createElement(u.a,{placeholder:"请选择操作",disabled:r},f.w.map(function(e){var t=e.id,n=e.value;return l.a.createElement(u.a.Option,{value:t,key:t},n)})))),void 0!==O?l.a.createElement(i.a.Item,{label:Object(s.c)("键(key)","key仅支持字符串类型"),required:!0},l.a.createElement(Lt,{readonly:r,onlyString:!0,parents:o,source:w,sourceType:E,sourceValue:j,onChange:function(t){return n.onChangeKey(t,e)}}),v("__keyValue__",{initialValue:T,rules:[d.a.isRequire("键(key)")]})(l.a.createElement(I.a,{type:"hidden"}))):null,O===p.j.Set&&l.a.createElement(l.a.Fragment,null,l.a.createElement(i.a.Item,{label:Object(s.c)("值(value)","value仅支持字符串类型"),required:!0},l.a.createElement(Lt,{readonly:r,onlyString:!0,parents:o,source:P,sourceType:S,sourceValue:C,onChange:function(t){return n.onChangeValue(t,e)}}),v("__valueValue__",{initialValue:D,rules:[d.a.isRequire("值(value)")]})(l.a.createElement(I.a,{type:"hidden"})))))},n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jn(e,t)}(t,c["Component"]),n=t,(r=[{key:"render",value:function(){var e=this.props.nodeItem.id,t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bn(n,!0).forEach(function(t){hn(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bn(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},this.props,{log:void 0,render:this.getChildren});return l.a.createElement(s.a,vn({},t,{key:e}))}}])&&On(n.prototype,r),o&&On(n,o),t}(),initData:function(){return{redis:void 0,opeType:void 0,key:p.g.Value,keyType:p.q.String,keyValue:"",value:p.g.Value,valueType:p.q.String,valueValue:""}},validate:function(e,t,n){var r=e.redis,o=e.opeType,a=e.key,i=e.keyValue,u=e.value,c=e.valueValue;return void 0===r?"redis数据源不能为空":void 0===o?"操作项不能为空":a===p.g.Value&&""===i?"键(key)不能为空":o===p.j.Set&&u===p.g.Value&&""===c&&"值(value)不能为空"},toData:function(e,t,n,r){var o=t.pId,a=e.redis,i=e.opeType,u=e.key,c=e.keyType,l=e.keyValue,s=e.value,p=e.valueType,d=e.valueValue,m=Object(f.o)(u,c,l,r,o),y=m.target,g=m.targetValue,v=Object(f.o)(s,p,d,r,o);return{dsId:a,opeType:i,keySource:y,keySourceValue:g,source:v.target,sourceValue:v.targetValue}},toConfiguration:function(e){var t=e.dsId,n=e.opeType,r=e.keySource,o=e.keySourceValue,a=e.source,i=e.sourceValue,u=Object(f.p)(r,r===p.g.Value?p.q.String:0,o),c=u.target,l=u.targetType,s=u.targetValue,d=Object(f.p)(a,a===p.g.Value?p.q.String:0,i);return{redis:t,opeType:n,key:c,keyType:l,keyValue:s,value:d.target,valueType:d.targetType,valueValue:d.targetValue}}};function In(e){return(In="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Sn(){return(Sn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Cn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Tn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Dn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ln(e,t){return!t||"object"!==In(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function kn(e){return(kn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _n(e,t){return(_n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var An={id:"forLoop",name:"循环开始",nodeType:206,iconCls:"forLoop",description:"循环开始节点",apiDocumentLink:"",entryNum:1,output:[1,1,1],configuration:function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=Ln(this,(e=kn(t)).call.apply(e,[this].concat(o)))).onChange=function(e){var t=n.props,r=t.nodeItem.id;(0,t.changeNodeConfiguration)(r,e)},n.get__=function(e,t){return e===p.g.Value&&""===t?"":"1"},n.onChangeKey=function(e,t){var r=n.props.nodeItem.configuration.source,o=e.source,a=e.sourceType,i=e.sourceValue,u={};"source"in e&&(u.source=o),"sourceType"in e&&(u.sourceType=a),"sourceValue"in e&&(u.sourceValue=i),t.setFieldsValue({__loopobj__:n.get__("source"in e?o:r,i)}),t.validateFields(["__loopobj__"]),n.onChange(u)},n.getChildren=function(e){var t=n.props,r=t.readonly,o=t.parents,a=t.nodeItem.configuration,u=e.getFieldDecorator,c=a.source,p=a.sourceType,f=a.sourceValue,m=n.get__(c,f);return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"draw-group"},l.a.createElement("div",{className:"draw-group-inner"},"参数配置")),l.a.createElement(i.a.Item,{label:Object(s.c)("循环对象","一个数组"),required:!0},l.a.createElement(Lt,{readonly:r,onlyArray:!0,parents:o,source:c,sourceType:p,sourceValue:f,onChange:function(t){return n.onChangeKey(t,e)}}),u("__loopobj__",{initialValue:m,rules:[d.a.isRequire("循环对象")]})(l.a.createElement(I.a,{type:"hidden"}))))},n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_n(e,t)}(t,c["Component"]),n=t,(r=[{key:"render",value:function(){var e=this.props.nodeItem.id,t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Cn(n,!0).forEach(function(t){Tn(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Cn(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},this.props,{log:void 0,render:this.getChildren});return l.a.createElement(s.a,Sn({},t,{key:e}))}}])&&Dn(n.prototype,r),o&&Dn(n,o),t}(),initData:function(){return{source:p.g.Value,sourceType:p.q.Array,sourceValue:""}},validate:function(e,t,n){var r=e.source,o=e.sourceValue;return r===p.g.Value&&""===o&&"循环对象不能为空"},toData:function(e,t,n,r){var o=t.pId,a=e.source,i=e.sourceType,u=e.sourceValue,c=Object(f.o)(a,i,u,r,o);return{source:c.target,sourceValue:c.targetValue}},toConfiguration:function(e){var t=e.source,n=e.sourceValue,r=Object(f.p)(t,t===p.g.Value?p.q.Array:0,n);return{source:r.target,sourceType:r.targetType,sourceValue:r.targetValue}}};function Nn(e){return(Nn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Mn(){return(Mn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function xn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Vn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Rn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Fn(e,t){return!t||"object"!==Nn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function qn(e){return(qn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Bn(e,t){return(Bn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Jn={id:"forLoopEnd",name:"循环结束",nodeType:207,iconCls:"forLoopEnd",description:"循环结束节点",apiDocumentLink:"",entryNum:1,output:[1,1,1],configuration:function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=Fn(this,(e=qn(t)).call.apply(e,[this].concat(o)))).getChildren=function(e){return l.a.createElement(l.a.Fragment,null)},n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Bn(e,t)}(t,c["Component"]),n=t,(r=[{key:"render",value:function(){var e=this.props.nodeItem.id,t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xn(n,!0).forEach(function(t){Vn(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xn(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},this.props,{log:void 0,render:this.getChildren});return l.a.createElement(s.a,Mn({},t,{key:e}))}}])&&Rn(n.prototype,r),o&&Rn(n,o),t}(),initData:function(){return{}},validate:function(e,t,n){return!1},toData:function(e,t,n,r){return{}},toConfiguration:function(e){return{}}};function Un(e){return(Un="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Hn(){return(Hn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Gn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Qn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Wn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Zn(e,t){return!t||"object"!==Un(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function zn(e){return(zn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Kn(e,t){return(Kn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Yn=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(n=Zn(this,(e=zn(t)).call.apply(e,[this].concat(o)))).onChange=function(e){var t=n.props,r=t.nodeItem.id;(0,t.changeNodeConfiguration)(r,e)},n.changeType=function(e){var t=parseInt(e.target.value),r={dataType:t,BYTE_ADJUSTMENT:0};t===p.s.String?(r.startIndex=0,r.dataLength=0):(r.startIndex=void 0,r.dataLength=void 0),n.onChange(r)},n.getChildren=function(e){var t=n.props,r=t.readonly,o=t.nodeItem.configuration,c=o.productId,s=o.dataType,m=o.maximumMessageLength,y=o.startIndex,g=o.dataLength,v=(o.encode,o.STR_DELIMITER),b=o.BYTE_ADJUSTMENT,h=t.product,O=h.isLoading,w=h.isError,E=h.list,j=e.getFieldDecorator,P=w||0===E.length;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"draw-group"},l.a.createElement("div",{className:"draw-group-inner"},"参数配置")),l.a.createElement(i.a.Item,{label:"选择产品"},j("productId",{initialValue:c,rules:[d.a.isRequire("产品")]})(l.a.createElement(u.a,{showSearch:!0,placeholder:P?"暂无可用产品":"请选择产品",notFoundContent:"未找到相应数据",optionFilterProp:"children",loading:O,disabled:P||r},E.map(function(e){var t=e.id,n=e.value;return l.a.createElement(u.a.Option,{value:t,key:t},n)})))),l.a.createElement(i.a.Item,{label:"消息类型",required:!0},l.a.createElement(a.a.Group,{value:s,onChange:n.changeType,disabled:r},f.u.map(function(e){var t=e.id,n=e.value;return l.a.createElement(a.a,{value:t,key:t},n)}))),l.a.createElement(i.a.Item,{label:"完整消息最大长度",required:!0},j("maximumMessageLength",{initialValue:m,rules:d.a.isInt("消息最大长度")})(l.a.createElement(I.a,{type:"number",min:0,placeholder:"请输入完整消息最大长度",disabled:r}))),s===p.s.Stream&&l.a.createElement(l.a.Fragment,null,l.a.createElement(i.a.Item,{label:"数据长度起始下标",required:!0},j("startIndex",{initialValue:y,rules:d.a.isInt("起始下标")})(l.a.createElement(I.a,{type:"number",min:0,placeholder:"请输入数据长度起始下标",disabled:r}))),l.a.createElement(i.a.Item,{label:"数据长度大小",required:!0},j("dataLength",{initialValue:g,rules:d.a.isInt("数据长度大小")})(l.a.createElement(I.a,{type:"number",min:0,placeholder:"请输入数据长度大小",disabled:r}))),l.a.createElement(i.a.Item,{label:"数据追加长度"},j("BYTE_ADJUSTMENT",{initialValue:b,rules:d.a.isIntNotRequire()})(l.a.createElement(I.a,{type:"number",min:0,placeholder:"追加长度默认为0",disabled:r})))),s===p.s.String&&l.a.createElement(l.a.Fragment,null,l.a.createElement(i.a.Item,{label:"字符编码",required:!0},j("encode",{initialValue:"UTF-8"})(l.a.createElement(u.a,null,l.a.createElement(u.a.Option,{value:"UTF-8"},"UTF-8")))),l.a.createElement(i.a.Item,{label:"消息分隔符"},j("STR_DELIMITER",{initialValue:v})(l.a.createElement(I.a,{placeholder:"选填",disabled:r})))))},n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Kn(e,t)}(t,c["Component"]),n=t,(r=[{key:"render",value:function(){var e=this.props.nodeItem.id,t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Gn(n,!0).forEach(function(t){Qn(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gn(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},this.props,{log:void 0,render:this.getChildren});return l.a.createElement(s.a,Hn({},t,{key:e}))}}])&&Wn(n.prototype,r),o&&Wn(n,o),t}(),Xn={id:"tcpEvent",name:"TCP事件",nodeType:103,iconCls:"tcpEvent",description:"接收TCP上报的设备消息，并触发TCP事件",apiDocumentLink:"",canDrop:j.a,entryNum:0,output:[1,1,1],configuration:Yn,initData:function(){return{productId:void 0,dataType:1,maximumMessageLength:void 0,startIndex:void 0,dataLength:void 0,encode:"UTF-8",STR_DELIMITER:void 0,BYTE_ADJUSTMENT:0}},validate:function(e){var t=e.productId,n=e.dataType,r=e.maximumMessageLength,o=e.startIndex,a=e.dataLength;if(void 0===t)return"产品不能为空";if(void 0===r)return"消息最大长度不能为空";if(n===p.s.Stream){if(void 0===o)return"数据长度起始下标不能为空";if(void 0===a)return"数据长度不能为空"}return!1},toData:function(e){var t=e.productId,n=e.dataType,r=e.maximumMessageLength,o=e.startIndex,a=e.dataLength,i=e.STR_DELIMITER,u=e.BYTE_ADJUSTMENT,c=void 0===u?0:u;return n===p.s.String&&(o=0,a=0,c=0),n===p.s.Stream&&(i=""),{productId:t,dataType:n,maximumMessageLength:r-0,startIndex:o-0,dataLength:a-0,BYTE_ADJUSTMENT:c-0,STR_DELIMITER:i}},toConfiguration:function(e){var t=e.productId,n=e.dataType,r=e.maximumMessageLength,o=e.startIndex,a=e.dataLength,i=e.STR_DELIMITER,u=e.BYTE_ADJUSTMENT;return{productId:null===t?void 0:t,dataType:n||p.s.Stream,maximumMessageLength:r,startIndex:o,dataLength:a,STR_DELIMITER:i,BYTE_ADJUSTMENT:u}}};function $n(e){return($n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function er(){return(er=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function tr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function nr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function or(e,t){return!t||"object"!==$n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ar(e){return(ar=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ir(e,t){return(ir=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ur={id:"tcpRelease",name:"TCP发布",nodeType:403,iconCls:"tcpRelease",description:"响应TCP事件，发送TCP消息",apiDocumentLink:"",entryNum:1,output:[1,1,1],configuration:function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=or(this,(e=ar(t)).call.apply(e,[this].concat(o)))).onChange=function(e){var t=n.props,r=t.nodeItem.id;(0,t.changeNodeConfiguration)(r,e)},n.onChangeKey=function(e,t){var r=n.props.nodeItem.configuration.source,o=e.source,a=e.sourceType,i=e.sourceValue,u={};"source"in e&&(u.source=o),"sourceType"in e&&(u.sourceType=a),"sourceValue"in e&&(u.sourceValue=i),t.setFieldsValue({__tcpdata__:n.get__("source"in e?o:r,i)}),t.validateFields(["__tcpdata__"]),n.onChange(u)},n.get__=function(e,t){return e===p.g.Value&&""===t?"":"1"},n.getChildren=function(e){var t=n.props,r=t.readonly,o=t.parents,a=t.nodeItem.configuration,u=a.source,c=a.sourceType,s=a.sourceValue,p=e.getFieldDecorator,f=n.get__(u,s);return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"draw-group"},l.a.createElement("div",{className:"draw-group-inner"},"参数配置")),l.a.createElement(i.a.Item,{label:"下发内容",required:!0},l.a.createElement(Lt,{readonly:r,onlyString:!0,parents:o,source:u,sourceType:c,sourceValue:s,onChange:function(t){return n.onChangeKey(t,e)}}),p("__tcpdata__",{initialValue:f,rules:[d.a.isRequire("下发内容")]})(l.a.createElement(I.a,{type:"hidden"}))))},n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ir(e,t)}(t,c["Component"]),n=t,(r=[{key:"render",value:function(){var e=this.props.nodeItem.id,t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tr(n,!0).forEach(function(t){nr(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tr(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},this.props,{log:void 0,render:this.getChildren});return l.a.createElement(s.a,er({},t,{key:e}))}}])&&rr(n.prototype,r),o&&rr(n,o),t}(),initData:function(){return{source:p.g.Value,sourceType:p.q.String,sourceValue:""}},validate:function(e){var t=e.source,n=e.sourceValue;return t===p.g.Value&&""===n&&"下发内容不能为空"},toData:function(e,t,n,r){var o=t.pId,a=e.source,i=e.sourceType,u=e.sourceValue,c=Object(f.o)(a,i,u,r,o);return{source:c.target,sourceValue:c.targetValue}},toConfiguration:function(e){var t=e.source,n=e.sourceValue,r=Object(f.p)(t,t===p.g.Value?p.q.String:0,n);return{source:r.target,sourceType:r.targetType,sourceValue:r.targetValue}}};function cr(e){return(cr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lr(){return(lr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function sr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function pr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fr(e,t){return!t||"object"!==cr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function mr(e){return(mr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function yr(e,t){return(yr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var gr={id:"platformApi",name:"平台API调用",nodeType:303,iconCls:"platformApi",description:"支持调用平台其他API，支持返回body解析",apiDocumentLink:"",entryNum:1,output:[1,1,1],configuration:function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=fr(this,(e=mr(t)).call.apply(e,[this].concat(o)))).state={mustReCode:!1},n.onChange=function(e){var t=n.props,r=t.nodeItem.id;(0,t.changeNodeConfiguration)(r,e)},n.setParams=function(e){n.onChange({params:e})},n.setParams2=function(e){var t=n.props.platformapi.list.find(function(t){return t.id===e});t&&(n.setParams(t.params),n.setState({mustReCode:!0}))},n.getChildren=function(e){var t=n.state.mustReCode,r=n.props,o=r.readonly,a=r.platformapi,c=a.isLoading,s=a.isError,p=a.list,f=r.nodeItem.configuration,m=f.apiId,y=f.params,g=e.getFieldDecorator,v=s||0===p.length;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"draw-group"},l.a.createElement("div",{className:"draw-group-inner"},"可用API配置")),l.a.createElement(i.a.Item,{label:"API"},g("apiId",{initialValue:m,rules:[d.a.isRequire("API")]})(l.a.createElement(u.a,{showSearch:!0,placeholder:v?"暂无可用API":"请选择API",notFoundContent:"未找到相应记录",optionFilterProp:"children",loading:c,disabled:v||o,onChange:n.setParams2},p.map(function(e){var t=e.id,n=e.value;return l.a.createElement(u.a.Option,{value:t,key:t},n)})))),l.a.createElement("a",{className:"goto-dataasset",href:"#/userCenter/dataasset",target:"_blank"},"数据资产知识库管理"),void 0===m||t?null:l.a.createElement(i.a.Item,{label:"API入参"},l.a.createElement(Je.a,{readOnly:o,mode:"json",code:y,onChange:n.setParams})))},n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yr(e,t)}(t,c["Component"]),n=t,(r=[{key:"componentDidUpdate",value:function(){this.state.mustReCode&&this.setState({mustReCode:!1})}},{key:"render",value:function(){var e=this.props.nodeItem.id,t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sr(n,!0).forEach(function(t){pr(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sr(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},this.props,{log:void 0,render:this.getChildren});return l.a.createElement(s.a,lr({},t,{key:e}))}}])&&dr(n.prototype,r),o&&dr(n,o),t}(),initData:function(){return{apiId:void 0,params:"{\n}"}},validate:function(e,t,n){var r=e.apiId,o=e.params;return void 0===r?"平台API不能为空":!Ue.a.isJsonString(o)&&"参数格式应为结构体"},toData:function(e,t,n){return{dsId:e.apiId,params:e.params}},toConfiguration:function(e){var t=e.dsId;return{apiId:null===t?void 0:t,params:e.params}}};function vr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function br(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vr(n,!0).forEach(function(t){hr(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vr(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function hr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"b",function(){return Er}),n.d(t,"c",function(){return jr});var Or,wr=[{id:"eventTrigger",name:"触发事件",list:[r.a,P,Xn]},{id:"logicalJudgment",name:"逻辑处理",list:[se,Ie,Be,Xe,An,Jn]},{id:"seviceCall",name:"服务调用",list:[st,ht,gr]},{id:"output",name:"输出",list:[Ft]},{id:"message",name:"消息转发",list:[zt,an,ur]},{id:"data",name:"数据处理",list:[yn,Pn]}],Er=wr.filter(function(e){return"eventTrigger"===e.id})[0].list.map(function(e){return e.id}),jr=(Or={},wr.forEach(function(e){e.list.forEach(function(e){Or[e.id]=br({},e,{initData:function(){var t=e.initData;return t?t():{}},outputType:void 0!==e.outputType?e.outputType:p.l.AUTO,outputValue:void 0!==e.outputValue?e.outputValue:function(){return[]},canDrop:function(t,n,r,o){var a=e.canDrop||Ue.a.doNothing;return function(e,t,n,r,o,a){return e.nodeList.length>99&&"节点数量无法超出100个"}(t)||a(t,n,r,o,wr,jr)},afterConnect:e.afterConnect?e.afterConnect:Ue.a.doNothing,validate:function(t,n,r){var o=e.validate||function(){return!1};return function(e,t,n,r,o){return""===e.name?"名称不能为空":!d.a.nameTest.test(e.name)&&"名称不合法"}(t)||o(t,n,r,wr,jr)},toConfiguration:function(t){var n=e.initData,r=e.toConfiguration;return br({},n?n():{},{},r(t))}}),Or[e.nodeType]=Or[e.id]})}),Or);t.a=wr},ZShN:function(e,t,n){"use strict";n("pNMO"),n("4Brf"),n("ma9I"),n("2B1R"),n("sMBO"),n("0oug"),n("TeQF"),n("4mDm"),n("zKZe"),n("5DmW"),n("27RR"),n("NBAS"),n("tkto"),n("ExoC"),n("07d7"),n("PKPk"),n("FZtP"),n("3bBZ"),n("K4yd");var r=n("9yH6"),o=(n("tULf"),n("Vl3Y")),a=(n("1vPl"),n("5rEg")),i=n("q1tI"),u=n.n(i),c=n("CpnY"),l=(n("fbCW"),n("pjDv"),n("JfAA"),n("L/Qf"),n("2/Rp")),s=(n("2oDE"),n("CtXQ")),p=(n("k994"),n("NJEC")),d=(n("k3Gp"),n("kLXV")),f=(n("8QGh"),n("2fM7")),m=(n("8/o9"),n("tsqr")),y=n("LgsE"),g=n("be64");function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var E=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=h(this,(e=O(t)).call.apply(e,[this].concat(o)))).state={count:0},n.isSetCount=!1,n.setCount=function(e){n.setState({count:e.target.value.length})},n.onClose=function(){n.props.hide()},n.submit=function(){var e=n.props,t=e.form,r=e.id,o=e.list,a=e.submit,i=e.hide;t.validateFields().then(function(e){void 0===r&&o.find(function(t){return t.name===e.name})?m.a.error("参数名称不能与已有参数名称重复，请更改名称"):(a(e),i())}).catch(function(){m.a.error("请按要求进行输入")})},n}var n,l,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(t,i["Component"]),n=t,(l=[{key:"componentDidUpdate",value:function(){var e=this.props,t=e.isShow,n=e.id,r=e.list;if(t&&!this.isSetCount){this.isSetCount=!0;var o=(r.find(function(e){return e.id===n})||{}).description,a=void 0===o?"":o;this.setState({count:a.length})}else!t&&this.isSetCount&&(this.isSetCount=!1)}},{key:"render",value:function(){var e=this.state.count,t=this.props,n=t.isShow,i=t.id,l=t.list,s=t.form,p=l.find(function(e){return e.id===i})||{},m=p.name,v=void 0===m?"":m,b=p.type,h=void 0===b?g.x[0].id:b,O=p.isRequire,w=void 0===O?g.C[0].id:O,E=p.defaultValue,j=void 0===E?"":E,P=p.description,I=void 0===P?"":P,S=s.getFieldDecorator,C=void 0===i?"添加参数":"编辑入参",T=Object(c.c)("参数名称");return u.a.createElement(d.a,{title:C,width:320,wrapClassName:"draw-small-form",maskClosable:!1,visible:n,destroyOnClose:!0,onOk:this.submit,onCancel:this.onClose},u.a.createElement(o.a,c.b,u.a.createElement(o.a.Item,{label:T},S("name",{initialValue:v,rules:y.a.param("参数名称")})(u.a.createElement(a.a,{placeholder:"请输入参数名称"}))),u.a.createElement(o.a.Item,{label:"类型",required:!0},S("type",{initialValue:h})(u.a.createElement(f.a,{placeholder:"请选择类型",optionFilterProp:"children"},g.x.map(function(e){var t=e.id,n=e.value;return u.a.createElement(f.a.Option,{value:t,key:t},n)})))),u.a.createElement(o.a.Item,{label:"是否必填",required:!0},S("isRequire",{initialValue:w})(u.a.createElement(r.a.Group,null,g.C.map(function(e){var t=e.id,n=e.value;return u.a.createElement(r.a,{value:t,key:t},n)})))),u.a.createElement(o.a.Item,{label:"默认值"},S("defaultValue",{initialValue:j})(u.a.createElement(a.a,{placeholder:"请输入默认值"}))),u.a.createElement(o.a.Item,{label:"描述"},S("description",{initialValue:I})(u.a.createElement(a.a.TextArea,{placeholder:"请输入描述",maxLength:100,autoSize:{minRows:6,maxRows:6},onChange:this.setCount})),u.a.createElement("div",{className:"draw-count"},e,"/100"))))}}])&&b(n.prototype,l),s&&b(n,s),t}(),j=o.a.create({name:"ParamModal"})(E);function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function I(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function D(e,t){return!t||"object"!==P(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function L(e){return(L=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var _=1,A=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=D(this,(e=L(t)).call.apply(e,[this].concat(o)))).delAllParam=function(){var e=n.props,t=e.configuration.params,r=e.form,o=e.isRequire,a=void 0!==o&&o,i=e.change;t.length>0&&(i({params:[]}),a&&r&&r.setFieldsValue({__paramLen__:0}))},n.delParam=function(e){var t=n.props,r=t.configuration.params,o=t.form,a=t.isRequire,i=void 0!==a&&a;(0,t.change)({params:r=r.filter(function(t){return t.id!==e})}),i&&o&&o.setFieldsValue({__paramLen__:r.length})},n.hideParamModal=function(){n.props.change({showParamModal:!1,showParamId:void 0})},n.addParam=function(){n.props.change({showParamModal:!0,showParamId:void 0})},n.editParam=function(e){n.props.change({showParamModal:!0,showParamId:e})},n.saveParam=function(e){var t=n.props,r=t.configuration,o=r.params,a=r.showParamId,i=t.isRequire,u=void 0!==i&&i,c=t.form,l=t.change;if(a){var s=o.find(function(e){return e.id===a});s&&Object.assign(s,e)}else o.push(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(n,!0).forEach(function(t){C(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({id:_++},e));l({params:I(o),showParamId:void 0,showParamModal:!1}),u&&c&&c.setFieldsValue({__paramLen__:o.length})},n.getDel=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return r?t:u.a.createElement(p.a,{title:e,overlayClassName:"draw-confirm",okText:"删除",okType:"danger",getPopupContainer:function(){return document.body},cancelText:"取消",placement:"topRight",onConfirm:n},t)},n}var n,r,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(t,i["Component"]),n=t,(r=[{key:"render",value:function(){var e=this,t=this.props,n=t.readonly,r=t.isRequire,i=void 0!==r&&r,c=t.form,p=t.configuration,d=p.params,f=p.showParamModal,m=p.showParamId,y=0===d.length,g="draw-del"+(y?" disabled":""),v=y?null:u.a.createElement("div",{className:"draw-topic"},d.map(function(t){var r=t.id,o=t.name;return u.a.createElement("div",{className:"draw-topic-item",key:r},u.a.createElement("span",null,o),n?null:u.a.createElement("div",{className:"draw-topic-right"},u.a.createElement(s.a,{type:"edit",onClick:function(){return e.editParam(r)}}),e.getDel("您确定要删除当前参数吗？",u.a.createElement(s.a,{type:"close"}),function(){return e.delParam(r)})))}));return u.a.createElement(u.a.Fragment,null,u.a.createElement(o.a.Item,{label:"入参配置",required:i},i&&c?c.getFieldDecorator("__paramLen__",{initialValue:d.length,rules:[{pattern:/^[1-9]\d*$/,message:"入参不能为空"}]})(u.a.createElement(a.a,{type:"hidden"})):null,n?null:u.a.createElement("div",{className:g},this.getDel("您确定要删除所有参数吗？",u.a.createElement(s.a,{type:"delete",theme:"filled"}),this.delAllParam,y)),v,u.a.createElement(l.a,{block:!0,icon:"plus",onClick:this.addParam,disabled:n},"添加入参")),u.a.createElement(j,{isShow:f,id:m,list:d,hide:this.hideParamModal,submit:this.saveParam}))}}])&&T(n.prototype,r),c&&T(n,c),t}();function N(e){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function M(){return(M=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function V(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function R(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function F(e,t){return!t||"object"!==N(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function q(e){return(q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function B(e,t){return(B=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var J="Action",U=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,l=new Array(i),s=0;s<i;s++)l[s]=arguments[s];return(n=F(this,(e=q(t)).call.apply(e,[this].concat(l)))).onChange=function(e){var t=n.props,r=t.nodeItem.id;(0,t.changeNodeConfiguration)(r,e)},n.getChildren=function(e){var t=n.props,i=t.readonly,l=t.nodeItem.configuration,s=l.action,p=l.authCheck,d=e.getFieldDecorator,f=Object(c.c)(J,y.a.actionExplain);return u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:"draw-group"},u.a.createElement("div",{className:"draw-group-inner"},"请求配置")),u.a.createElement(o.a.Item,{label:f},d("action",{initialValue:s,rules:y.a.action(J)})(u.a.createElement(a.a,{placeholder:J+"为外部调用API的一个参数"}))),u.a.createElement(o.a.Item,{label:"是否鉴权",required:!0},d("authCheck",{initialValue:p})(u.a.createElement(r.a.Group,{disabled:i},g.b.map(function(e){var t=e.id,n=e.value;return u.a.createElement(r.a,{value:t,key:t},n)})))),u.a.createElement(A,{readonly:i,configuration:l,change:n.onChange}))},n}var n,l,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&B(e,t)}(t,i["Component"]),n=t,(l=[{key:"render",value:function(){var e=this.props.nodeItem.id,t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(n,!0).forEach(function(t){V(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},this.props,{log:void 0,render:this.getChildren});return u.a.createElement(c.a,M({},t,{key:e}))}}])&&R(n.prototype,l),s&&R(n,s),t}(),H=n("kEWA"),G={id:"httpEvent",name:"HTTP事件",nodeType:101,iconCls:"httpEvent",description:"通过HTTP请求触发规则",apiDocumentLink:"",canDrop:n("2jDL").a,entryNum:0,output:[1,1,1],configuration:U,outputType:H.l.LIST,outputValue:function(e,t){return g.k.concat((e.params||[]).map(function(e){var t=e.name;return{id:t,value:t}}))},initData:function(){return{action:"",params:[],showParamModal:!1,showParamId:void 0,authCheck:0}},validate:function(e,t,n){return""===e.action&&"action不能为空"},toData:function(e,t,n){var r=e.action,o=e.params;return{action:r,authCheck:e.authCheck,input:o.map(function(e){return{param_name:e.name,param_typ:e.type,param_required:e.isRequire,param_default:e.defaultValue,param_desc:e.description}})}},toConfiguration:function(e){var t=e.action,n=e.input,r=e.authCheck,o=-99;return{action:t||"",authCheck:r||0,params:n.map(function(e){var t=e.param_name,n=e.param_typ,r=e.param_required,a=e.param_default,i=e.param_desc;return{id:--o,name:t,type:n,isRequire:r,defaultValue:a,description:i}})}}};t.a=G},"a+Kn":function(e,t,n){"use strict";n("TeQF"),n("oVuX"),n("+2oP"),n("07d7"),n("5s+n"),n("TWNs"),n("JfAA"),n("Rm1S"),n("UxlC"),n("hByQ"),n("EnZy");var r=window,o=document,a=o.body,i=r.addEventListener,u=i?function(e,t,n){e.addEventListener(t,n,!1)}:function(e,t,n){e.attachEvent("on"+t,n)},c=i?function(e,t,n){e.removeEventListener(t,n,!1)}:function(e,t,n){e.detachEvent("on"+t,n)},l=a.classList?function(e,t){return e.classList.add(t)}:function(e,t){return e.className=e.className+" "+t},s=a.classList?function(e,t){return e.classList.remove(t)}:function(e,t){return e.className=e.className.split(" ").filter(function(e){return e!==t}).join(" ")},p=0,d=function(e){return e.replace(/\n/g,"").replace(/(^\s+|\s+$)/g,"")},f=function(e,t){var n=!0;try{var r=JSON.parse(d(e));n={}.toString.call(r)===t}catch(e){n=!1}return n},m={doNothing:function(){},getParamFormSearch:function(e){var t=null,n=r.location.search.slice(1).match(new RegExp("(^|&)"+e+"=([^&]*)(&|$)"));return null!==n&&(t=n[2]),t},addEvent:u,removeEvent:c,addClass:l,removeClass:s,getPopupContainerByMine:function(e){return e.parentNode},nowTime:65536,setUnique:function(e){p=e-65536},getUnique:function(){return++p+65536+""},idToNum:function(e){return+e.replace(/\D/g,"")},getCopyByPure:function(e){return JSON.parse(JSON.stringify(e))},countCenterPoint:function(e){var t=o.getElementById(e),n={x:0,y:0};if(t){var r=t.getBoundingClientRect(),a=r.left,i=r.right,u=r.bottom,c=r.top;n.x=(a+i)/2,n.y=(c+u)/2}return n},getJson:function(e){if("string"==typeof e)try{return JSON.parse(e)}catch(t){return e}return e},toTrim:d,isJsonString:function(e){return f(e,"[object Object]")},isArrayString:function(e){return f(e,"[object Array]")},delayForPromise:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return e.then(function(e){return new Promise(function(n){setTimeout(function(){n(e)},t)})}).catch(function(e){return new Promise(function(n,r){setTimeout(function(){r(e)},t)})})}};t.a=m},b9dg:function(e,t,n){"use strict";n.d(t,"x",function(){return o}),n.d(t,"C",function(){return a}),n.d(t,"M",function(){return i}),n.d(t,"s",function(){return u}),n.d(t,"n",function(){return c}),n.d(t,"N",function(){return l}),n.d(t,"L",function(){return s}),n.d(t,"r",function(){return p}),n.d(t,"q",function(){return d}),n.d(t,"m",function(){return f}),n.d(t,"l",function(){return m}),n.d(t,"J",function(){return y}),n.d(t,"I",function(){return g}),n.d(t,"G",function(){return v}),n.d(t,"P",function(){return b}),n.d(t,"w",function(){return h}),n.d(t,"B",function(){return O}),n.d(t,"A",function(){return w}),n.d(t,"z",function(){return E}),n.d(t,"K",function(){return j}),n.d(t,"Q",function(){return P}),n.d(t,"R",function(){return I}),n.d(t,"S",function(){return S}),n.d(t,"D",function(){return C}),n.d(t,"c",function(){return T}),n.d(t,"e",function(){return D}),n.d(t,"O",function(){return L}),n.d(t,"v",function(){return k}),n.d(t,"a",function(){return _}),n.d(t,"b",function(){return A}),n.d(t,"t",function(){return N}),n.d(t,"E",function(){return M}),n.d(t,"j",function(){return x}),n.d(t,"y",function(){return V}),n.d(t,"g",function(){return R}),n.d(t,"h",function(){return F}),n.d(t,"o",function(){return q}),n.d(t,"p",function(){return B}),n.d(t,"d",function(){return J}),n.d(t,"F",function(){return U}),n.d(t,"u",function(){return H}),n.d(t,"T",function(){return G}),n.d(t,"k",function(){return Q}),n.d(t,"i",function(){return W}),n.d(t,"H",function(){return Z}),n.d(t,"f",function(){return z});var r="drawview/",o=r+"INIT",a=r+"loading",i=r+"saveOK",u=r+"deployOK",c=r+"debugOK",l=r+"saving",s=r+"saved",p=r+"deploying",d=r+"deployed",f=r+"debugging",m=r+"debugged",y=r+"publishing",g=r+"published",v=r+"openpublish",b=r+"showDebugInput",h=r+"hideDebugInput",O=r+"listLoading",w=r+"listLoaded",E=r+"listLoadCrash",j=r+"read",P=r+"toggleChooser",I=r+"toggleConfiguration",S=r+"toggleLog",C=r+"logFullScreen",T=r+"changeLogHeight",D=r+"changeSearch",L=r+"showContextMenu",k=r+"hideContextMenu",_=r+"changeChooseId",A=r+"changeChooseLINEID",N=r+"drop",M=r+"move",x=r+"createLine",V=r+"lineTo",R=r+"connectCancel",F=r+"connectOK",q=r+"deleteLine",B=r+"deleteNode",J=r+"changeNodeConfiguration",U=r+"nodeError",H=r+"fullScreen",G=r+"undo",Q=r+"cutNode",W=r+"copyNode",Z=r+"pasteNode",z=r+"clearNode"},be64:function(e,t,n){"use strict";n.d(t,"r",function(){return i}),n.d(t,"n",function(){return u}),n.d(t,"k",function(){return l}),n.d(t,"A",function(){return s}),n.d(t,"z",function(){return p}),n.d(t,"E",function(){return d}),n.d(t,"C",function(){return m}),n.d(t,"x",function(){return y}),n.d(t,"y",function(){return g}),n.d(t,"m",function(){return v}),n.d(t,"a",function(){return b}),n.d(t,"s",function(){return h}),n.d(t,"v",function(){return O}),n.d(t,"l",function(){return w}),n.d(t,"j",function(){return E}),n.d(t,"b",function(){return j}),n.d(t,"u",function(){return P}),n.d(t,"B",function(){return I}),n.d(t,"t",function(){return S}),n.d(t,"c",function(){return C}),n.d(t,"d",function(){return T}),n.d(t,"f",function(){return D}),n.d(t,"e",function(){return L}),n.d(t,"w",function(){return k}),n.d(t,"g",function(){return _}),n.d(t,"i",function(){return A}),n.d(t,"h",function(){return N}),n.d(t,"D",function(){return M}),n.d(t,"q",function(){return x}),n.d(t,"o",function(){return V}),n.d(t,"p",function(){return R});n("fbCW"),n("+2oP"),n("rNhl"),n("hByQ"),n("FZtP");var r=n("kEWA"),o=n("wd/R"),a=n.n(o),i=-1,u="YYYY-MM-DD HH:mm:ss",c=function(e){var t={};return e.forEach(function(e){t[e.id]=e}),t},l=[{id:"",value:"全部"}],s=-1,p=[{id:s,value:"上一节点",type:r.l.AUTO,list:l}],d=[{id:r.g.Value,value:"固定值",disabled:!1},{id:r.g.Node,value:"来自节点",disabled:!1},{id:r.g.Param,value:"变量",disabled:!0}],f=c(d),m=[{id:r.o.Required,value:"必填项"},{id:r.o.Unrequired,value:"非必填项"}],y=[{id:r.m.String,value:"String（字符型）",text:"字符型"},{id:r.m.Int,value:"Int（整数型）",text:"整数型"},{id:r.m.Long,value:"Long（长整型）",text:"长整型"},{id:r.m.Float,value:"Float（浮点型）",text:"浮点型"},{id:r.m.Double,value:"Double（双精度）",text:"双精度"},{id:r.m.Boolean,value:"Boolean（布尔型）",text:"布尔型"}],g=c(y),v=[{id:0,value:"事件上报"},{id:1,value:"属性上报"},{id:2,value:"告警上报"},{id:3,value:"故障上报"}],b=[{id:r.k.BLANK,value:"空白模板"},{id:r.k.DEVICEACCESS,value:"设备接入"}],h=(c(b),[{id:"&&",value:"AND"},{id:"||",value:"OR"}]),O=(c(h),[{id:"GET",value:"GET"},{id:"POST",value:"POST"}]),w=[{id:"UTF-8",value:"UTF-8"},{id:"GBK",value:"GBK"}],E=[{id:r.d.Node,value:"选择节点输出"},{id:r.d.Value,value:"直接输入内容"}],j=[{id:r.r.NoNeed,value:"不鉴权"},{id:r.r.Need,value:"鉴权"}],P=[{id:r.s.Stream,value:"流"},{id:r.s.String,value:"字符串"}],I=(r.a.ProductMode,r.a.Node,[{id:r.n.ProductProtocol,value:"产品协议队列"},{id:r.n.UserDefine,value:"自定义队列"}]),S=[{id:0,value:"相加（输出值为数据源加上各参数的结果）"},{id:1,value:"相减（输出值为数据源依次减去各参数的结果）"},{id:2,value:"相乘（输出值为数据源依次乘以各参数的结果）"},{id:3,value:"相除（输出值为数据源依次除以各参数的结果）"},{id:4,value:"最大值（输出值为数据源与各参数中的较大值）"},{id:5,value:"最小值（输出值为数据源与各参数中的较小值）"},{id:6,value:"均值（输出值为数据源与各参数的均值）"}],C=(c(S),[{id:"1",value:"true",id2:1,value2:!0},{id:"0",value:"false",id2:0,value2:!1}]),T=c(C),D=[{id:r.q.Number,value:"数值型"},{id:r.q.Boolean,value:"布尔值"},{id:r.q.String,value:"字符串"},{id:r.q.Time,value:"时间型"}],L=[{id:r.q.Array,value:"数组"},{id:r.q.Object,value:"结构型"}],k=[{id:r.j.Get,value:"KV存储获取"},{id:r.j.Set,value:"KV存储写入"},{id:r.j.Delete,value:"KV存储删除"}],_=[{id:0,value:"=="},{id:1,value:"!="},{id:2,value:"<"},{id:3,value:"<="},{id:4,value:">"},{id:5,value:">="},{id:6,value:"null",value2:"为空"},{id:7,value:"!null",value2:"不为空"}],A=[6,7],N=c(_),M=[{code:200,message:"success"},{code:400,message:"request error."},{code:401,message:"request auth error."},{code:403,message:"request forbidden."},{code:404,message:"service not found."},{code:429,message:"too many requests."},{code:460,message:"request parameter error."},{code:500,message:"service error."},{code:503,message:"service not available."}],x=function(e,t,n,o){var a=f[e].value+" - ";return e===r.g.Value?(a="",t===r.q.Boolean?a+=T[n].value:t===r.q.Time?a+=n.format(u):a+=n):e===r.g.Node&&(a="",a+=(o.find(function(e){return e.id===t})||{value:"node.node_"+t}).value,n&&(a+="<"+n+">")),a},V=function(e,t,n,o,a){var i={target:e,targetType:void 0,targetValue:void 0};if(e===r.g.Value)i.targetType=t,t===r.q.Time?i.targetValue=n.format(u):t===r.q.Number?i.targetValue=(parseFloat(n)||0)+"":t===r.q.Array?i.targetValue=n||"[]":t===r.q.Object?i.targetValue=n||"{}":i.targetValue=n;else if(e===r.g.Node){i.targetType=0;var c=t===s?a:t;i.targetValue=(o[c]||o[a])+(n?"@"+n:"")}return i},R=function(e,t,n){var o={target:e,targetType:void 0,targetValue:void 0};if(e===r.g.Value)o.targetType=t,t===r.q.Time?o.targetValue=a()(n):o.targetValue=n;else if(e===r.g.Node){var i=n.search("@");i>-1?(o.targetType=n.slice(0,i),o.targetValue=n.slice(i+1)):(o.targetType=n,o.targetValue="")}return o}},cH4I:function(e,t,n){},d8kt:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n("hGlg"),o=n("Nlzp"),a=n("JPcv"),i=function(){return function(e,t){Object(o.c)(o.a.getUnreadQuantity,{},{needVersion:1.1}).then(function(t){var n=function(e){return{type:r.a,data:Object(a.fromJS)(e)}}(t.data);e(n)})}}},gtRY:function(e,t,n){"use strict";n("pNMO"),n("4Brf"),n("0oug"),n("ma9I"),n("TeQF"),n("fbCW"),n("pjDv"),n("yXV3"),n("4mDm"),n("oVuX"),n("2B1R"),n("ToJy"),n("sMBO"),n("qePV"),n("5DmW"),n("27RR"),n("tkto"),n("07d7"),n("4l63"),n("5s+n"),n("p532"),n("JfAA"),n("PKPk"),n("EnZy"),n("FZtP"),n("3bBZ"),n("8/o9");var r=n("tsqr"),o=(n("k3Gp"),n("kLXV")),a=n("b9dg"),i=n("kEWA"),u=n("V0bm"),c=n("a+Kn"),l=n("J76n"),s=n("be64"),p=n("Nlzp"),d=n("Bffz");function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(n,!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g=d.b+"/serveOpe",v=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Object(p.d)(g+(t?"/getFlowStub":"/editFlow"),e)},b=function(e){return c.a.delayForPromise(Object(p.d)(g+"/saveFlow",e,{needJson:!0,noInstance:!0}))},h=function(e){return c.a.delayForPromise(Object(p.d)(g+"/publish",e,{timeout:3e5}))},O=function(e){return Object(p.d)(d.b+"/prod/getProduct",e).then(function(e){return{code:e.code,data:((e.data||{}).list||[]).map(function(e){return m({},e,{id:e.productId,value:e.productName})})}})},w=function(e){return Object(p.d)(g+"/getApiList",e).then(function(e){return{code:e.code,data:(e.data||[]).map(function(e){var t={};return(c.a.getJson(e.input).input||[]).forEach(function(e){var n=e.param_name,r=e.param_default;t[n]=r}),m({},e,{id:e.flowId,value:e.flowName,params:JSON.stringify(t)})})}})},E=function(e){return Object(p.d)(d.b+"/data/assets/getList",e).then(function(e){var t=e.code,n=e.data;return{code:t,data:(void 0===n?{list:[]}:n).list.map(function(e){var t={},n=c.a.getJson(e.dataJson)[0];return(n.param||[]).forEach(function(e){var n=e.name,r=e.defaultVal;t[n]=r}),{id:e.id,value:e.name,addr:n.addr,params:JSON.stringify(t)}})}})},j=function(e){return Object(p.d)(d.b+"/data/assets/getTopic",e).then(function(e){return{code:e.code,data:(e.data||[]).map(function(e){return m({},e,{id:e.id,value:e.name})})}})},P=n("ZShN");function I(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function S(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(n,!0).forEach(function(t){L(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function L(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"z",function(){return k}),n.d(t,"I",function(){return x}),n.d(t,"y",function(){return V}),n.d(t,"D",function(){return q}),n.d(t,"r",function(){return H}),n.d(t,"F",function(){return G}),n.d(t,"m",function(){return Q}),n.d(t,"J",function(){return Z}),n.d(t,"K",function(){return z}),n.d(t,"M",function(){return K}),n.d(t,"L",function(){return Y}),n.d(t,"c",function(){return X}),n.d(t,"e",function(){return $}),n.d(t,"s",function(){return ee}),n.d(t,"B",function(){return te}),n.d(t,"k",function(){return ne}),n.d(t,"A",function(){return re}),n.d(t,"h",function(){return oe}),n.d(t,"i",function(){return ae}),n.d(t,"H",function(){return ie}),n.d(t,"x",function(){return ue}),n.d(t,"q",function(){return ce}),n.d(t,"p",function(){return le}),n.d(t,"a",function(){return se}),n.d(t,"b",function(){return pe}),n.d(t,"d",function(){return de}),n.d(t,"C",function(){return fe}),n.d(t,"t",function(){return me}),n.d(t,"l",function(){return ye}),n.d(t,"j",function(){return ge}),n.d(t,"E",function(){return ve}),n.d(t,"N",function(){return be}),n.d(t,"f",function(){return he}),n.d(t,"v",function(){return Oe}),n.d(t,"w",function(){return we}),n.d(t,"u",function(){return Pe}),n.d(t,"n",function(){return Ie}),n.d(t,"o",function(){return Se}),n.d(t,"g",function(){return Ce}),n.d(t,"G",function(){return Te});var k=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(r){r(_(parseInt(e)||0,parseInt(t)||0,n)),r(J(t,!0,n)),r(W(O,{projectId:e,pageRows:9999},"product")),r(W(w,{projectId:e,serviceId:t},"api")),r(W(E,{type:3,pageRows:9999},"platformapi")),r(W(j,{type:5},"rocketMQTopic")),r(W(j,{type:1},"mqTopic")),r(W(j,{type:2},"database")),r(W(j,{type:4},"redis"))}},_=function(e,t,n){return{type:a.x,projectId:e,serviceId:t,readonly:n}},A=function(){return{type:a.C,isLoading:!0}},N=function(){return{type:a.C,isLoading:!1}},M=function(e,t,n){return{type:a.M,root:e,action:t,authCheck:n}},x=function(){return{type:a.P}},V=function(){return{type:a.w}},R=function(){return{type:a.N}},F=function(){return{type:a.L}},q=function(e){return{type:a.G,isopenPublish:e}},B=!1,J=function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(i){n&&(B=!1);var u=function(){B?o.a.error({title:"关键数据--节点编排数据再次读取失败，请联系相关开发人员。",centered:!0,zIndex:1080}):o.a.confirm({title:"关键数据--节点编排数据读取失败，是否重新获取？",centered:!0,okText:"好的",cancelText:"取消",zIndex:1080,onOk:function(){B=!0,i(e(t,!1,r))}})};i(A()),v({serviceId:t},r).then(function(e){var t=e.data;if(0===e.code){var n=t||{},o=n.serveName,c=n.flowName,l=n.flowNodeList,s=t||{},p=s.action,d=s.authCheck,f=s.flowId,m=s.projectName,y=s.testEnv,g=s.proEnv,v=s.lines;r&&(v=t.flowVersion&&t.flowVersion.lines),i({type:a.K,action:p,authCheck:d,flowId:f,productionName:o||c||m,nodeList:l||[],lineList:v||"[]",testEnv:y,proEnv:g})}else u()}).catch(u).finally(function(){i(N())})}},U=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(n){var o=t?"发布":"保存",a=o+"失败";n(R());var i=e.nodes[0].id+"",u=e.authCheck,c=e.action;b(e).then(function(e){e.data;0===e.code?(t||r.a.success(o+"成功"),n(M(i,c,u)),t&&n(H(t||{}))):r.a.error(a)}).catch(function(){r.a.error(a)}).finally(function(){n(F())})}},H=function(e){return function(t){t({type:a.r}),h(D({},e,{funcType:0,envType:1,operate:3})).then(function(e){e.data;0===e.code?(r.a.success("部署成功，请点击调试按钮进行调试"),t({type:a.s})):r.a.error("部署失败")}).catch(function(){r.a.error("部署失败")}).finally(function(){t({type:a.q})})}},G=function(e){return function(t){t({type:a.J}),h(D({},e,{funcType:0,envType:0,operate:3})).then(function(e){0===e.code?r.a.success("正式环境发布成功"):r.a.error("发布正式环境失败")}).catch(function(){r.a.error("发布正式环境失败")}).finally(function(){t({type:a.I})})}},Q=function(e){return function(t){t({type:a.m}),function(e){return c.a.delayForPromise(Object(p.d)(g+"/invoke",e,{timeout:3e5}))}(D({},e,{funcType:0,envType:1})).then(function(e){t({type:a.n,data:e})}).catch(function(e){e.debugLog?t({type:a.n,data:e}):r.a.error("调试异常")}).finally(function(){t({type:a.l})})}},W=function(e,t,n){return function(r){r({type:a.B,listKey:n}),e(t).then(function(e){var t=e.data,o=e.code;r(0===o?{type:a.A,listKey:n,list:t}:{type:a.z,listKey:n})}).catch(function(){r({type:a.z,listKey:n})})}},Z=function(){return{type:a.Q}},z=function(){return{type:a.R}},K=function(){return{type:a.S}},Y=function(){return{type:a.D}},X=function(e){return{type:a.c,logHeight:e}},$=function(e){return{type:a.e,searchText:e}},ee=function(e,t,n){return{type:a.t,nodeType:e,x:t,y:n}},te=function(e,t,n,r){return{type:a.E,nodeId:e,x:t,y:n,isMoveStart:r}},ne=function(e,t,n){return{type:a.j,startPoint:e,startNodeId:t,startOutputId:n}},re=function(e,t,n){return{type:a.y,currentOutputId:e,x:t,y:n}},oe=function(e){return{type:a.g,currentOutputId:e}},ae=function(e,t,n,r){return{type:a.h,currentOutputId:e,toId:t,entryId:n,nodeType:r}},ie=function(e,t,n,r){return{type:a.O,showType:e,id:t,x:n,y:r}},ue=function(){return{type:a.v}},ce=function(){return{type:a.p}},le=function(){return{type:a.o}},se=function(e){return{type:a.a,id:e}},pe=function(e){return{type:a.b,id:e}},de=function(e,t){return{type:a.d,nodeId:e,config:t}},fe=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return{type:a.F,nodeId:e,isError:t}},me=function(){return{type:a.u}},ye=function(){return{type:a.k}},ge=function(){return{type:a.i}},ve=function(){return{type:a.H}},be=function(){return{type:a.T}},he=function(){return{type:a.f}},Oe=function(e,t){var n=t[e||""]||{configuration:{params:[]}},r=n.nodeType,o=n.configuration.params,a=r===P.a.id;return{isHTTP:a,params:a?o:[]}},we=function(e,t){for(var n=s.z.concat([]),r=(e||{}).pId;r;){var o=t[r],a=o.pId,i=o.id,c=o.nodeType,l=o.configuration,p=u.a[c],d=p.outputType,f=p.outputValue;n.push({id:i,value:l.name,type:d,list:f(l,t[r])}),r=a}return n},Ee=function(e){return e.configuration.output.filter(function(e){return e.connectId}).map(function(e){return e.connectId})},je=function(e,t){for(var n=e,r=Ee(n),o=r.length;o>0;)n=t[r[o-1]],o=(r=Ee(n)).length;return n},Pe=function(e){var t=e.configuration.output.length;return t<=1?32:18*t},Ie=function(e,t){var n={},r={},o=c.a.nowTime,a=function(e){var t=Number(e);t>o&&(o=t)},i=e[0]?e[0].nodeId+"":null,l=e.map(function(e){var t=e.nodeId,n=e.nodeName,o=e.nodeType,i=e.pNodeId,c=e.location,l=e.input,s=u.a[o],p=s.id,d=s.toConfiguration,f=c.split("|"),m=C(f[0].split(","),2),y=m[0],g=m[1],v=""===f[3]?[]:f[3].split(";"),b=f[4]&&f[4].split(";").map(function(e){return e.split(",")})||[],h={id:t+"",nodeType:p,x:parseInt(y),y:parseInt(g),entryId:f[1]||null,pId:0!==i&&i?i+"":null,pOutputId:f[2]||null,pIdpOutputIdSpare:b,isError:!1,configuration:D({},d(JSON.parse(l)),{name:n,output:v.map(function(e){var t=C(e.split(","),3),n=t[0],r=t[1],o=t[2];return a(n),{id:n,connectId:r||void 0,connectEntryId:o||void 0}})})};return r[t]=h,h});return t.forEach(function(e){n[e.outputId]=e,a(e.uniqueId)}),c.a.setUnique(o),{root:i,nodeList:l,nodeMap:r,lineList:t,lineMap:n,mustSave:0===l.length}},Se=function(e){var t,n,o={code:-1,msg:"error",data:null},a={},c=[];try{var l=e.code,s=e.data,p=e.msg,d=e.debugLog;if(t="string"==typeof d?JSON.parse(d):d,o.code=l,o.msg=p,o.data=s,n=t,"[object Array]"==={}.toString.call(t)){var f={};n.forEach(function(e,t){var n=e.nodeId,r=e.nodeType,o=e.nodeName,l=e.nodeInput,s=e.takeUpTime,p=e.nodeOutput,d=e.nodeDebug,m=S(e,["nodeId","nodeType","nodeName","nodeInput","takeUpTime","nodeOutput","nodeDebug"]);f[n]=D({},m),f[n]["节点Id"]=n,f[n]["节点类型"]=(u.a[r]||{}).name||"未知类型",f[n]["节点名称"]=o,f[n]["节点输入"]=l,f[n]["节点输出"]=p,f[n]["耗时"]=s,f[n]["调试日志"]=d,c.push(f[n]),a[n]={code:i.b.Success,data:f[n]}}),r.a.success("调试"+(0===l?"成功":"完成")+"，请查阅相关日志")}else r.a.error("节点具体调试信息空缺")}catch(e){r.a.error("调试数据解析失败")}return{debuggedData:n,debuggedMap:a,debuggedResult:o,debuggedOutput:c}},Ce=function(e,t,n,r){var o=I(e),a=D({},t),i=I(n),s=D({},r),p=[],d=[];o.forEach(function(e){e.deep=void 0;var t=e.pId,n=e.configuration.output;t||(0===n.filter(function(e){return e.connectId}).length?p.push(e):d.push(e))});var f=50;return p.sort(function(e,t){return c.a.idToNum(e.id)-c.a.idToNum(t.id)}).forEach(function(e,t){e.x=50+(u.m-10)*t,e.y=50,f=Math.max(90+Pe(e)+50,f)}),d.sort(function(e,t){return c.a.idToNum(e.id)-c.a.idToNum(t.id)}).forEach(function(e,t){var n=f,r={};!function e(t,o){var i=a[t];if(void 0===i.deep){!r[o]&&(r[o]=[]),r[o].push(i),i.deep=o,i.x=50+o*(u.m+44),i.y=0,i.height=Pe(i);var c=Ee(i);c.length>0?c.forEach(function(t){return e(t,o+1)}):(i.top=n,i.bottom=n+i.height,n=i.bottom+44)}}(e.id,0);var o=function e(t){var n=a[t],r=function(e,t){for(var n=e,r=Ee(n);r[0];)n=t[r[0]],r=Ee(n);return n}(n,a).top,o=je(n,a).bottom;n.top=r,n.bottom=o,n.y=(r+o)/2-n.height/2;var i=Ee(n);i.length>0&&i.forEach(function(t){return e(t)})};o(e.id);var i=!1;Object.keys(r).sort(function(e,t){return+t-+e}).forEach(function(e){r[e].forEach(function(e){var t=e.y-e.top;if(t<-22){i=!0;var n=je(e,a);n.bottom=n.bottom+(-t-22)}})}),i&&o(e.id);var c=je(e,a);f=c.y+(c.height||0)+90}),i.forEach(function(e){return l.a.resetLine(e,a)}),{nodeList:o,nodeMap:a,lineList:i,lineMap:s}},Te=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(n){var r=ke(e),o=r.error,a=r.id;if(o)a.length>0&&n(fe(a,!0));else{var i=_e(e);n(U(i,!!t&&D({},t,{serviceId:e.serviceId})))}}},De=function(e){e.forEach(function(e){r.a.error(e)})},Le=function(e,t){return"编排的节点【".concat(e,"】").concat(t)},ke=function(e){var t={error:!1,id:[]},n=e.nodeList;if(0===n.length)return t.error=!0,De(["总得画点什么吧"]),t;for(var r=0,o=0,a=[],i=0;i<n.length;i++){var c=n[i],l=c.id,s=c.entryId,p=c.pId,d=c.nodeType,f=c.configuration,m=u.a[d].validate(f,c,e);if(m&&(t.error=!0,t.id.push(l),a.push(Le(f.name,m))),(r+=null===s||s&&!p?1:0)>1){t.error=!0,t.id=[],a=["只允许一条编排流"];break}o+=u.h.indexOf(d)>-1?1:0}return t.error?(a.length>0&&De(a),t):1!==o?(t.error=!0,t.id=[],De(["至少需要一个触发事件"]),t):t},_e=function(e){var t=e.action,n=e.authCheck,r=e.flowId,o=e.projectId,a=e.serviceId,i=e.nodeList,c=e.nodeMap,l=e.lineList,s={projectId:o,serviceId:a,flowId:r,action:"",authCheck:n||0,oriAction:t||"",nodes:[],lines:""},p={},d={};console.log("post rst.nodes----:",s.nodes);var f=i.find(function(e){return null===e.entryId});f&&(f.nodeType===P.a.id&&(s.action=f.configuration.action||"",s.authCheck=f.configuration.authCheck||0),function t(n){var r=n.id,o=n.nodeType,a=n.entryId,i=n.pId,l=n.configuration,f=u.a[o].toData(l,n,e,p,d);p[r]=r,d[r]=r;var m={id:parseInt(r),nodeName:l.name,nodeType:u.a[o].nodeType,pid:null!==i?parseInt(p[i]):i,location:"",output:"",input:JSON.stringify(f)};s.nodes.push(m),a&&(p[a]=a),l.output.forEach(function(e){var n=e.id,r=e.connectId;p[n]=n,r&&t(c[r])})}(f)),s.nodes.forEach(function(e){var t=e.id,n=c[d[t]],r=n.x,o=n.y,a=n.entryId,i=n.pOutputId,u=n.configuration.output,l=n.pIdpOutputIdSpare.map(function(e){return e.join(",")}).join(";");e.location=[r+","+o,p[a],p[i],u.map(function(e){var t=e.id,n=e.connectId,r=e.connectEntryId;return[p[t],p[n+""],p[r+""]].join(",")}).join(";"),l].join("|")});var m=l.map(function(e){var t=e.uniqueId,n=e.id,r=e.outputId,o=e.toId,a=e.entryId;return D({},e,{uniqueId:t,id:p[n],outputId:p[r],toId:o?p[o]:null,entryId:a?p[a]:null})});return s.lines=JSON.stringify(m),s}},hGlg:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r="update-new-message-nums"},"k+EZ":function(e,t,n){"use strict";n.d(t,"a",function(){return j});n("pNMO"),n("4Brf"),n("0oug"),n("ma9I"),n("yXV3"),n("4mDm"),n("2B1R"),n("sMBO"),n("NBAS"),n("ExoC"),n("07d7"),n("PKPk"),n("3bBZ"),n("k3Gp");var r,o=n("kLXV"),a=(n("K4yd"),n("9yH6")),i=(n("2oDE"),n("CtXQ")),u=n("q1tI"),c=n.n(u),l=n("Ty5D"),s=n("55Ip"),p=n("Nlzp"),d=n("Q2AE"),f=n("EZYW"),m=(n("3d2c"),n("nWR2")),y=n.n(m),g=n("0l34"),v=n.n(g);function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var j=Object(l.i)(r=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=O(this,(e=w(t)).call.apply(e,[this].concat(o)))).state={instanceMod:!1,curInstanceId:localStorage.getItem("superInstanceId")},n.logout=function(){Object(p.d)(p.a.logout,{},{loading:!0}).then(function(){d.a.dispatch(Object(f.updateProductListAction)({list:[],pager:{}})),window.location=window.location.origin+window.location.pathname+"#/account/login",localStorage.removeItem("menuList")})},n.getCurInstancenam=function(){var e=localStorage.getItem("superInstanceId"),t=n.props.instanceList||[];for(var r in t)if(t[r].id==e)return t[r].name;return"--"},n.instanceModSwitch=function(e){n.setState({instanceMod:e})},n.changeInstance=function(e){var t=e.target.value;n.setState({curInstanceId:t})},n.getNewPath=function(){for(var e=location.hash,t="",n=0,r=["/open/base/product","/open/developCenter/projectManage","/open/base/device","/open/bigData","/open/base/application"];n<r.length;n++){var o=r[n];if(-1!=e.indexOf(o)){t=o;break}}return t},n.okChange=function(){var e=n.state.curInstanceId,t=localStorage.getItem("superInstanceId");if(n.instanceModSwitch(!1),e!=t){localStorage.setItem("superInstanceId",e);var r=n.getNewPath();r?n.props.history.push({pathname:r}):location.reload()}},n}var n,r,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(t,u["PureComponent"]),n=t,(r=[{key:"render",value:function(){var e=this.state,t=e.instanceMod,n=e.curInstanceId,r=this.props,u=(r.collapsed,r.setCollapsed,r.onlyLogo),l=r.developerInfo,p=void 0===l?{}:l,d=r.newMessageNums,f=void 0===d?{}:d,m=(r.noCollapsed,r.instanceList),g=p.email,b=p.account,h=p.isSubUser,O=f.totalUnRead,w="",E={display:"block",height:"30px",lineHeight:"30px"};return O&&(w+=" nums-wrapper",O>99&&(O="99+",w+=" max-num")),c.a.createElement("header",{className:"page-header"},c.a.createElement("section",{className:"logo"},c.a.createElement("img",{src:y.a,alt:"logo"}),c.a.createElement("span",null,"物联网云平台")),!u&&c.a.createElement(c.a.Fragment,null,c.a.createElement("section",{className:"user-icon-wrapper"},c.a.createElement("img",{src:v.a,alt:"用户头像",className:"user-img"}),c.a.createElement(i.a,{type:"caret-down"}),c.a.createElement("div",{className:"menus-wrapper"},c.a.createElement("div",{className:"icon-base-info"},c.a.createElement("span",{className:"single-text",style:{flex:1}},g||b||"未获取到邮箱"),c.a.createElement("span",{className:"right",onClick:this.logout},c.a.createElement(i.a,{type:"logout"})," 退出")),c.a.createElement("div",{className:"user-menus"},c.a.createElement("div",{className:"menus-item"},c.a.createElement(s.b,{to:"/userCenter/info",target:"_blank"},c.a.createElement("span",null,c.a.createElement(i.a,{type:"user"})," 基本资料"))),0===h&&c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"menus-item"},c.a.createElement(s.b,{to:"/userCenter/security",target:"_blank"},c.a.createElement("span",null,c.a.createElement(i.a,{type:"safety-certificate"})," 安全设置"))),c.a.createElement("div",{className:"menus-item"},c.a.createElement(s.b,{to:"/userCenter/visit",target:"_blank"},c.a.createElement("span",null,c.a.createElement(i.a,{type:"team"})," 访问用户"))),c.a.createElement("div",{className:"menus-item"},c.a.createElement(s.b,{to:"/userCenter/role",target:"_blank"},c.a.createElement("span",null,c.a.createElement(i.a,{type:"cluster"})," 用户角色"))),c.a.createElement("div",{className:"menus-item"},c.a.createElement(s.b,{to:"/userCenter/log",target:"_blank"},c.a.createElement("span",null,c.a.createElement(i.a,{type:"snippets"})," 操作日志"))),c.a.createElement("div",{className:"menus-item"},c.a.createElement(s.b,{to:"/userCenter/case",target:"_blank"},c.a.createElement("span",null,c.a.createElement(i.a,{type:"snippets"})," 实例管理"))),c.a.createElement("div",{className:"menus-item"},c.a.createElement(s.b,{to:"/userCenter/authorize",target:"_blank"},c.a.createElement("span",null,c.a.createElement(i.a,{type:"snippets"})," 授权管理"))),c.a.createElement("div",{className:"menus-item"},c.a.createElement(s.b,{to:"/userCenter/dataasset",target:"_blank"},c.a.createElement("span",null,c.a.createElement(i.a,{type:"snippets"})," 数据资产"))))))),c.a.createElement("section",{className:"message-icon"},c.a.createElement(s.b,{to:"/messageCenter",target:"_blank"},c.a.createElement(i.a,{type:"sound","data-nums":O,className:w}))),c.a.createElement("section",{className:"instance"},c.a.createElement("span",{className:"instancenam"},this.getCurInstancenam()),m&&m.length>0&&c.a.createElement("span",{className:"btn",onClick:this.instanceModSwitch.bind(this,!0)},"切换实例"))),m&&m.length>0&&c.a.createElement(o.a,{title:"切换实例",visible:t,width:400,className:"instanceMod",onOk:this.okChange,onCancel:this.instanceModSwitch.bind(this,!1)},c.a.createElement(a.a.Group,{value:n,onChange:this.changeInstance},m.map(function(e,t){return c.a.createElement(a.a,{style:E,key:e.id+"_"+t,value:e.id},e.name)}))))}}])&&h(n.prototype,r),l&&h(n,l),t}())||r},kEWA:function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"m",function(){return o}),n.d(t,"q",function(){return a}),n.d(t,"i",function(){return i}),n.d(t,"g",function(){return u}),n.d(t,"l",function(){return c}),n.d(t,"k",function(){return l}),n.d(t,"c",function(){return s}),n.d(t,"d",function(){return p}),n.d(t,"r",function(){return d}),n.d(t,"s",function(){return f}),n.d(t,"o",function(){return m}),n.d(t,"a",function(){return y}),n.d(t,"n",function(){return g}),n.d(t,"j",function(){return v}),n.d(t,"p",function(){return b}),n.d(t,"h",function(){return h}),n.d(t,"e",function(){return O}),n.d(t,"f",function(){return w});var r,o,a,i,u,c,l,s,p,d,f,m,y,g,v,b,h,O,w;n("6+LV");!function(e){e[e.Success=0]="Success",e[e.Failure=1]="Failure"}(r||(r={})),function(e){e[e.String=0]="String",e[e.Int=1]="Int",e[e.Long=2]="Long",e[e.Float=3]="Float",e[e.Double=4]="Double",e[e.Boolean=5]="Boolean",e[e.Enum=6]="Enum"}(o||(o={})),function(e){e[e.Number=0]="Number",e[e.Boolean=1]="Boolean",e[e.String=2]="String",e[e.Time=3]="Time",e[e.Array=4]="Array",e[e.Object=5]="Object"}(a||(a={})),function(e){e[e.Source=0]="Source",e[e.Target=1]="Target"}(i||(i={})),function(e){e[e.Value=0]="Value",e[e.Node=1]="Node",e[e.Param=2]="Param"}(u||(u={})),function(e){e[e.AUTO=0]="AUTO",e[e.LIST=1]="LIST"}(c||(c={})),function(e){e[e.BLANK=0]="BLANK",e[e.DEVICEACCESS=1]="DEVICEACCESS"}(l||(l={})),function(e){e[e.StartPoint=0]="StartPoint",e[e.EndPoint=1]="EndPoint"}(s||(s={})),function(e){e[e.Node=0]="Node",e[e.Value=1]="Value"}(p||(p={})),function(e){e[e.NoNeed=0]="NoNeed",e[e.Need=1]="Need"}(d||(d={})),function(e){e[e.Stream=1]="Stream",e[e.String=2]="String"}(f||(f={})),function(e){e[e.Required=0]="Required",e[e.Unrequired=1]="Unrequired"}(m||(m={})),function(e){e[e.ProductMode=0]="ProductMode",e[e.Node=1]="Node"}(y||(y={})),function(e){e[e.ProductProtocol=0]="ProductProtocol",e[e.UserDefine=1]="UserDefine"}(g||(g={})),function(e){e[e.Get=0]="Get",e[e.Set=1]="Set",e[e.Delete=2]="Delete"}(v||(v={})),function(e){e[e.Developing=0]="Developing",e[e.Compiled=1]="Compiled",e[e.Running=2]="Running",e[e.Stopped=3]="Stopped",e[e.Deleted=4]="Deleted",e[e.Debugging=999]="Debugging"}(b||(b={})),function(e){e.NULL="",e.PUTIN="putIn",e.MOVE="move",e.CONNECT="connect",e.LOG="log"}(h||(h={})),function(e){e.NULL="",e.NODE="node",e.LINE="line",e.CONTEXT="context"}(O||(O={})),function(e){e.CUT="cut",e.COPY="copy"}(w||(w={}))},kRHp:function(e,t,n){"use strict";n("pNMO"),n("4Brf"),n("0oug"),n("ma9I"),n("TeQF"),n("4mDm"),n("5DmW"),n("27RR"),n("NBAS"),n("tkto"),n("ExoC"),n("07d7"),n("PKPk"),n("FZtP"),n("3bBZ"),n("qNb/");var r=n("PArb"),o=(n("L/Qf"),n("2/Rp")),a=(n("8/o9"),n("tsqr")),i=(n("Aosp"),n("diRs")),u=n("q1tI"),c=n.n(u),l=n("/MKj"),s=(n("2B1R"),n("sMBO"),n("rNhl"),n("4l63"),n("k3Gp"),n("kLXV")),p=(n("tULf"),n("Vl3Y")),d=(n("8QGh"),n("2fM7")),f=(n("1vPl"),n("5rEg")),m=n("LgsE"),y=n("kEWA"),g=n("be64");function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var E="参数值格式不正确",j=/^-?[1-9]\d*$/,P=/^-?(([1-9]\d*\.?\d*)|(0\.[^.]*))$/,I={labelCol:{xs:{span:4},sm:{span:4}},wrapperCol:{xs:{span:20},sm:{span:20}}},S=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=h(this,(e=O(t)).call.apply(e,[this].concat(o)))).onClose=function(){n.props.hide()},n.submit=function(){var e=n.props,t=e.form,r=e.serviceId,o=e.params,i=e.debug,u=e.hide;t.validateFields().then(function(e){o.forEach(function(t){var n=t.name,r=t.type;r===y.m.Boolean?e[n]=g.d[e[n]].value2:r===y.m.Int||r===y.m.Long?e[n]=parseInt(e[n]):r!==y.m.Float&&r!==y.m.Double||(e[n]=parseFloat(e[n]))}),i({serviceId:r,jsonData:JSON.stringify(e)}),u()}).catch(function(){a.a.error("请按要求进行输入")})},n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(t,u["Component"]),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.isShow,n=e.params,r=e.form.getFieldDecorator;return c.a.createElement(s.a,{title:"入参配置",width:480,wrapClassName:"draw-small-form",maskClosable:!1,visible:t,destroyOnClose:!0,onOk:this.submit,okText:"开始调试",onCancel:this.onClose},c.a.createElement(p.a,I,c.a.createElement("div",{className:"draw-params"},n.map(function(e){var t=e.name,n=e.type,o=e.isRequire,a=e.defaultValue,i=[],u=n===y.m.Boolean,l=n===y.m.String,s=u?"请选择布尔值":"请输入"+(l?"字符串":"数值（"+g.y[n].text+"）"),v=c.a.createElement(f.a,{placeholder:s}),b=a||"";return o===y.o.Required&&i.push(m.a.isRequire("参数值")),n===y.m.Int?(v=c.a.createElement(f.a,{placeholder:s,maxLength:16}),i.push(m.a.checkRules(j,E))):n===y.m.Long?i.push(m.a.checkRules(j,E)):n===y.m.Float||n===y.m.Double?i.push(m.a.checkRules(P,E)):u&&(b=g.c[0].id2,v=c.a.createElement(d.a,{placeholder:s},g.c.map(function(e){var t=e.id2,n=e.value;return c.a.createElement(d.a.Option,{value:t,key:t},n)}))),c.a.createElement(p.a.Item,{label:t,key:t},r(t,{initialValue:b,rules:i})(v))}))))}}])&&b(n.prototype,r),o&&b(n,o),t}(),C=p.a.create({name:"DebugInputModal"})(S),T=n("gtRY"),D=Object(l.b)(function(e){var t=e.get("drawView"),n=t.serviceId,r=t.showDebugInput,o=t.root,a=t.nodeMap,i=Object(T.v)(o,a);return{isShow:r,serviceId:n,isHTTP:i.isHTTP,params:i.params}},function(e){return{hide:function(){return e(Object(T.y)())},debug:function(t){return e(Object(T.m)(t))}}})(C),L=n("54Vy");function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(n,!0).forEach(function(t){N(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function N(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function M(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function x(e,t){return!t||"object"!==k(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function V(e){return(V=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function R(e,t){return(R=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,"a",function(){return F});var F=function(e){var t=e.content,n=e.children;return c.a.createElement(i.a,{content:t,mouseEnterDelay:.3,overlayClassName:"draw-popover"},n)},q=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=x(this,(e=V(t)).call.apply(e,[this].concat(o)))).save=function(){var e=n.props;(0,e.save)(e.state)},n.debug=function(){var e=n.props,t=e.debug,r=e.showParamsModal,o=e.serviceId,i=e.isHTTP,u=e.params;i?0===u.length?t({serviceId:o,jsonData:"{}"}):r():a.a.warn("很抱歉，该触发事件暂不支持调试")},n.openPublish=function(e){n.props.openPublish(e)},n.publishOkHandle=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n.openPublish(0);var t=n.props,r=t.isopenPublish,o=t.serviceId,a=t.mustSave,i=t.state,u=t.save,c=t.publish,l=t.deploy;1===r?a?u(i,A({},e)):l(A({serviceId:o},e)):2===r&&c(A({serviceId:o},e))},n}var n,i,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&R(e,t)}(t,u["Component"]),n=t,(i=[{key:"render",value:function(){var e=this,t=this.props,n=t.productionName,a=t.mustSave,i=t.testEnv,u=t.stackHistory,l=t.isSaving,s=t.isInDeploy,p=t.isInDebug,d=t.isInPublish,f=t.isopenPublish,m=t.serviceId,g=t.undo,v=t.clearNode,b=u.length>0,h=a||l||s||p||i<y.p.Running,O=a||l||s||d||i<y.p.Running;return c.a.createElement("div",{className:"draw-top"},c.a.createElement("span",null,n),c.a.createElement("div",{className:"draw-tools"},c.a.createElement(F,{content:"撤销"},c.a.createElement(o.a,{shape:"circle",icon:"rollback",disabled:!b,onClick:b?g:void 0})),c.a.createElement(F,{content:"整理节点"},c.a.createElement(o.a,{shape:"circle",icon:"apartment",className:"draw-rotate",onClick:v})),c.a.createElement(r.a,{type:"vertical"}),c.a.createElement(F,{content:"保存"},c.a.createElement(o.a,{shape:"circle",icon:"save",loading:l,disabled:l,onClick:this.save})),c.a.createElement(F,{content:"部署"},c.a.createElement(o.a,{shape:"circle",icon:"cloud-upload",loading:s,disabled:l||s,onClick:function(){return e.openPublish(1)}})),c.a.createElement(F,{content:"调试"},c.a.createElement(o.a,{shape:"circle",icon:"bug",loading:p,disabled:h,onClick:this.debug})),c.a.createElement(F,{content:"发布正式环境"},c.a.createElement(o.a,{shape:"circle",icon:"flag",loading:d,disabled:O,onClick:function(){return e.openPublish(2)}})),c.a.createElement(r.a,{type:"vertical"}),c.a.createElement(F,{content:"帮助"},c.a.createElement(o.a,{shape:"circle",icon:"question-circle",disabled:!0}))),c.a.createElement(D,null),c.a.createElement(L.d,{visible:f>0,envdata:{id:m,actionType:f,name:n},onOk:this.publishOkHandle,onCancel:function(){return e.openPublish(0)}}))}}])&&M(n.prototype,i),l&&M(n,l),t}();t.b=q},nWR2:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKIAAAA4CAYAAAB+DyM+AAAWHUlEQVR4Xu1dCXQUZbb+bvWSDZKQhC1hD2GRRVlUGHU0ijiguAwYxAUVxXfE9R1h3JiZzOi4zzx1XJ46qCiIirjwHMFlRFxBRdRBERAFZAkQOiEkIb1U3XdudVWnupNOd6cXwel7Dqe7U3/9y62v7v7/EJJEXFmpfLzu3nEZOXyMDVSq1qGIGpQC8pDTZucGB1G9otF2G9Gnvu8z3x30466tRMRJmk6620OcA5So+TEzvXlO1oXsw4W+XbYRBzbbiqgBZAfBBiCDCPJdPuW3zfLdTgRnFnkyStSvwMoCzxbborL6qr2Jmlu6n0OfA3EDcen4vL7k9Dyw5ys6tXEnZZoAC4COgAwDjJmkGAD0A9EJ6ODUgUnNUyEb2NlfXaPVOub03VL13qHPxvQM4+VAu4H4cEFBz7ziphdcG2iMpkHvxyrlTPDpkpAoAEa/RPRLRvPvShurcHTnLeSwzeizoWpFvItN33/ociBmIL7Yo0cW9dr3xO4vlWk+N4Iw1AwwvxSUixlQYBepaALQoqpNlS33RSL7AN9nnk05Zw9q/GlnpLbp64cfByIjwLKmRSM7nlC/S13esIeyW1uqFVi6RDTUcqhEbP7tl4xtSURzHA2AN1v1UGe6dOh31c8dfqxOz7gtDkQNxEVHZ82uXqfcrXrC4yZINRtOiQBSB578ZkMyWlW1DtjI01DB8DDgA0Mp9b101LnXT6XKSsFnm8TMJwA4D4C0Fa9cBnuRiD6IdG/6euo4EBEB4g0/Nyxn8d71NDnStARQAdvQAKDTAkC76T3rTovhxBDgjKCaVQACRPl0M8PHDI+CV7lrx2nlW7Y0hZsXM9+g3wo8SEQ6aGU9AK4C4CSiv0VaU/p6ajgQEYiLj8t+a8cqOjWa6ZhhmUwBn4RkDK84yEERBBh2okPaWMI54cYwAShg1EFoANNN/AHynBNO2727IfReQxKOIqL7mbkngO4AdhPRVgOQVwP4Ki0Zo3myyW/TJhAXj81+esendHG005DO8hQbMgBkguAwpKIidiCLXmRd9mUYEtFqOwqIYYDSHE9lf3xbJb8k9EtGwMda4LeHsKzD2CPPLH/vPZ91nsz8MIBrRBIy870ANgOoAfArIrrOkIwiKa+Jdn3pdsnjQFggPj86+9aqtXR7uKHFwchXbCggBflkQwdSkEUU0f8VaAlivGBoGkMUpQ5CkZ7kd1vktw5Ckk+/XeiXhn4g6t91Na3pvz2Mh6Z4a4MAxcx/N0FmALEeQDWAvUT0oiEVBYjXJo+96Z6j5UCrQHxtYvbon96j1S3DM0BXxY5uig2dFXsAQNEOFq6dgEqA5/cmGGQ4LyxSUMAngATDa/42gOgRgDJq4eBx5zTuXxMiEUOB+DoAcVzWENEyA4iBNvGuIX1/fBxoAcQXzz3X5l73z337NlKe2bWo2N42O/rYHBEdi/imAwi4vCxSTgsAUlfHOuj8klB3XPySslZlHneONxiEBsisqlmk5WtEtI2Z7wTwCIAdAASI4rik6WfmQAsgvlKe9cLW95UKmZfYeQK+Xja7nopLBemqmwhNzPBCg1eTvxgAtAIRqGW7/dSzGqs/b21eVmclzPXrDemYDuOk4sFGGCMIXfOPzCo5sEnZprmhDLA5dRBGE2xO5Dr8QPSDUbxjcVKaVJ/fZjTsSxXcJgjN+YQJ38iSxC60EdFfI82dmUUzHA+gB4BiAA4A2wH8BGA9EX0fqY94rzNzRwBdjH5UItoSS5/M3A/AEQDeJaLGaO5l5nwAZwIYCKAEgMzhAIAVRDQ/mj5iaRMExCXHZ73bsNpRPtzmRLbhOEhnLjBe8dajGircJFYckMmEArJhir0DOiVQWorz4jWkogBSvnsIOOjxwq3pocBaOMJLwtDFhwS05bIA8fm2wjbMLP7Shca/Ew3whePrWgCS6VlARFWxMD/atsx8GYB/GO3F2TJBGbELZj4WwPt61Az4EoCEtMImApi5CIC8oFP1UG9LepaIpkccOMYGASC+NTm3rOkNZUNvxU6+zioyhnrR6QQfcob5sFlT0aUrULMfWP8j4NoEbPgCqN0NNHE2fE0M9SDpiGGfgq4H3LjBETAxY5qSgNxrSEQTiLp0FDB6fY1NhBOnhFHHMQ0UpjEzixS4C8DgGPsTr3wugIeISMzahFGcQPw9gD9bJtODiMQ+bkHMfDQAceraAnpygbj9UcfDzlzMKjpeZJBBJkxJD/FBlxPZ/hxZSyJ8sAJY+iiwdXs2vAcAtUFBxwYNlZQT9UMRiegD6WDUJaMSUNOaW9WmT2zYszDqzmJoaEjB+wCI7RgPifd+DhGJ6k4IxQnEYQA+BJAL4B0A41srQGbm/gA+ASAS0SR5uT4yTBGxlORBStThwYQszNJJAFP8AzYx0F+AEEj9WhGnACRWQlQ+C2HJfGDJ/Gy46wSQANUTbvFmIT9CB8ESkfR4o0+BdsCjTp/YVJ0sEIoKWioPqRUGi7oVKSEPSSp/xHHvBaAMwBQA8gBD6UcA5WYWJ96HFg8QZWxmLgQgduIX4aQ1MwtIT7HM9UkAc4jIFe/8o7lfhxVvwVhW8bF+gxVoFomIDgCJmR4D+XyEB24FPlmZA80LqG7m6w84a3u4HZ3CdWN6zX71rGt77YCmTj+tITkgNB7Us4Y9aJ2WSLQ/ABBVFFbVGjao5KxHh6zpWwDDE6Gm4wVipEfGzCeJE2JpdwsRSZgrZaRDTd2EOwDcrKtff6YtGJBOQxq2a1qEJ+8Clr+W49muHLzyk3Xqk+9ndlrUlRxTRfiGdml1VtxgrRZaskH43wBCix8k4D2NiPZHs2RmlnqOmwH8yeCcqLSJicpjpwCITwG4xFjrvwGMJKKglGk0fIinjV8ibsQqjXGswMIKxgAoOwFk5uFiHU2cbC8eo8640nrrCmfnqYUKP5NJinhzATJVs5eg7VXVi8c37VsQ65DRtmdmMcol/CJGh0mviMpty7MMK82Zxb6sBDCBiESVJ4RSAEQxJfoYk72NiEQTtIuYWZ6nRBrEZJFCE7EtdwFYB+DTcBvkiKuQw/uxn5tTvgE5pYMyE1DEzG0PaaiHD5OoM1rdd/JhdlGxXeWPCxRbb7N7AaKboG3XtKTZhIGxmCXDYn1BvgFwLBG1qOaJdvnM3C3RYZx4gMjMEj+cZsxfYpDyojS/+P5QlYDFDBmfS0QvRbteCy/FDhXv/HwpQwhzv8RfnwBwDxEFle8Rf4uRGrBGpGFrapmKIFvxYiOSKlasQiFOliRJpJtXZHZaUEyO80Uge8HaVpWnT/QkzyaU+TDLKwbZKdjBMr/TiOitSPNN9fU4gfhbAEuMOfuIgi19ZpZqe+uLdxYRieMWNTHzRAAS5LZ63G3dL1roPCIK1AeQb53YQnjOaq0FAOkElGi7bhZpko+7hYr0WFzU9LazoKJQUebt1vjKCZ7kqWPLGzzJ8JTNP4nakODvIUcpBqK8nOGyL6uJSALdVol6hgF0q4klNZ+fAhANI45eKQBpZ0VTLYBTiUhP0ZL6DW5m1p0VnUxHRcCo5AMxhAAx5x7Ch1/lH1j1ek17lXnKQMDMDxmV2uaYNxLRPSmbQAwDpRiIbc1sJRGJh60TM0v6TzJLWcaf6gD80Qjqh9aHil69AsBfLKpbyvKGEtFuUtfhTjBuCjpiwXBaqBiwZPraZF3F1Xn4bqsNlI0DXy93HQ5A/D/jLTXXJQWzCXMwQpnFzFLlLjnrSPQlEYnDZJU68aT4YlXNsQBRAuXHGTeIhBtLRN+11QEzDwXwL0v2RtKt00j9Gg+xhqt0U9XcWiQ9ZQK2rpF45r8+YUYudu61w5FJ6D28YePL9zXJm3JIEzOLfTLSMsk+iQpAt7ZwZhZpOycKprRIoaVYIkr8UDzc1mgPEUngW6ThrwGstDSK2slhZtn/ZDpEorr7k7oWj7DpOVrih5TvV82R6MyZedhWZUd2HjBhogs9RueunHH0/oD4jnT/z3WdmYXZQyzji7e7O1nzOYyAOI6IRGK1Scz8OICZRiOJPR4Z7dlFxjaNjZas1BzyrsXdxPid3qERXhbBaOsGUbNt0uU35mDthkx079mEi2Y0IrcTY7c794NLj6mTt+WQJmYW79i6KWwEEUl1SlKImaVi5ewoOn8vNJebYokYLRA3ABhgrEekmqVIIYpV+quBzJDRUlK/wFxm3KaX+1nyzErvtsM2T8wn/O+rndB7YCMum+mGze63Mne5cz+ccXSdlOQf0sTM1myCzPWSZNTZJYIJhygQD/oNuITQ1+Rbg0tYw1OhGRVb//D1DbIXb+zZBSgeUocrrhDnqNnVOYyAaHUAhJuylSAaiZUQzsfSyaEGRGaWqgMJgpvkNg4wiGVZ1ra7iNdgjE/VK0v8JFLRCdjMhE8rXZ98cR4yMjVcd4ukVIOPNKxqyv3o0mPqovEO2zvphNzHzJ2N1JOZvBTVMoSINiVkgAR2wswzAMwzutxHJGmG6IiZY/Wao1XNUq1tJgNOJ6I3optR662I1yLf50aNDkCBlb7xGLCHAeJjzxAWvFmA2X9wISOz5bmaVe7cjy89us506eOZW9LvZWYpbviNZaClRHRW0geOcQBmFklthnSE6VlEJFIoIiURiGJPH2lMIK78tCH/gPqPHBszFK/U1/kjODmAPZD9DV7raZcVYuolLhT3av1w1yfnD65+/cOT/931tN+87ezcswlyZJ2x3ZnAim6fKqwwawSykVxn0ggsm6KZ+3OH+5ZdWxYVkyM+hQgNmHmEFHqG1Bq1uwSKmX8FQIprJU2WsINGmVnEghQmmCTxulXRrD+JQLSGoySLMiZar1nHmT+E86pZJqf7yS8vHPX1pL5rpJLXLxazW5eIdz5AWFsHzJge/oThmdePw76GYpRNqkCX42LX0LVVNds67/UNSCEYnwZgPc1CFnczEd0dzYM22zDzGAAiYSXoJbWIJycyHMTMXwPwPyPgTSKySvKwU00iECUwLXMyS/lmEdGj0fCMmc306vMALpKSM72TefNOnHPRwJX3BByWTMDeSt1xxe8dmHF5sHMSOvCsm8pRVdMLgytmoOAoU3JHM73mNjU7Xdsw0NV/zejRsYYEYhvI/2aKnSNFweZDNvt4DcDsSLv0jOIJSWtJsNpaLCcPSer6ErJ/hZklZiexO5Ok9lFUYpv9JwuIhlR7AYC+9dgonJDccZvZKSMQLvakuX/kbiK6SQfi55+PcpS4Nh4szDqgnxAnPpFjUPAz/fZbwtx/FeOKM1vddxNoPGfuCdhc3Q/DLrkKuWVmmClmfKBml2srBrjKUgRGKf0XVSf1c1aSt+5lUSHGVgGpq5MHL9srJZEvWwWkCKAg5D4xLWTfin6iRCKIWcwarA6pBF8P4BnLvhJxZCTfG6AkA1HqOcVWNPkmvBHTpDK0zIuZhWdShHydfjaXn8TblZd1U6BCesmzR38+qddno3RBqwD2YcHhmyVvZuLt3DKM67IBHexWzz2Yzbf/dQS++P4ojLjyWmSX9I3rGdTscm3BANeAFIFRTgwTh2BUhEnLVsy2tnsLcycno5yMmWVvtWxmkhenNZpHRJenCogyDjOPBSASzpqHE49aDi4QqSVpERFrkk61VuRLhY9423qtauDC3L9NHX/riMXLbYo4EYB9EECWXa0Pre6Bb7QC9O+wF0NyRTC0TiveceDvL16A4ZdfiY6l8aecXTv3baGBNakCowRo5eSw/4qwlznc8qWO7+pE7uALHcg4Yk9COa0dFZhyIBpgHA5gsSXTEkkAiQ1dQURSJqZT0J6R5QuGbDy55JsysdbtfQHF2OLk8xCuMXwZJ/kwvtt62ML8lygS7J5yxQUoO+sidB6TmPK+mp2uH/s5+pYtrkiMvRWJS8wsalcqmSUGFyHRqe/qk0KAR4hIKnpSQsx8urHhS5wWUxr9LEA0wChBbinzEsdPNpKF7kcSTfKFce6QHEYQZP8HNf7Ho+XHnT/g/Q/siqqfJWAXRQCgaq8Df/q+eb/5kfnb0Sc7/C7DabPORrexFegxUQp3E0M1O6t/6OcoHZAqMBrMlTq7cbI11DhyRGyhoCNHRJ0nMlTTHm4ZDpcch1IXuk2BmcV+NVUTh4Z9jAIEq6P2AxGJedFuMpIF4u6KDSkYk1CWHM8SFjQtdtEtnDfmg3P7rDpe5IBDdjsA+GxrHp7c2RxY7GhvQnmXjWF3KM+cfQq0klNwxPRZ7V5Maze6dlZvLnWUDkwlGBO6gHRnYTnQAojT77iq8JZBi3f2zd3jdAz324lPfdMDn9Y1O4ZSIDE0byf6d5AC25b05htFePjlCTjhjgeg2BJ7jJNrR/X3pc7SQWkw/rJQ3eq5DXfcP+mMKwa8szS//0GS4tjZnx6BBtXvcQsI5SwkBYzx3b9Dtr31UN/kmWfDNvICDBs/Ftn51v1J8TPQtbN6U6mjdHAajPHz8lDpIewBIpX3nnP7jWNeuTVjKDBrtThFgBxVqKqSBiQdjF0y6lDe3Zp5al7WtTeegE27jwEdMQrFA3qg38gyZOSYWxviX75rR/WmNReUDowlrRT/qOkeksWBNk+yuev+09+67sxlp16/YagOQgGfxgJCNj6BUYU7MLhTSxXt1QiTp1fAO0wO14KuoksG9kTxgJ7oWNS+k8JCmeDaXr1hzYWlg9NgTBY8UtdvxCOVFr4+6IcV5Owr/z2JagGgqGhV86vqk7pvQZ/clqdzXDf3OGxUJwH5Eituppz8HHQrLUFhjy7oWNgRpMRmR3rdHtRWueBp9KwcWjRs/OIKCh9hTx0v0yPFwYGIQKzkSuXDx79+p6Tb9+UCRlM9y6cfnGIvapjQZzO6ZwcfkKAyoWLWFDT2CV9vqigKOhR0RG5RHjI7ZsOR4YDd6YDD6YDGGrwHPRDgeZs8cB/0YP+eGjTWNqis0HV4dpqck52mXwAHIgLRXOPoey5/rLTvlzMV8pJfEpoS0v/dTj6c0fcHdMsJ3pv94P8MwrIfJwIlkTJn0XKT6kF0HhZM+2e0d6TbHfociBqIspTR98ycXNxt/UJnRn2Gbi/qNqPxT5PIJaO8508YUhQct7yhshzfZgWlQNvHGaLNsNun4OmKpG1yat/E0nfFy4GYgCiDTXpuUpFrn/Plgrwtx0NRqRmQfk9agDmy6x6c1GsHFKN3j0q4pnIqtnWQMrR2kH5eJ90HR/c/4+nyiGfptGOE9C0/MwdiBqI53/6Vs08qzPvh8YKCLf1VVSPTXjRVdtfsRozvtx09cv12Y9VeG+5642psqDomhiWTCsIiKMpteOY82Qebpl8oB9oNRJMfI+6q+LUjo+GRrOzdRxBU3X4UyWjGGod0ceHUvjuQl+lFvceOmxbdiM1VRu4wLFOpGoSFUJRH0gD8hSIvZFlxA9Hsb/gfL+qiZnhudNjqznBm1PQjm8euB78ZsCsahnZxYVSxCwVZHvzuubnYtlcKXKxEm+A/zmI5ssuW4fHkV2f/Zzziw2OVCQOidbkS8nnpL2vHHHTnTCClcTApaglDy9OgdeicU+8YXFjvXrBy9kKfqvwE8Hogcz2e/e2ew4Nl6VkmgwP/D8Jo65VcLcGbAAAAAElFTkSuQmCC"},"r+FD":function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return o});var r={locale:n("+Gva").a},o="//at.alicdn.com/t/font_1356493_aoq9i023czb.js"},"r+Wk":function(e,t,n){"use strict";n.d(t,"d",function(){return o}),n.d(t,"e",function(){return a}),n.d(t,"b",function(){return i}),n.d(t,"a",function(){return u}),n.d(t,"c",function(){return c});var r="OTA_ACTIONTYPE_",o=r+"GETPROLIST",a=r+"GETVERLIST",i=r+"GETEXTVERLI",u=r+"GETDEVGROUPLI",c=r+"FIRMWAREDETAIL"},t98y:function(e,t,n){"use strict";n.d(t,"H",function(){return r}),n.d(t,"F",function(){return o}),n.d(t,"G",function(){return a}),n.d(t,"I",function(){return i}),n.d(t,"D",function(){return u}),n.d(t,"E",function(){return c}),n.d(t,"C",function(){return l}),n.d(t,"J",function(){return s}),n.d(t,"j",function(){return p}),n.d(t,"K",function(){return d}),n.d(t,"A",function(){return f}),n.d(t,"s",function(){return m}),n.d(t,"i",function(){return y}),n.d(t,"r",function(){return g}),n.d(t,"k",function(){return v}),n.d(t,"b",function(){return b}),n.d(t,"l",function(){return h}),n.d(t,"m",function(){return O}),n.d(t,"a",function(){return w}),n.d(t,"t",function(){return E}),n.d(t,"u",function(){return j}),n.d(t,"e",function(){return P}),n.d(t,"f",function(){return I}),n.d(t,"g",function(){return S}),n.d(t,"h",function(){return C}),n.d(t,"n",function(){return T}),n.d(t,"q",function(){return D}),n.d(t,"B",function(){return L}),n.d(t,"w",function(){return k}),n.d(t,"z",function(){return _}),n.d(t,"y",function(){return A}),n.d(t,"x",function(){return N}),n.d(t,"c",function(){return M}),n.d(t,"v",function(){return x}),n.d(t,"d",function(){return V}),n.d(t,"p",function(){return R}),n.d(t,"o",function(){return F});var r="UPDATE_PRODUCT_LIST",o="GET_PRODUCT_BASE_INFO",a="UPDATE_PRODUCT_BASE_INFO_DETAIL",i="UPDATE_PRODUCT_PROTOCOL_LISTS",u="UPDATE_CONFIG_STEPS",c="UPDATE_H5MANAGE_PAGES",l="UPDATE_APPS_BY_PRODUCTID",s="UPDATE_TIME_SERVICE_LIST",p="DEVICE_ADN_WS",d="WEBSOCKET_MESSAGE",f="TOKEN",m="RESET_DATA",y="DATA_TYPE_LIST",g="PROPERTY_CONFIG",v="DEVICE_DEBUG_ACCOUNT_GRT_LIST",b="CHANGE_DEVICE_DEBUG_MAC_DATA",h="DEVICE_DEBUG_MAC_LIST",O="EDIT_DEVICE_DEBUG_MAC_DATA",w="ADD_DEVICE_DEBUG_MAC_LIST",E="SELECTED_DATA_1",j="SELECTED_DATA_2",P="CLEAR_EXCEPTION_1",I="CLEAR_EXCEPTION_2",S="COLAR_DEV_DATA1",C="COLAR_DEV_DATA2",T="GET_CATALOG_LIST",D="PRODUCT_BASE_TYPE_LIST",L="TRIGGER_DEBUGGER_MODAL",k="SET_JS_CONTENT",_="hardware/SWITCH_TAB",A="hardware/SET_MODULE_LIST",N="hardware/SET_MODULE_ITEM",M="hardware/CHANGE_MODULE",x="hardware/SET_HARDWARE_TYPE",V="hardware/CHANGE_PRODUCT_INFO",R="hardware/MODIFY_COM_FREQ",F="hardware/MCU_CODE_CHECK"},tjUo:function(e,t,n){"use strict";n.r(t);var r,o=n("q1tI"),a=n.n(o),i=n("i8i4"),u=(n("pNMO"),n("4Brf"),n("0oug"),n("ma9I"),n("4mDm"),n("2B1R"),n("zKZe"),n("NBAS"),n("ExoC"),n("07d7"),n("PKPk"),n("3bBZ"),n("Hd6r"),n("wEI+")),c=(n("k3Gp"),n("kLXV")),l=n("/MKj"),s=n("55Ip"),p=n("Ty5D"),d=n("r+FD"),f=n("Q2AE"),m=n("w1Zx"),y=(n("UxlC"),n("2oDE"),n("CtXQ")),g=(n("L/Qf"),n("2/Rp")),v=n("vS40");function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var j=Object(l.b)(function(e){return{visible:e.getIn(["userCenter","loginModalStatu"])}},function(e){return{toLoginPage:function(){return e(Object(v.a)(!1))}}})(r=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=O(this,(e=w(t)).call.apply(e,[this].concat(o)))).handleOk=function(){var e=n.props,t=e.history,r=e.toLoginPage,o=e.location;r(),t.replace({pathname:"/account/login",state:{whereTogo:o.pathname}})},n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(t,o["Component"]),n=t,(r=[{key:"render",value:function(){var e=this.props.visible;return a.a.createElement(c.a,{title:a.a.createElement("span",{style:{fontSize:"20px"}},"未登录账号"),visible:e,zIndex:1001,closable:!1,centered:!0,maskClosable:!1,footer:a.a.createElement(g.a,{key:"submit",type:"primary",onClick:this.handleOk},"确定")},a.a.createElement("p",{style:{fontSize:"18px",textAlign:"center"}},a.a.createElement(y.a,{type:"frown",theme:"twoTone",twoToneColor:"rgb(184, 81, 22)"}),a.a.createElement("span",{style:{marginLeft:"12px"}},"请先登录账号")))}}])&&h(n.prototype,r),i&&h(n,i),t}())||r,P=Object(p.i)(j),I=n("Ir2J");n("QtFR");function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C(){return(C=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function D(e,t){return!t||"object"!==S(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function L(e){return(L=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var _=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=D(this,(e=L(t)).call.apply(e,[this].concat(o)))).customConfirm=function(e,t){c.a.confirm({title:e,onCancel:function(){t(!1)},onOk:function(){t(!0)}})},n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(t,o["Component"]),n=t,(r=[{key:"getParentNode",value:function(e){return e?e.parentNode:document.body}},{key:"render",value:function(){return a.a.createElement(u.a,{locale:d.a.locale},a.a.createElement(l.a,{store:f.a},a.a.createElement(s.a,{getUserConfirmation:this.customConfirm},a.a.createElement(I.a,null),a.a.createElement(p.e,null,m.c.map(function(e,t){return a.a.createElement(m.b,C({key:t},e))})),a.a.createElement(P,null))))}}])&&T(n.prototype,r),i&&T(n,i),t}(),A=(n("Hglc"),document.querySelector("#root"));Object(i.render)(a.a.createElement(_,null),A)},vS40:function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"d",function(){return u}),n.d(t,"c",function(){return c}),n.d(t,"f",function(){return l}),n.d(t,"b",function(){return s}),n.d(t,"e",function(){return d});n("07d7"),n("5s+n");var r=n("3L+O"),o=n("Nlzp"),a=n("JPcv"),i=function(e){return{type:r.b,statu:e}},u=function(){return function(e,t){Object(o.c)(o.a.getDeveloperInfo,{},{needVersion:1.1,loading:!0}).then(function(t){var n=function(e){return{type:r.c,info:Object(a.fromJS)(e)}}(t.data);e(n)})}},c=function(){return function(e,t){Object(o.c)(o.a.getGroupMenuList,{version:1.1}).then(function(t){if(0==t.code){localStorage.setItem("menuList",JSON.stringify(t.data));var n=l(t.data);e(n)}else localStorage.removeItem("menuList")})}},l=function(e){return{type:r.a,data:Object(a.fromJS)(e)}},s=function(e){return function(t){return Object(o.c)(o.a.deleteRole,{roleId:e},{loading:!0}).then(function(e){return 0===e.code?Promise.resolve(1):Promise.resolve(0)}).catch(function(e){return Promise.resolve(0)})}},p=function(e){return{type:r.d,data:Object(a.fromJS)(e)}},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,n){Object(o.c)(o.a.getCaseList,e).then(function(e){var n=e.data,r=p(n);t(r)})}}},vzJ4:function(e,t,n){"use strict";n("pNMO"),n("TeQF"),n("5DmW"),n("27RR"),n("tkto"),n("FZtP");var r=n("/MKj"),o=(n("4Brf"),n("0oug"),n("4mDm"),n("NBAS"),n("ExoC"),n("07d7"),n("PKPk"),n("3bBZ"),n("q1tI")),a=n.n(o),i=(n("TfFZ"),n("3S7+"));function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),l(this,s(t).apply(this,arguments))}var n,r,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,o["Component"]),n=t,(r=[{key:"render",value:function(){return a.a.createElement("div",{className:"draw-PD"},a.a.createElement("div",{className:"draw-PD-head"},"欢迎使用业务编排工作台"),a.a.createElement("div",{className:"draw-PD-body"},a.a.createElement("p",null,"完成一个业务逻辑的开发，您需要进行以下4个步骤："),a.a.createElement("div",{className:"draw-PD-intro"},a.a.createElement("div",{className:"draw-PD-intro-item"},a.a.createElement("i",{className:"draw-PD-icon draw-PD-icon-1"}),a.a.createElement("h5",null,"选择触发节点"),a.a.createElement("p",null,"触发节点决定满足何种条件时开始执行该业务逻辑，如设备上报数据/固定时间/应用发起HTTP请求")),a.a.createElement("div",{className:"draw-PD-intro-item"},a.a.createElement("i",{className:"draw-PD-icon draw-PD-icon-2"}),a.a.createElement("h5",null,"编辑功能节点"),a.a.createElement("p",null,"各功能节点决定该业务逻辑具体执行的功能，可以在左侧面板拖拽节点进入画布之后在右侧栏编辑对应的配置项")),a.a.createElement("div",{className:"draw-PD-intro-item"},a.a.createElement("i",{className:"draw-PD-icon draw-PD-icon-3"}),a.a.createElement("h5",null,"调试"),a.a.createElement("p",null,"完成节点配置后，通过顶部栏数据流转视图查看各输入输出的流转路径是否正确，然后点击“调试”进行测试并查看日志")),a.a.createElement("div",{className:"draw-PD-intro-item"},a.a.createElement("i",{className:"draw-PD-icon draw-PD-icon-4"}),a.a.createElement("h5",null,"发布使用"),a.a.createElement("p",null,"调试完成后点击发布，即可完成业务逻辑的开发。随后您可以进入监控运维页查看其运行状况或对其进行再次开发"))),a.a.createElement("p",null,"如需更多帮助，请前往",a.a.createElement(i.a,{title:"暂无文档"},a.a.createElement("a",{className:"draw-PD-link",target:"_blank"},"帮助中心")))))}}])&&c(n.prototype,r),u&&c(n,u),t}(),f=n("V0bm");function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t){return!t||"object"!==m(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var h={left:0,width:"auto"},O=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),g(this,v(t).apply(this,arguments))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(t,o["Component"]),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.readonly,n=e.isShow,r=e.isFullScreen,o=e.nodeItem;if(!n)return null;var i=a.a.createElement(d,null);if(void 0!==o){var u=o.nodeType,c=f.a[u].configuration;i=a.a.createElement(c,this.props)}var l="draw-right"+(t?" draw-readonly":""),s=r?h:void 0;return a.a.createElement("div",{className:l,style:s},i)}}])&&y(n.prototype,r),i&&y(n,i),t}(),w=n("gtRY");function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(n,!0).forEach(function(t){P(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.a=Object(r.b)(function(e){var t=e.get("drawView"),n=t.readonly,r=t.showConfiguration,o=t.showConfigurationWithFullScreen,a=t.chooseId,i=t.nodeMap,u=t.debuggedData,c=t.debuggedMap,l=t.testEnv,s=t.product,p=t.api,d=t.platformapi,f=t.mqTopic,m=t.rocketMQTopic,y=t.database,g=t.redis,v=i[a];return{readonly:n,isShow:r,isFullScreen:o,nodeItem:v?j({},v):void 0,parents:Object(w.w)(v,i),debuggedData:u,debuggedMap:c,testEnv:l,product:s,api:p,platformapi:d,mqTopic:f,rocketMQTopic:m,database:y,redis:g}},function(e){return{changeNodeConfiguration:function(t,n){return e(Object(w.d)(t,n))},nodeError:function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e(Object(w.C)(t,n))},fullScreen:function(){return e(Object(w.t)())}}})(O)},w1Zx:function(e,t,n){"use strict";n("pNMO"),n("yXV3"),n("zKZe"),n("tkto"),n("07d7"),n("5s+n");var r=n("q1tI"),o=n.n(r),a=n("Ty5D"),i=n("MKeS"),u=(n("4Brf"),n("0oug"),n("ma9I"),n("4mDm"),n("2B1R"),n("NBAS"),n("ExoC"),n("PKPk"),n("Rm1S"),n("3bBZ"),n("/MKj")),c=n("vS40"),l=n("d8kt"),s=n("MUf8"),p=n("k+EZ"),d=(n("pjDv"),n("+2oP"),n("JfAA"),n("2oDE"),n("CtXQ")),f=(n("2WkQ"),n("BvKs")),m=n("Y+p1"),y=n.n(m),g=n("55Ip"),v=n("36rt");n("F6+i");function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var P=f.a.SubMenu;function I(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return t=t.indexOf("*")>-1?t.slice(1):t,e.indexOf(t)}var S=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=w(this,(e=E(t)).call.apply(e,[this].concat(o)))).state={defaultSelectedKeys:["1"],defaultOpenKeys:["sub1"]},n.update=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=0;r<e.length;r++){var o=e[r],a=o.menuname,i=o.menus;"大数据服务"===a&&(a="数据服务"),"入网设备管理"===a&&(a="设备管理"),t.push(a),i.length&&n.update(i,t)}t=[].concat(h(t),["开发中心","项目管理","服务开发","设备分组管理","设备告警","OTA升级"]),n.muenList=t},n}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}(t,r["PureComponent"]),n=t,(a=[{key:"componentWillMount",value:function(){var e=this,t=this.props,n=t.routes,r=t.history,o=t.muenList,a=r.location.pathname;"/open"===a&&o[0]&&o[0].menus&&o[0].menus[0]&&(a+="/".concat(o[0].url,"/").concat(o[0].menus[0].url)),n.map(function(t,n){t.routes&&t.routes.map(function(n){a.indexOf(t.path)>=0&&a.indexOf(n.path)>=0&&e.setState({defaultOpenKeys:["".concat(t.menuId)],defaultSelectedKeys:["".concat(n.menuId)]})})})}},{key:"componentDidMount",value:function(){this.update(this.props.muenList)}},{key:"componentDidUpdate",value:function(e,t){y()(e.muenList,this.props.muenList)||this.update(this.props.muenList)}},{key:"render",value:function(){var e=this,t=this.props,n=t.collapsed,r=t.routes,a=this.state,i=a.defaultSelectedKeys,u=a.defaultOpenKeys;return o.a.createElement("div",{className:"menu-wapper"},o.a.createElement(f.a,{defaultSelectedKeys:i,defaultOpenKeys:u,mode:"inline",theme:"dark",inlineIndent:18,inlineCollapsed:n,className:"self-menu",forceSubMenuRender:!0},r.map(function(t,n){if(-1!=I(e.muenList,t.text)){var r=t.navMenu,a=t.menuIcon,i=t.text,u=t.routes;return r?o.a.createElement(P,{key:"".concat(t.menuId),title:o.a.createElement("span",null,a.indexOf("icon-")>-1?o.a.createElement(v.a,{type:a}):o.a.createElement(d.a,{type:a}),o.a.createElement("span",null,C(i)))},u.length>0&&u.map(function(t){if(-1!=I(e.muenList,t.text)){var n=t.navMenu,r=t.text,a=t.path,i=t.hasSubMenu,u=t.routes,c=C(r);return"设备数据"===c||"用户数据"===c?null:i?o.a.createElement(P,{key:"".concat(t.menuId),title:o.a.createElement("span",null,o.a.createElement("span",null,C(r)))},u.length>0&&u.map(function(t){if(-1!=I(e.muenList,t.text)){var n=t.navMenu,r=t.text,a=t.path;return n?o.a.createElement(f.a.Item,{key:"".concat(t.menuId)},o.a.createElement(g.b,{to:a},C(r))):null}})):n?o.a.createElement(f.a.Item,{key:"".concat(t.menuId)},o.a.createElement(g.b,{to:a},C(r))):null}})):null}})))}}])&&O(n.prototype,a),i&&O(n,i),t}();function C(e){var t=e.substr(0,4);return e.indexOf("*")>-1?e.slice(1):"设备数据"===t||"用户数据"===t?t:e}var T=Object(a.i)(S),D=Object(i.a)(function(){return Promise.all([n.e("common"),n.e("antd-vendor"),n.e("vendor"),n.e(2),n.e(3)]).then(n.bind(null,"l9Z0"))}),L=Object(i.a)(function(){return Promise.all([n.e("common"),n.e("antd-vendor"),n.e("vendor"),n.e(11)]).then(n.bind(null,"C46E"))}),k=Object(i.a)(function(){return Promise.all([n.e("common"),n.e("antd-vendor"),n.e("vendor"),n.e(7)]).then(n.bind(null,"DKeN"))});function _(e){var t=e.match,n=e.muenList,r=t.path;return o.a.createElement(a.e,null,n.map(function(e,t){return"产品"==e.menuname?o.a.createElement(a.c,{key:"产品",path:"".concat(r,"/product"),component:D}):"设备"==e.menuname?o.a.createElement(a.c,{key:"设备",path:"".concat(r,"/device"),component:L}):"应用"==e.menuname?o.a.createElement(a.c,{key:"应用",path:"".concat(r,"/application"),component:k}):void 0}),o.a.createElement(a.b,{to:"".concat(r,"/").concat(n[0].url)}))}var A;n("cH4I");function N(e){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function M(){return(M=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function V(e,t){return!t||"object"!==N(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function F(e,t){return(F=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var q=Object(i.a)(function(){return Promise.all([n.e("common"),n.e("antd-vendor"),n.e("vendor"),n.e(6)]).then(n.bind(null,"sD8s"))}),B=Object(i.a)(function(){return Promise.all([n.e("common"),n.e("antd-vendor"),n.e("vendor"),n.e(0),n.e(9)]).then(n.bind(null,"PE3M"))}),J=Object(u.b)(function(e){return{developerInfo:e.getIn(["userCenter","developerInfo"]).toJS(),muenList:e.getIn(["userCenter","muenList"]).toJS(),newMessageNums:e.getIn(["message","newMessageNums"]).toJS(),instanceList:e.getIn(["userCenter","instanceList"]).toJS()}},function(e){return{getDeveloperInfo:function(){return e(Object(c.d)())},updateMuenList:function(t){return e(Object(c.f)(t))},gatMuenList:function(){return e(Object(c.c)())},getNewMessageNums:function(){return e(Object(l.a)())},getInstanceList:function(t){return e(Object(c.e)(t))}}})(A=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=V(this,(e=R(t)).call.apply(e,[this].concat(o)))).state={collapsed:!1},n.setCollapsed=function(){n.setState({collapsed:!n.state.collapsed})},n}var n,i,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&F(e,t)}(t,r["Component"]),n=t,(i=[{key:"componentDidMount",value:function(){this.props.getDeveloperInfo(),this.props.getNewMessageNums(),this.props.getInstanceList(),JSON.parse(localStorage.getItem("menuList"))?this.props.updateMuenList(JSON.parse(localStorage.getItem("menuList"))):this.props.gatMuenList()}},{key:"render",value:function(){var e=this.props,t=e.match,n=e.routes,r=e.developerInfo,i=e.newMessageNums,u=e.instanceList,c=this.state.collapsed,l=t.path,d=JSON.parse(localStorage.getItem("menuList"))||[];return o.a.createElement(s.a,null,o.a.createElement("section",{className:"page-header-wrapper"},o.a.createElement(p.a,{developerInfo:r,collapsed:c,newMessageNums:i,setCollapsed:this.setCollapsed,instanceList:u})),o.a.createElement("div",{className:"content-wrapper"},o.a.createElement("div",{className:"left-menus"},o.a.createElement(T,{muenList:d,collapsed:c,routes:n})),o.a.createElement("section",{className:"right-wrapper flex-column"},o.a.createElement("div",{className:"flex1"},o.a.createElement(a.e,null,d.map(function(e,t){return"基础产品"==e.menuname?o.a.createElement(a.c,{key:"基础产品",path:"".concat(l,"/base"),render:function(t){return o.a.createElement(_,M({muenList:e.menus},t))}}):"大数据服务"==e.menuname?o.a.createElement(a.c,{key:"大数据服务",path:"".concat(l,"/bigData"),render:function(t){return o.a.createElement(q,M({muenList:e.menus},t))}}):"开发中心"==e.menuname?o.a.createElement(a.c,{key:"开发中心",path:"".concat(l,"/developCenter"),render:function(t){return o.a.createElement(B,M({muenList:e.menus},t))}}):void 0}),o.a.createElement(a.c,{key:"开发中心",path:"".concat(l,"/developCenter"),render:function(e){return o.a.createElement(B,e)}}),o.a.createElement(a.b,{from:"".concat(l,"/userCenter"),to:"/userCenter"}),o.a.createElement(a.b,{to:d.length>0?"".concat(l,"/").concat(d[0].url):"".concat(l,"/base")}))))))}}])&&x(n.prototype,i),u&&x(n,u),t}())||A,U=n("gtRY"),H=n("kRHp"),G=Object(u.b)(function(e){var t=e.get("drawView"),n=t.serviceId,r=t.productionName,o=t.mustSave,a=t.testEnv,i=t.proEnv,u=t.stackHistory,c=t.isSaving,l=t.isInDeploy,s=t.isInDebug,p=t.isInPublish,d=t.isopenPublish,f=t.root,m=t.nodeMap,y=Object(U.v)(f,m);return{productionName:r,mustSave:o,testEnv:a,proEnv:i,stackHistory:u,isSaving:c,isInDeploy:l,isInDebug:s,isInPublish:p,isopenPublish:d,serviceId:n,isHTTP:y.isHTTP,params:y.params,state:t}},function(e){return{undo:function(){return e(Object(U.N)())},clearNode:function(){return e(Object(U.f)())},save:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e(Object(U.G)(t,n))},deploy:function(t){return e(Object(U.r)(t))},publish:function(t){return e(Object(U.F)(t))},showParamsModal:function(){return e(Object(U.I)())},debug:function(t){return e(Object(U.m)(t))},openPublish:function(t){return e(Object(U.D)(t))}}})(H.b),Q=(n("hByQ"),n("1vPl"),n("5rEg"));function W(e){return(W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function z(e,t){return!t||"object"!==W(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function K(e){return(K=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Y(e,t){return(Y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var X=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=z(this,(e=K(t)).call.apply(e,[this].concat(o)))).time=void 0,n.change=function(e){var t=e.target.value;clearTimeout(n.time),n.time=setTimeout(function(){n.search(t)},500)},n.search=function(e){n.props.changeSearch(e)},n}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Y(e,t)}(t,r["Component"]),n=t,(a=[{key:"render",value:function(){return o.a.createElement("div",{className:"draw-search"},o.a.createElement("div",{className:"draw-search-inner"},o.a.createElement(Q.a.Search,{placeholder:"根据节点名搜索",size:"small",onChange:this.change,onSearch:this.search})))}}])&&Z(n.prototype,a),i&&Z(n,i),t}(),$=Object(u.b)(void 0,function(e){return{changeSearch:function(t){return e(Object(U.e)(t))}}})(X),ee=(n("TeQF"),n("sMBO"),n("TWNs"),n("GRva"),n("gK9i")),te=(n("Aosp"),n("diRs")),ne=n("V0bm"),re=n("78UK");function oe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var ae=ne.k.map(function(e){return e.id});var ie=Object(u.b)(function(e){return{searchText:e.get("drawView").searchText}},function(e){return{}})(function(e){var t=oe(Object(r.useState)(ae),2),n=t[0],a=t[1],i=e.searchText;return o.a.createElement("div",{className:"draw-chooser"},o.a.createElement(ee.a,{bordered:!1,activeKey:n,onChange:function(e){return a(e)}},ne.k.map(function(e){var t=e.id,n=e.name,r=e.list;return o.a.createElement(ee.a.Panel,{header:n,key:t},o.a.createElement("div",{className:"draw-chooser-list"},r.filter(function(e){return e.name.search(new RegExp(i||"","i"))>-1}).map(function(e){var t=e.id,n=e.name,r=e.iconCls,a=e.description,i="draw-nodeItem-icon "+(r||"");return o.a.createElement(te.a,{content:a,placement:"right",overlayClassName:"draw-popover",mouseEnterDelay:1,key:t},o.a.createElement("div",{className:"draw-nodeItem",draggable:!0,onDragStart:function(e){return Object(re.e)(e,t)},onDragEnd:re.f,onDragExit:re.f},o.a.createElement("i",{className:i}),o.a.createElement("div",{className:"draw-nodeItem-text"},n)))})))})))});function ue(e){return(ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ce(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function le(e,t){return!t||"object"!==ue(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function se(e){return(se=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pe(e,t){return(pe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var de,fe,me=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),le(this,se(t).apply(this,arguments))}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pe(e,t)}(t,r["Component"]),n=t,(a=[{key:"render",value:function(){return this.props.showChooser?o.a.createElement("div",{className:"draw-left"},o.a.createElement($,null),o.a.createElement(ie,null)):null}}])&&ce(n.prototype,a),i&&ce(n,i),t}(),ye=Object(u.b)(function(e){return{showChooser:e.get("drawView").showChooser}})(me),ge=n("AcTD"),ve=n("vzJ4"),be=n("kEWA");function he(e){return(he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Oe(){return(Oe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function we(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ee(e,t){return!t||"object"!==he(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function je(e){return(je=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Pe(e,t){return(Pe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ie(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Se(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ce=(Se(de={},be.e.NULL,[0,0]),Se(de,be.e.LINE,[135,33]),Se(de,be.e.NODE,[135,99]),Se(de,be.e.CONTEXT,[135,99]),de),Te=(Se(fe={},be.e.NULL,function(){return o.a.createElement(o.a.Fragment,null)}),Se(fe,be.e.LINE,function(e){var t=e.deleteLine;return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"draw-ctx-btn",onClick:t},"删除"))}),Se(fe,be.e.NODE,function(e){var t=e.contextMenu.id,n=e.nodeMap,r=e.deleteNode,a=e.cutNode,i=e.copyNode,u=n[t],c=!!u&&-1===ne.h.indexOf(u.nodeType),l="draw-ctx-btn"+(c?"":" draw-ctx-btn-disabled");return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:l,onClick:c?a:void 0},"剪切"),o.a.createElement("div",{className:l,onClick:c?i:void 0},"复制"),o.a.createElement("div",{className:"draw-ctx-btn",onClick:r},"删除"))}),Se(fe,be.e.CONTEXT,function(e){var t=e.clearNode,n=e.copy,r=e.pasteNode,a=e.stackHistory,i=e.undo,u=null!==n,c="draw-ctx-btn"+(u?"":" draw-ctx-btn-disabled"),l=u?r:void 0,s=a.length>0,p="draw-ctx-btn"+(s?"":" draw-ctx-btn-disabled"),d=s?i:void 0;return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:c,onClick:l},"粘贴"),o.a.createElement("div",{className:p,onClick:d},"撤销"),o.a.createElement("div",{className:"draw-ctx-btn",onClick:t},"整理节点位置"))}),fe),De=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ee(this,je(t).apply(this,arguments))}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pe(e,t)}(t,r["Component"]),n=t,(a=[{key:"render",value:function(){var e=this.props.contextMenu,t=e.show,n=e.type,r=e.x,a=e.y;if(!t)return null;var i=function(e,t,n){var r=document.documentElement,o=r.clientWidth,a=r.clientHeight,i=Ie(Ce[e],2),u=i[0],c=i[1],l=t,s=n;return l+u>o&&(l=t-u),s+c>a&&(s=n-c),{left:l,top:s}}(n,r,a),u=Te[n];return o.a.createElement("div",{className:"draw-ctx-wrap",style:i,onMouseDown:re.d},o.a.createElement("div",{className:"draw-ctx-group"},o.a.createElement(u,Oe({},this.props,i))))}}])&&we(n.prototype,a),i&&we(n,i),t}(),Le=Object(u.b)(function(e){var t=e.get("drawView");return{nodeList:t.nodeList,nodeMap:t.nodeMap,lineList:t.lineList,lineMap:t.lineMap,contextMenu:t.contextMenu,stackHistory:t.stackHistory,copy:t.copy}},function(e){return{deleteNode:function(){return e(Object(U.q)())},deleteLine:function(){return e(Object(U.p)())},cutNode:function(){return e(Object(U.l)())},copyNode:function(){return e(Object(U.j)())},pasteNode:function(){return e(Object(U.E)())},clearNode:function(){return e(Object(U.f)())},undo:function(){return e(Object(U.N)())}}})(De),ke=n("zrZB");n("3tak");function _e(e){return(_e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ae(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ne(e,t){return!t||"object"!==_e(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Me(e){return(Me=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xe(e,t){return(xe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ve=function(e){function t(e){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=Ne(this,Me(t).call(this,e));var r=e.match.params,o=r.projectId,a=r.serviceId;return e.init(o,a),n}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xe(e,t)}(t,r["Component"]),n=t,(a=[{key:"render",value:function(){return o.a.createElement("div",{className:"draw-wrap"},o.a.createElement(G,null),o.a.createElement(ye,null),o.a.createElement(ge.a,null),o.a.createElement(ve.a,null),o.a.createElement(Le,null),o.a.createElement(ke.a,null))}}])&&Ae(n.prototype,a),i&&Ae(n,i),t}(),Re=Object(a.i)(Object(u.b)(void 0,function(e){return{init:function(t,n){return e(Object(U.z)(t,n))}}})(Ve));function Fe(e){return(Fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Be(e,t){return!t||"object"!==Fe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Je(e){return(Je=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ue(e,t){return(Ue=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var He=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Be(this,Je(t).apply(this,arguments))}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ue(e,t)}(t,r["Component"]),n=t,(a=[{key:"render",value:function(){return o.a.createElement(Re,null)}}])&&qe(n.prototype,a),i&&qe(n,i),t}();function Ge(){return(Ge=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Qe(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}n.d(t,"c",function(){return ze}),n.d(t,"a",function(){return Ke}),n.d(t,"b",function(){return Ye});var We=Object(i.a)(function(){return Promise.all([n.e("common"),n.e("antd-vendor"),n.e(1),n.e(10)]).then(n.bind(null,"rPAB"))}),Ze=Object(i.a)(function(){return Promise.all([n.e("common"),n.e("vendor"),n.e(12)]).then(n.bind(null,"15YJ"))}),ze=[{path:"/open",component:J,routes:[{path:"/open/base",text:"*基础产品",navMenu:!0,menuIcon:"icon-chanpin1",menuId:12695,routes:[{path:"/open/base/product",text:"产品",navMenu:!0,menuId:12712,routes:[{path:"/open/base/product/list"},{path:"/open/base/product/add",text:"新建产品"},{path:"/open/base/product/edit/:id",text:"*产品编辑",routes:[{path:"/open/base/product/edit/:id/protocols",text:"功能定义"},{path:"/open/base/product/edit/:id/projectSelect",text:"硬件开发"},{path:"/open/base/product/edit/:id/service",text:"服务配置",routes:[{path:"/open/base/product/edit/:id/service/serviceselect"},{path:"/open/base/product/edit/:id/service/appcontrol"},{path:"/open/base/product/edit/:id/service/cloudtime"},{path:"/open/base/product/edit/:id/service/scenelink"}]},{path:"/open/base/product/edit/:id/commercialInfo",text:"商业发布"},{path:"/open/base/product/edit/:id/applyRelease",text:"申请发布"}]},{path:"/open/base/product/details/:id",text:"产品详情"},{path:"/open/base/product/deviceDebugging",text:"硬件调试"},{redirect:"/open/base/product/list"}]},{path:"/open/base/device",text:"设备",menuId:12714,hasSubMenu:!0,routes:[{path:"/open/base/device/onlineDevice",text:"设备管理",menuId:13094,navMenu:!0,routes:[{path:"/open/base/device/onlineDevice/list"},{path:"/open/base/device/onlineDevice/details/:id",text:"设备详情"},{redirect:"/open/base/device/onlineDevice/list"}]},{path:"/open/base/device/deviceSecret",text:"设备秘钥管理",menuId:13095,navMenu:!0,routes:[{path:"/open/base/device/deviceSecret/list"},{redirect:"/open/base/device/deviceSecret/list"}]},{path:"/open/base/device/groups",text:"设备分组管理",menuId:19999,navMenu:!0,routes:[{path:"/open/base/device/groups/details",text:"分组详情"}]},{path:"/open/base/device/deviceWarning",text:"设备告警",menuId:29999,navMenu:!0,routes:[{path:"/open/base/device/groups/details",text:"分组详情"}]}]},{path:"/open/base/application",text:"应用",navMenu:!0,menuId:12719,routes:[{path:"/open/base/application/list"},{path:"/open/base/application/add"},{path:"/open/base/application/details/:appId",text:"应用详情"},{redirect:"/open/base/application/list"}]},{redirect:"/open/base/product"}]},{path:"/open/bigData",text:"*数据服务",navMenu:!0,menuIcon:"icon-dashujufenxi",menuId:12696,routes:[{path:"/open/bigData/deviceDataApi",text:"设备数据API",navMenu:!0,menuId:12723,routes:[{path:"/open/bigData/deviceDataApi/list"},{redirect:"/open/bigData/deviceDataApi/list"}]},{path:"/open/bigData/userDataApi",text:"用户数据API",navMenu:!0,menuId:12724,routes:[{path:"/open/bigData/userDataApi/list"},{redirect:"/open/bigData/userDataApi/list"}]},{path:"/open/bigData/customMethod",text:"自定义统计方法",navMenu:!0,menuId:12725,routes:[{path:"/open/bigData/customMethod/list"},{path:"/open/bigData/customMethod/add",text:"新增统计方法"},{path:"/open/bigData/customMethod/detail/:apiId",text:"统计方法详情"},{redirect:"/open/bigData/customMethod/list"}]},{path:"/open/bigData/dataSubscription",text:"数据订阅",navMenu:!0,menuId:12726,routes:[{path:"/open/bigData/dataSubscription/list",text:"订阅列表"},{path:"/open/bigData/dataSubscription/add",text:"新增订阅"},{path:"/open/bigData/dataSubscription/detail/:apiId",text:"详情"},{redirect:"/open/bigData/dataSubscription/list"}]},{path:"/open/bigData/OTA",text:"OTA升级",menuId:126123116,navMenu:!0},{redirect:"/open/bigData/deviceDataApi"}]},{path:"/open/developCenter",text:"*开发中心",navMenu:!0,menuIcon:"cluster",menuId:126123112,routes:[{path:"/open/developCenter/projectManage",text:"项目管理",menuId:126123111,navMenu:!0,routes:[{path:"/open/developCenter/projectManage/list"},{path:"/open/developCenter/projectManage/detail/:projectId"},{redirect:"/open/developCenter/projectManage/list"}]},{path:"/open/developCenter/serveDevelop",text:"服务开发",menuId:12612311,navMenu:!0,routes:[{path:"/open/developCenter/serveDevelop/list"},{redirect:"/open/developCenter/serveDevelop/list"}]},{path:"/open/developCenter/dataFlow",text:"数据流转",menuId:126123114,navMenu:!0,routes:[{path:"/open/developCenter/dataFlow/list"},{path:"/open/developCenter/dataFlow/ruledetail/:id"},{redirect:"/open/developCenter/dataFlow/list"}]},{path:"/open/developCenter/deviceMonitor",text:"设备监控",menuId:126123115,navMenu:!0}]},{redirect:"/open/base"}]},{path:"/account",component:We},{path:"/logicDevelop/:projectId/:serviceId",component:He},{path:"/userCenter",component:Object(i.a)(function(){return Promise.all([n.e("common"),n.e("antd-vendor"),n.e("vendor"),n.e(1),n.e(4)]).then(n.bind(null,"bc1A"))}),routes:[{path:"/userCenter/info",text:"基本资料",routes:[{path:"/userCenter/info/base"},{path:"/userCenter/info/resetPassword",text:"重置密码"},{path:"/userCenter/info/subResetPassword",text:"重置登录密码"},{path:"/userCenter/info/updateEmail",text:"修改邮箱"},{path:"/userCenter/info/closeAccount",text:"注销账号"}]},{path:"/userCenter/visit",text:"*访问用户"},{path:"/userCenter/role",text:"*用户角色"},{path:"/userCenter/log",text:"*操作日志"}]},{path:"/messageCenter",component:Ze},{path:"/dataAnalysis/:projectId/:serviceId",component:Object(i.a)(function(){return Promise.all([n.e("antd-vendor"),n.e("vendor"),n.e(0),n.e(8)]).then(n.bind(null,"NAHi"))})},{redirect:"/account"}];function Ke(e){var t=e.component,n=e.redirect,r=e.path,i=e.isOk,u=void 0!==i&&i,c=Qe(e,["component","redirect","path","isOk"]);return o.a.createElement(a.c,{path:r,render:function(e){return u?o.a.createElement(t,Ge({},e,c)):o.a.createElement(a.b,{to:n})}})}function Ye(e){var t=e.path,n=e.component,r=e.redirect,i=Qe(e,["path","component","redirect"]);return n?o.a.createElement(a.c,{path:t,render:function(e){return o.a.createElement(n,Ge({},e,i))}}):o.a.createElement(a.b,{to:r})}},yrct:function(e,t,n){"use strict";var r={};n.r(r),n.d(r,"getDimensionList",function(){return c}),n.d(r,"getApiList",function(){return l});var o=n("JPcv"),a=Object(o.fromJS)({curDataDimension:{},apiList:[],pager:{}}),i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"deviceDataApi/CHANGE_CUR_DATA_DIMENSION":return e.set("curDataDimension",t.curDataDimension);case"deviceDataApi/CHANGE_API_LIST":return e.merge({apiList:t.apiList,pager:t.pager});default:return e}},u=n("Nlzp"),c=function(e){return function(t){Object(u.c)(u.a.getDimensionList,e).then(function(e){var n=e.data;0===e.code&&t(function(e){return{type:"deviceDataApi/CHANGE_CUR_DATA_DIMENSION",curDataDimension:Object(o.fromJS)(e)}}(n))})}},l=function(e){return function(t){Object(u.c)(u.a.getApiList,e).then(function(e){var n=e.data;0===e.code&&t(function(e){return{type:"deviceDataApi/CHANGE_API_LIST",apiList:Object(o.fromJS)(e.list),pager:Object(o.fromJS)(e.pager)}}(n))})}};n.d(t,"b",function(){return i}),n.d(t,"a",function(){return r})},zrZB:function(e,t,n){"use strict";var r=n("/MKj"),o=(n("pNMO"),n("4Brf"),n("0oug"),n("4mDm"),n("NBAS"),n("ExoC"),n("07d7"),n("PKPk"),n("3bBZ"),n("04bd"),n("W9HT")),a=n("q1tI"),i=n.n(a);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),l(this,s(t).apply(this,arguments))}var n,r,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,a["Component"]),n=t,(r=[{key:"render",value:function(){var e=this.props.isLoading;return e?i.a.createElement(o.a,{spinning:e,wrapperClassName:"draw-loading"},i.a.createElement("div",{className:"draw-loading"})):null}}])&&c(n.prototype,r),u&&c(n,u),t}();t.a=Object(r.b)(function(e){return{isLoading:e.get("drawView").isLoading}})(d)}},[["tjUo","runtime","common","antd-vendor","vendor"]]]);