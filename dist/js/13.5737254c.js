(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{dSAc:function(e,t,a){},kZcz:function(e,t,a){"use strict";a.r(t);a("pNMO"),a("4Brf"),a("0oug"),a("ma9I"),a("4mDm"),a("2B1R"),a("NBAS"),a("ExoC"),a("07d7"),a("5s+n"),a("p532"),a("PKPk"),a("Rm1S"),a("FZtP"),a("3bBZ"),a("YQTV");var n=a("NUBc"),r=(a("qNb/"),a("PArb")),l=(a("bipt"),a("lrIw")),i=(a("AUBz"),a("ZTPi")),o=a("q1tI"),c=a.n(o),s=a("/MKj"),u=a("Per8"),d=a("EZYW"),m=a("Nlzp"),p=a("P2RN"),f=a("DgvE"),y=a("MeRu"),b=a("odoF"),v=a("FC04"),h=a("cu44"),g=a("S18n"),E=a("rwTb"),w=a("8sIe"),L=a("YNSc"),k=(a("TeQF"),a("5DmW"),a("27RR"),a("tkto"),a("L/Qf"),a("2/Rp")),O=(a("2DKY"),a("+KLJ")),S=(a("mbEz"),a("wCAj")),N=(a("JvnM"),a("KrTs")),I=(a("TfFZ"),a("3S7+")),D=(a("2oDE"),a("CtXQ")),j=(a("UxlC"),"/v5/web/open"),M=function(e){return Object(m.d)(j+"/deviceShadow/getDeviceShadowData",{deviceId:e})},C=function(e){return Object(m.d)(j+"/deviceShadow/getHistoricalData",e)},x=function(e){var t="?";return Object.keys(e).forEach(function(a){t+=a+"="+e[a]+"&"}),function(e,t){var a=window.location.origin+j+e+t;try{window.open(a)}catch(e){Object(p.a)({description:"下载失败",type:"error"})}}("/deviceShadow/exportHistoricalData",t.replace(/&$/,""))},P=a("FNo8"),F=a("/Zbm"),T=(a("+2oP"),a("sMBO"),a("k3Gp"),a("kLXV")),H=(a("8QGh"),a("2fM7")),K=(a("OrB1"),a("gFTJ")),_=a("H4M8"),V=a("lwO8"),A=a("wd/R"),B=a.n(A);function J(e){return(J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function R(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Y(e,t){return!t||"object"!==J(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function U(e){return(U=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function W(e,t){return(W=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var q,Z=[{name:"最近5分钟",val:5},{name:"最近15分钟",val:15},{name:"最近30分钟",val:30},{name:"最近1小时",val:60},{name:"最近6小时",val:360},{name:"最近24小时",val:1440}],z=B()().utcOffset()/60,Q=["#1890FF","#2fc25b"],G="<span style='display:inline-block;margin-right:5px;border-radius:10px;width:9px;height:9px;background-color:"+Q[0]+";'></span>",X=function(e,t){if(!e||0===e.length)return null;var a=function(e){return e.map(function(e){var t=e.dataTimeStamp,a=e.count;return{name:B()(t).add(z,"h").format("YYYY-MM-DD HH:mm:ss"),count:a}})}(e),n=a.map(function(e){return e.name}),r=a.map(function(e){return e.count});return{tooltip:{trigger:"axis",axisPointer:{type:"line"},formatter:function(e){var t=e[0],a=t.name,n=t.seriesName,r=t.value;return a+" <br />"+G+n+"："+(null==r?"暂无":r)}},color:Q,grid:{top:20,bottom:20,right:50,left:50},toolbox:{show:!1},xAxis:[{type:"category",boundaryGap:!0,axisTick:{alignWithLabel:!0},data:n,axisLabel:{formatter:function(e){return e.slice(-8)}}}],yAxis:{type:"value",scale:!0,min:0,axisTick:{show:!1},axisLine:{lineStyle:{opacity:0}},splitLine:{lineStyle:{type:"dotted"}}},series:[{type:"line",step:"end",name:t,data:r}]}},$=function(e){function t(){var e,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Y(this,(e=U(t)).call.apply(e,[this].concat(r)))).export=function(e){e.stopPropagation(),a.props.download()},a.download=c.a.createElement(k.a,{type:"link",className:"lcp-remark-export",onClick:a.export},c.a.createElement(D.a,{type:"export"}),"导出"),a.getChart=function(){var e=a.props,t=e.showData,n=e.isLoadingForModal,r=e.isErrorForModal,l=e.listForModal,i=e.tryAgain;if(r)return c.a.createElement(P.a,{tryAgain:i});if(!n&&l&&0===l.length)return c.a.createElement(_.a,null);var o=X(l,(t||{}).propertyName);return c.a.createElement(V.a,{className:"lcp-chart",option:o})},a.onChangeTime=function(e){a.props.tryAgain(e)},a}var a,n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&W(e,t)}(t,o["Component"]),a=t,(n=[{key:"render",value:function(){var e=this,t=this.props,a=t.showModal,n=t.showData,r=t.isLoadingForModal,l=t.isErrorForModal,i=t.listForModal,o=t.closeModal,s=n||{},u=s.propertyName,d=s.property,m=s.propertyValueDesc,p=s.gap,f=s.mulriple,y=s.remark,b=c.a.createElement(c.a.Fragment,null,c.a.createElement("span",{className:"lcp-w1"},u),d),v=!r&&!l&&i&&i.length>0;return c.a.createElement(T.a,{visible:a,className:"self-modal",width:720,title:"数据查看",footer:null,onCancel:o,centered:!0,closable:!0,destroyOnClose:!0},c.a.createElement(K.a,{title:b},c.a.createElement(K.a.Item,{label:"范围"},m),c.a.createElement(K.a.Item,{label:"数据间隔"},p),c.a.createElement(K.a.Item,{label:"数据倍数"},f),c.a.createElement(K.a.Item,{label:"",span:3},y)),c.a.createElement("div",{className:"lcp-remark"},c.a.createElement(H.a,{className:"time-select",defaultValue:5,onChange:function(t){e.onChangeTime(t)}},Z.map(function(e){var t=e.name,a=e.val;return c.a.createElement(H.a.Option,{key:"_"+a,value:a},t)})),v?this.download:null),this.getChart())}}])&&R(a.prototype,n),r&&R(a,r),t}();a("dSAc"),a("p77/");function ee(e){return(ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function te(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function ae(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?te(a,!0).forEach(function(t){ne(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):te(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function ne(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function re(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function le(e,t){return!t||"object"!==ee(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ie(e){return(ie=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function oe(e,t){return(oe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ce,se=0,ue=["表单模式","Json模式"],de={2:"controlList",3:"runList",4:"errorList",5:"configList"},me=function(e,t){var a=t?"已":"未";return 0===e?c.a.createElement("div",{className:"lcp-c"},"公共状态，仅对WIFI设备有意义。",c.a.createElement("br",null),"设备当前",a,"连接WIFI网络"):c.a.createElement("div",{className:"lcp-c"},"公共状态，设备",t?"已经":"没有","上报故障数据。",c.a.createElement("br",null),"设备",a,"发生故障")},pe=c.a.createElement(D.a,{type:"sync",spin:!0,title:"加载中"}),fe=function(){return B()().format("YYYY-MM-DD HH:mm:ss")},ye=Object(s.b)(function(e){return{}},function(e){return{}})(q=function(e){function t(){var e,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=le(this,(e=ie(t)).call.apply(e,[this].concat(r)))).state={tab:0,time:null,isLoading:!1,isError:!1,result:{},controlList:[],runList:[],errorList:[],configList:[],online:!1,onerror:!1,showModal:!1,showData:null,isLoadingForModal:!1,isErrorForModal:!1,listForModal:[]},a.alertMsg=c.a.createElement(c.a.Fragment,null,"设备影子是设备最新状态在平台的缓存信息，您可以在平台实时查询设备的运行和状态信息，也可以通过API获取设备状态信息。详细说明可参考",c.a.createElement(I.a,{title:"暂无文档，敬请期待~",placement:"top"},c.a.createElement("a",{href:"javascript:void(0)"},"文档"))),a.columns=[{title:"数据名称",dataIndex:"propertyName",key:"propertyName",className:"width1"},{title:"数据标识",dataIndex:"property",key:"property",className:"width2"},{title:"数据类型",dataIndex:"javaType",key:"javaType",className:"width3"},{title:"单位",dataIndex:"unit",key:"unit",className:"width4"},{title:"数据属性",dataIndex:"propertyValueDesc",key:"propertyValueDesc",className:"width5"},{title:"最新数据",dataIndex:"deviceData",key:"deviceData",className:"width6"},{title:"操作",dataIndex:"property",key:"done",className:"width7",render:function(e,t){return c.a.createElement("a",{onClick:function(){return a.showHistory(t)}},"数据查看")}}],a.getData=function(){var e=a.props.deviceId;a.setState({isLoading:!0,isError:!1});var t=function(){a.setState({time:fe(),isLoading:!1,isError:!0})};M(e).then(function(e){var n=e.data,r=n.deviceData,l=n.state;if(0===e.code){var i={result:e,time:fe(),isLoading:!1,isError:!1,online:!!l.online,onerror:!!l.error};r.forEach(function(e){var t=e.dataType,a=e.list;i[de[t]]=a.map(function(e){return ae({},e,{lcpId:++se,dataType:t})})}),a.setState(i)}else t()}).catch(function(e){t()})},a.toggleTab=function(e){a.setState({tab:e})},a.getHistory=function(e){var t=a.props.deviceId,n=e.property,r=e.dataType;if(n&&r){a.setState({isLoadingForModal:!0,isErrorForModal:!1,showModal:!0,showData:e,listForModal:[]});var l={deviceId:t,property:n,dataType:r};a.sendHistoryData=l,a.getHistoryNext(5)}else Object(p.a)({description:"数据标识或数据类型丢失，无法查询",type:"warn"})},a.getHistoryNext=function(e){a.sendHistoryData.startTime=a.getHistoryTime(e);var t=a.sendHistoryData,n=function(){a.setState({isLoadingForModal:!1,isErrorForModal:!0})},r=t.property;C(t).then(function(e){var t=e.data;if(0===e.code){var l={isLoadingForModal:!1,isErrorForModal:!1,listForModal:(t||[]).map(function(e){return ae({},e,{count:e[r]})})};a.setState(l)}else n()}).catch(function(e){n()})},a.getHistoryTime=function(e){return B.a.utc().valueOf()-60*e*1e3},a.tryAgain=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;a.setState({isLoadingForModal:!0,isErrorForModal:!1,listForModal:[]}),a.getHistoryNext(e)},a.showHistory=function(e){a.getHistory(e)},a.closeModal=function(){a.setState({showModal:!1})},a.download=function(){x(a.sendHistoryData)},a.getJsonView=function(){var e=a.state.result,t=void 0===e?{}:e,n=JSON.stringify(t);return c.a.createElement(F.a,{code:n})},a.getFormListView=function(){var e=a.state,t=e.isLoading,n=e.controlList,r=e.runList,l=e.errorList,i=e.configList,o=e.online,s=e.onerror,u=[{nam:"控制数据",source:n},{nam:"运行数据",source:r},{nam:"故障数据",source:l},{nam:"配置数据",source:i}];return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"lcp-status"},c.a.createElement("div",{className:"lcp-status-item lcp-status-item-active"},"在线状态：",c.a.createElement(I.a,{title:me(0,o),placement:"top"},c.a.createElement(D.a,{type:"question-circle-o"}))),c.a.createElement("div",{className:"lcp-status-item"},t?pe:o?c.a.createElement(N.a,{status:"success",text:"在线"}):c.a.createElement(N.a,{status:"error",text:"离线"})),c.a.createElement("div",{className:"lcp-status-item lcp-status-item-active"},"故障状态：",c.a.createElement(I.a,{title:me(1,s),placement:"top"},c.a.createElement(D.a,{type:"question-circle-o"}))),c.a.createElement("div",{className:"lcp-status-item"},t?pe:s?c.a.createElement(N.a,{status:"error",text:"已发生故障"}):c.a.createElement(N.a,{status:"success",text:"未发生故障"}))),u.map(function(e){var n=e.nam,r=e.source;return c.a.createElement("div",{key:n},c.a.createElement("div",{className:"lcp-title marg-top20"},n),c.a.createElement(S.a,{className:"lcp-table-small",loading:t,rowKey:"lcpId",pagination:!1,columns:a.columns,dataSource:r}))}))},a}var a,n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&oe(e,t)}(t,o["Component"]),a=t,(n=[{key:"componentDidMount",value:function(){this.getData()}},{key:"render",value:function(){var e=this,t=this.state,a=t.tab,n=t.time,r=t.isLoading,l=t.isError,i={showModal:t.showModal,showData:t.showData,isLoadingForModal:t.isLoadingForModal,isErrorForModal:t.isErrorForModal,listForModal:t.listForModal,tryAgain:this.tryAgain,closeModal:this.closeModal,download:this.download};return c.a.createElement("div",{className:"device-shadow-page"},c.a.createElement(O.a,{className:"page-visualization-alert",message:this.alertMsg,type:"info",showIcon:!0}),c.a.createElement("div",{className:"btn-changemod"},c.a.createElement(k.a.Group,null,ue.map(function(t,n){return c.a.createElement(k.a,{type:n===a?"primary":void 0,onClick:function(){return e.toggleTab(n)},key:n+t},t)})),c.a.createElement("span",{className:"fresh-time"},"最新更新时间：",n,c.a.createElement(D.a,{type:"sync",spin:r,title:"刷新",className:"lcp-refresh",onClick:r?null:this.getData}))),l?c.a.createElement(P.a,{tryAgain:this.getData}):0===a?this.getFormListView():this.getJsonView(),c.a.createElement($,i))}}])&&re(a.prototype,n),r&&re(a,r),t}())||q;function be(e){return(be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ve(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function he(e,t){return!t||"object"!==be(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ge(e){return(ge=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ee(e,t){return(Ee=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}a.d(t,"default",function(){return Le});var we=i.a.TabPane,Le=Object(s.b)(function(e){return{deviceLabelList:e.getIn(["device","deviceLabel"]).toJS(),LabelBaseList:e.getIn(["device","deviceLabelBase"]).toJS(),defaultLabel:e.getIn(["device","defaultLabel"]).toJS(),protocolLists:e.getIn(["product","productProtocolLists"]).toJS()}},function(e){return{getDeviceLabelList:function(t){return e(Object(u.b)(t))},getLabelBaseList:function(t){return e(Object(u.e)(t))},getDefaultLabel:function(t){return e(Object(u.a)(t))},getProtocolLists:function(t){return e(Object(d.getProtocolLists)(t))}}})(ce=function(e){function t(e){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=he(this,ge(t).call(this,e))).toggleShow=function(e){var t={},n=!a.state[e];t[e]=n,a.setState(t)},a.tabChangeHandle=function(e,t){var n=a.props.getProtocolLists;"3"===e&&n(t)},a.state={pageIndex:1,infodata:{productName:"--",productId:"--",productType:"--",productClass:"--",productCode:"--",deviceKey:"--",deviceUniqueId:"--",deviceSecret:"--",deviceMac:"--",activeTime:"",moduleVersion:"--",pcbVersion:"--",gateWay:"--",deviceSite:"--",deviceName:"--",bindUser:"--",macAddress:"无数据",deviceIdentifier:"--",simNumber:"--",online:"--"},showdeviceKey:!1,showdeviceKeyagin:!1,showdeviceSecret:!1,editid:-1,editkey:"",editval:"",addkey:"",addval:"",infoJurisdiction:Object(b.a)("基本信息"),tagJurisdiction:Object(b.a)("设备标签"),delLabelId:"",deleteLoading:!1,dellabelKey:"",dellabelValue:""},a}var a,s,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ee(e,t)}(t,o["PureComponent"]),a=t,(s=[{key:"componentDidMount",value:function(){this.getDeviceDetailt(),this.getDeviceLabelList(),this.getLabelBaseList(),this.getDefaultLabel()}},{key:"getDeviceDetailt",value:function(){var e=this,t=this.props.match.params.deviceid;Object(m.c)(m.a.getDeviceInfo,{deviceId:t}).then(function(t){0==t.code&&e.setState({infodata:t.data})})}},{key:"getDeviceLabelList",value:function(){var e=this.state.pageIndex,t=this.props.match.params.deviceid;this.props.getDeviceLabelList({deviceId:t,pageIndex:e,pageRows:10})}},{key:"getDefaultLabel",value:function(){var e=this.props.match.params.deviceid;this.props.getDefaultLabel({deviceId:e,defaultLabel:1})}},{key:"getLabelBaseList",value:function(){this.props.getLabelBaseList({pageIndex:1,pageRows:9999})}},{key:"deleteOkHandle",value:function(){var e=this,t=this.state.delLabelId;this.setState({deleteLoading:!0},function(){Object(m.d)(m.a.deleteDeviceLabel,{labelId:t}).then(function(t){e.setState({delLabelId:""}),0==t.code&&e.getDeviceLabelList()}).finally(function(){e.setState({deleteLoading:!1})})})}},{key:"openDelMod",value:function(e,t,a){this.setState({delLabelId:e,dellabelKey:t,dellabelValue:a})}},{key:"closeDelLabelMod",value:function(){this.setState({delLabelId:""})}},{key:"addConfirm",value:function(){var e=this,t=this.state,a=t.addkey,n=t.addval;if(""==a||""==n)return Object(p.a)({description:"请将添加输入框补充完整",type:"warn"}),!1;var r=this.props.match.params.deviceid;Object(m.d)(m.a.addDeviceLabel,{deviceId:r,labelKey:a,labelValue:n}).then(function(t){0==t.code&&(e.setState({addkey:"",addval:""}),e.getDeviceLabelList(),e.getLabelBaseList())})}},{key:"editLabel",value:function(e,t,a){this.setState({editid:e,editkey:t,editval:a})}},{key:"onChangeInput",value:function(e,t){if(t&&t.length>50)return!1;var a={};a[e]=t,this.setState(a)}},{key:"editConfirm",value:function(e,t){var a=this,n=this.state,r=n.editid,l=n.editkey,i=n.editval;""==l&&""==i&&Object(p.a)({description:"请将编辑输入框补充完整",type:"warn"}),Object(m.d)(m.a.updateDeviceLabel,{labelId:r,labelKey:l||e,labelValue:i||t}).then(function(e){0==e.code&&(a.setState({editid:-1,editkey:"",editval:""}),a.getDeviceLabelList(),a.getLabelBaseList())})}},{key:"getDataSource",value:function(e){var t=this.props.LabelBaseList,a=[],n=[];return t.forEach(function(t){a.push(t.labelTypeName||"无法识别的Key"),e&&e==t.labelTypeName&&t.labelDatas.forEach(function(e){n.push(e.labelName||"无法识别的Value")})}),null==e?a:n}},{key:"getListHtml",value:function(){var e=this,t=this.props.deviceLabelList.list||[],a=this.state,n=a.editid,i=a.editkey,o=a.editval;return t.map(function(t,a){var s=t.id,u=t.labelKey,d=t.labelValue,m=t.labelCategory;return s==n?c.a.createElement("tr",{key:"tr_"+a},c.a.createElement("td",null,c.a.createElement(l.a,{value:i,dataSource:e.getDataSource(),style:{width:"80%"},onChange:e.onChangeInput.bind(e,"editkey"),placeholder:"Key",filterOption:!0})),c.a.createElement("td",null,c.a.createElement(l.a,{value:o,dataSource:e.getDataSource(i),style:{width:"80%"},onChange:e.onChangeInput.bind(e,"editval"),placeholder:"Value",filterOption:!0})),c.a.createElement("td",null,c.a.createElement("a",{href:"javascript:",onClick:e.editConfirm.bind(e,u,d)},"确认"),c.a.createElement(r.a,{type:"vertical"}),c.a.createElement("a",{href:"javascript:",onClick:e.editLabel.bind(e,-1,"","")},"取消"))):c.a.createElement("tr",{key:"tr_"+a},c.a.createElement("td",null,u),c.a.createElement("td",null,d),c.a.createElement("td",null,1==m?null:c.a.createElement(c.a.Fragment,null,c.a.createElement("a",{href:"javascript:",onClick:e.editLabel.bind(e,s,u,d)},"编辑"),c.a.createElement(r.a,{type:"vertical"}),c.a.createElement("a",{href:"javascript:",onClick:function(){return e.openDelMod(s,u,d)}},"删除"))))})}},{key:"changePage",value:function(e){this.setState({pageIndex:e},this.getDeviceLabelList)}},{key:"copyText",value:function(){document.getElementById("copy").select(),document.execCommand("Copy")}},{key:"render",value:function(){var e=this,t=this.state,a=t.infodata,r=t.addkey,o=t.addval,s=t.pageIndex,u=t.infoJurisdiction,d=t.tagJurisdiction,m=t.delLabelId,p=t.deleteLoading,b=t.dellabelKey,k=t.dellabelValue,O=this.props.deviceLabelList.pager,S=a.deviceUniqueId,N=a.deviceMac,I=a.productName,D=a.productType,j=a.productCode,M=a.deviceKey,C=a.deviceSecret,x=a.productId,P=a.productClass,F=a.activeTime,T=a.moduleVersion,H=a.pcbVersion,K=a.gateWay,_=a.deviceName,V=a.deviceSite,A=a.bindUser,B=a.macAddress,J=a.deviceIdentifier,R=a.simNumber,Y=a.online,U=this.props,W=U.defaultLabel,q=U.match.params.deviceid,Z=U.protocolLists,z=this.getListHtml(),Q=function(e){var t=e.title,a=e.label,n=e.type;return c.a.createElement("p",null,c.a.createElement("span",{className:"title"},t,"："),"visible"===n?c.a.createElement(g.a,{label:a||"",tip:"点击复制",copy:!0}):c.a.createElement("span",null,a))};return c.a.createElement("section",{className:"page-main-wrapper devicepage flex-column"},c.a.createElement(y.a,{title:"设备详情"}),c.a.createElement("div",{className:"headerbox"},c.a.createElement("p",{className:"maintext"},c.a.createElement("span",{className:"keyvalue"},c.a.createElement("span",{className:"key"},"设备ID："),S),c.a.createElement("span",{className:"keyvalue"},c.a.createElement("span",{className:"key"},"物理地址："),N),c.a.createElement("span",{className:"keyvalue"},c.a.createElement("span",{className:"key"},"产品名称："),I),c.a.createElement("span",{className:"keyvalue"},c.a.createElement("span",{className:"key"},"所属分类："),D),c.a.createElement("span",{className:"keyvalue"},c.a.createElement("span",{className:"key"},"在线状态："),Y?"在线":"离线"))),c.a.createElement("div",null,c.a.createElement(i.a,{defaultActiveKey:"1",tabBarStyle:{background:"#fff",padding:"0 24px"},onChange:function(t){return e.tabChangeHandle(t,x)}},u?c.a.createElement(we,{tab:"基本信息",key:"1"},c.a.createElement(h.a,{title:"设备信息"},c.a.createElement("div",{className:"device-info"},c.a.createElement(Q,{title:"设备ID",label:S}),c.a.createElement(Q,{title:"设备秘钥",label:C,type:"visible"}),c.a.createElement(Q,{title:"物理地址",label:N}),c.a.createElement(Q,{title:"入网时间",label:F&&f.a.utcToDev(F)}),c.a.createElement(Q,{title:"模组固件版本",label:T}),c.a.createElement(Q,{title:"MCU固件版本",label:H}),c.a.createElement(Q,{title:"绑定网关",label:K}),c.a.createElement(Q,{title:"设备昵称",label:_}),c.a.createElement(Q,{title:"设备位置",label:V}),c.a.createElement(Q,{title:"绑定C端账户",label:A}),c.a.createElement(Q,{title:"SIM卡号",label:R}),c.a.createElement(Q,{title:"IMEI",label:J}))),c.a.createElement(h.a,{title:"产品信息"},c.a.createElement("div",{className:"device-info"},c.a.createElement(Q,{title:"产品名称",label:I}),c.a.createElement(Q,{title:"产品ID",label:x}),c.a.createElement(Q,{title:"所属分类",label:D}),c.a.createElement(Q,{title:"产品类型",label:{0:"普通设备",1:"网关设备"}[P]||"--"}),c.a.createElement(Q,{title:"产品编码",label:j}),c.a.createElement(Q,{title:"产品秘钥",label:M,type:"visible"})))):null,c.a.createElement(we,{tab:"topic列表",key:"9"},c.a.createElement(L.a,{productIdHex:j||"${YourProductKey}",type:1})),c.a.createElement(we,{tab:"设备影子",key:"2"},c.a.createElement(ye,{deviceId:q})),d?c.a.createElement(we,{tab:"设备标签",key:"4"},c.a.createElement(h.a,{title:c.a.createElement(E.a,{label:"默认设备标签",tipPlacement:"right",tip:"设备标签是您给产品设备自定义的标识，标签的结构为：Key：value，您可以使用标签功能实现设备的分类统一管理。"})},c.a.createElement("div",{className:"section-bg tabdevice"},c.a.createElement("table",{className:"labeltable"},c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",{style:{width:"38%"}},"标签Key"),c.a.createElement("th",{style:{width:"62%"}},"标签Value"),c.a.createElement("th",{style:{width:"24%"}}))),c.a.createElement("tbody",null,W.length?W.map(function(e,t){return c.a.createElement("tr",{key:t},c.a.createElement("td",null,e.labelKey),c.a.createElement("td",null,e.labelValue))}):null)))),c.a.createElement(h.a,{title:c.a.createElement(E.a,{label:"自定义设备标签",tipPlacement:"right",tip:"设备标签是您给产品设备自定义的标识，标签的结构为：Key：value，您可以使用标签功能实现设备的分类统一管理。"})},c.a.createElement("div",{className:"section-bg tabdevice"},c.a.createElement("table",{className:"labeltable"},c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",{style:{width:"38%"}},"标签Key"),c.a.createElement("th",{style:{width:"38%"}},"标签Value"),c.a.createElement("th",{style:{width:"24%"}},"管理"))),c.a.createElement("tbody",null,z,c.a.createElement("tr",null,c.a.createElement("td",null,c.a.createElement(l.a,{value:r,dataSource:this.getDataSource(),style:{width:"80%"},onChange:this.onChangeInput.bind(this,"addkey"),placeholder:"Key",maxLength:"100",filterOption:!0})),c.a.createElement("td",null,c.a.createElement(l.a,{value:o,dataSource:this.getDataSource(r),style:{width:"80%"},onChange:this.onChangeInput.bind(this,"addval"),placeholder:"Value",maxLength:"100",filterOption:!0})),c.a.createElement("td",null,c.a.createElement("a",{href:"javascript:",onClick:this.addConfirm.bind(this)},"确认"))))),c.a.createElement("footer",{className:"list-pagination"},O&&O.totalRows>0?c.a.createElement(n.a,{className:"self-pa",total:O.totalRows,current:s,defaultCurrent:1,defaultPageSize:10,onChange:function(t){return e.changePage(t)},showTotal:function(e){return c.a.createElement("span",null,"共 ",c.a.createElement("a",null,e)," 条")},showQuickJumper:!0,hideOnSinglePage:!0}):null)))):null,c.a.createElement(we,{tab:"远程配置",key:"3"},c.a.createElement(w.a,{remoteType:"device",productId:x,deviceId:this.props.match.params.deviceid,deviceUniqueId:S,macAddress:B,protocolLists:Z})))),c.a.createElement(v.a,{visible:!!m,modalOKHandle:this.deleteOkHandle.bind(this),modalCancelHandle:this.closeDelLabelMod.bind(this),targetName:"key: ".concat(b,", value: ").concat(k),confirmLoading:p,title:"删除标签",needWarnIcon:!0,descText:"即将删除的标签"}))}}])&&ve(a.prototype,s),u&&ve(a,u),t}())||ce}}]);