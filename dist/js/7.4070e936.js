(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{DKeN:function(e,t,a){"use strict";a.r(t);a("Rm1S");var n=a("q1tI"),r=a.n(n),o=a("Ty5D"),l=(a("pNMO"),a("4Brf"),a("0oug"),a("TeQF"),a("4mDm"),a("2B1R"),a("qePV"),a("5DmW"),a("27RR"),a("NBAS"),a("tkto"),a("ExoC"),a("07d7"),a("PKPk"),a("FZtP"),a("3bBZ"),a("YQTV"),a("NUBc")),c=(a("L/Qf"),a("2/Rp")),i=(a("1vPl"),a("5rEg")),s=a("55Ip"),p=a("kqA8"),u=a("36rt"),d=a("FC04");function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=[],n=!0,r=!1,o=void 0;try{for(var l,c=e[Symbol.iterator]();!(n=(l=c.next()).done)&&(a.push(l.value),!t||a.length!==t);n=!0);}catch(e){r=!0,o=e}finally{try{n||null==c.return||c.return()}finally{if(r)throw o}}return a}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function f(e){var t=m(Object(n.useState)(!1),2),a=t[0],o=t[1],l=e.Info,c=l.appId,i=l.appIconLow,f=l.appName,h=l.appType,b=l.appDesc;return r.a.createElement("div",{className:"application-item-card flex-row"},r.a.createElement(p.a,{icon:i}),r.a.createElement("div",{className:"application-info flex-column flex1"},r.a.createElement(s.b,{key:"detail",to:"/open/base/application/details/"+c,target:"_blank"},r.a.createElement("span",{className:"name"},f)),r.a.createElement("div",{className:"application-id"},"APPID：",c),r.a.createElement("span",{className:"type"},"应用类型：",0===Number(h)?"移动应用":"小程序"),r.a.createElement("div",{title:b,className:"application-desc"},b)),r.a.createElement("div",{className:"del-app",onClick:function(){return o(!0)}},r.a.createElement(u.a,{type:"icon-delete",style:{fontSize:18}}),r.a.createElement("span",null,"删除")),a&&r.a.createElement(d.a,{visible:a,modalOKHandle:function(){return function(t){e.deleteApp(t)}(c)},modalCancelHandle:function(){o(!1)},targetName:f,title:"删除应用",descText:"应用删除后将无法继续APPID。即将删除应用",needWarnIcon:!0,tipText:"应用删除操作不可恢复。是否确认删除?"}))}var h=a("8QW8"),b=a("odoF"),g=a("Nlzp"),y=a("yqJg"),v=a("MeRu"),E=a("TL2v"),w=a("P2RN");a("qPrt");function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function A(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?P(a,!0).forEach(function(t){I(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):P(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function I(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function N(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function j(e,t){return!t||"object"!==O(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function D(e,t){return(D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var x=i.a.Search,k={pageRows:4,pageIndex:1},T=function(e){function t(e){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=j(this,S(t).call(this,e))).componentDidMount=function(){a._getApplicationList(k)},a.onChange=function(e){a._getApplicationList(A({},k,{pageIndex:e,appName:a.state.searchValue}))},a.searchApplication=function(e){a.setState(function(){return{searchValue:e}},function(){a._getApplicationList(A({},k,{appName:e}))})},a._getApplicationList=function(e){Object(g.c)(g.a.getApplicationList,A({},e,{version:"1.1"}),{loading:!0}).then(function(e){var t=e.code,n=e.data;t===y.a&&a.setState(function(){return{application:n}})})},a.deleteApp=function(e){Object(g.d)(g.a.deleteApp,{appId:Number(e)},{loading:!0}).then(function(e){e.code===y.a&&(Object(w.a)({message:"删除成功",description:"应用删除成功",type:"success"}),a._getApplicationList(k))})},a._getApplicationListHTML=function(){var e=a.state.application;return e.list&&e.list.length>0?e.list.map(function(e,t){return r.a.createElement("div",{className:"list-item",key:e.appId},r.a.createElement(f,{deleteApp:a.deleteApp,Info:e}))}):r.a.createElement(h.a,{style:{margin:"auto"}})},a.addNewApplication=function(){var e=a.state.application,t=void 0===e?{}:e,n=t.appMaxNum,r=void 0===n?0:n,o=t.currentNum;(void 0===o?0:o)>=r?Object(w.a)({description:"最多只能创建".concat(r,"个应用！")}):window.location.hash="/open/base/application/add"},a.state={application:{list:[],pager:{}},searchValue:"",createAppJurisdiction:Object(b.a)("创建应用")},a}var a,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&D(e,t)}(t,n["PureComponent"]),a=t,(o=[{key:"render",value:function(){var e=this,t=this.state,a=t.application,n=t.createAppJurisdiction,o=a.list,i=a.pager,s=o.length<=5?"lists-wrapper flex-row flex1":"lists-wrapper flex-row flex1 six-item",p=r.a.createElement("h6",null,"C-Life平台提供完善的应用开发管理服务。您可以构建自主品牌的APP终端应用或小程序应用，您可以在这里对应用进行统一管理。");return r.a.createElement("section",{className:"application-wrapper flex-column"},r.a.createElement("header",{className:"application-header"},r.a.createElement(v.a,{noback:!0,title:"应用管理"}),r.a.createElement("div",{className:"application-search"},r.a.createElement("div",{className:"application-header-input-wrapper searchBox"},r.a.createElement(x,{placeholder:"请输入应用名称查找",enterButton:!0,maxLength:100,onSearch:function(t){return e.searchApplication(t)}})),r.a.createElement("div",{className:"butFloatRight"},n?r.a.createElement(c.a,{type:"primary",onClick:this.addNewApplication,className:"application-header-add"},"创建应用"):null))),r.a.createElement("div",{className:"application-content-wrapper flex-column flex1"},r.a.createElement("div",{className:"application-content flex-column"},r.a.createElement(E.a,{desc:["温馨提示：",p]}),r.a.createElement("section",{className:s},this._getApplicationListHTML()),r.a.createElement("footer",{className:"application-list-pagination"},i&&i.totalRows&&r.a.createElement(l.a,{className:"self-pa",total:i.totalRows,current:i.pageIndex,defaultCurrent:1,defaultPageSize:i.pageRows,onChange:function(t){return e.onChange(t)},pageSize:i.pageRows,showTotal:function(e){return r.a.createElement("span",null,"共 ",r.a.createElement("a",null,e)," 条")},showQuickJumper:!0,hideOnSinglePage:!0})))))}}])&&N(a.prototype,o),i&&N(a,i),t}(),C=(a("zKZe"),a("UxlC"),a("MKzF"),a("kaz8")),V=(a("K4yd"),a("9yH6")),F=(a("Jmwx"),a("BMrR")),L=(a("rO+z"),a("kPKH")),R=(a("tULf"),a("Vl3Y")),_=(a("8QGh"),a("2fM7")),H=a("rVDo"),M=a("v7xx"),q=a("M7r8");a("O7vH");function B(){return(B=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=[],n=!0,r=!1,o=void 0;try{for(var l,c=e[Symbol.iterator]();!(n=(l=c.next()).done)&&(a.push(l.value),!t||a.length!==t);n=!0);}catch(e){r=!0,o=e}finally{try{n||null==c.return||c.return()}finally{if(r)throw o}}return a}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function J(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Z(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?J(a,!0).forEach(function(t){K(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):J(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function K(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}i.a.TextArea;var Q=_.a.Option,U=Object(n.memo)(function(e){return r.a.createElement("section",{className:"add-application-wrapper flex-column"},r.a.createElement(v.a,{backHandle:function(){return e.history.goBack()},title:"新建应用"}),r.a.createElement("div",{className:"add-application"},r.a.createElement(W,{saveAppBaseInfo:function(t){var a=t.appType;delete t.appType,t=Z({},t,{appMode:1});var n=0===Number(a)?"saveAppBaseInfo":"saveMiniProgramsInfo",r=0===Number(a)?"应用移动创建成功":"小程序应用创建成功";Object(g.d)(g.a[n],Z({},t)).then(function(t){t.code===y.a&&(Object(w.a)({message:"创建成功",description:r,type:"success"}),e.history.replace({pathname:"open/base/application/list"}))})},handleCancel:function(){e.history.goBack()}})))}),W=Object(n.memo)(R.a.create({name:"addApplication"})(Object(n.memo)(function(e){var t=z(Object(n.useState)(!1),2),a=t[0],o=t[1],l=z(Object(n.useState)(!1),2),c=l[0],s=l[1],p=e.form,u=p.getFieldDecorator,d=p.getFieldValue,m=d("appType"),f=Object(n.useRef)(),h=e.handleCancel;return r.a.createElement(R.a,B({},{labelCol:{span:3},wrapperCol:{span:12}},{className:"add-application-form"}),r.a.createElement(R.a.Item,{label:"应用名称",wrapperCol:{span:10},hasFeedback:!0},u("appName",{rules:[{required:!0,message:"请输入应用名称"},{max:20,message:"最多可以输入20个字符"}]})(r.a.createElement(i.a,{placeholder:"最多可以输入20个字符"}))),r.a.createElement(F.a,{gutter:8},r.a.createElement(L.a,{span:3,className:"app-icon-low-label"},r.a.createElement("span",{className:"form-require"},"应用图标")),r.a.createElement(L.a,{span:12},r.a.createElement(H.b,{ref:f,format:".png"}))),r.a.createElement(R.a.Item,{label:"应用类型"},u("appType",{initialValue:"0",rules:[{required:!0,message:"请输入应用名称"}]})(r.a.createElement(V.a.Group,null,r.a.createElement(V.a,{value:"0"},"移动应用"),r.a.createElement(V.a,{value:"2"},"小程序应用"))),r.a.createElement("br",null),("0"===m||void 0===m)&&r.a.createElement("span",{className:"app-type-desc"},"Android和iOS共用一个APPID"),"2"===m&&r.a.createElement("span",{className:"app-type-desc"},"微信的小程序应用")),("0"===m||void 0===m)&&r.a.createElement(R.a.Item,{className:"appVersion",label:"应用包"},r.a.createElement(F.a,{gutter:8},r.a.createElement(L.a,{span:24},r.a.createElement(C.a,{onChange:function(e){return o(e.target.checked)}},"Android版"))),r.a.createElement(F.a,{gutter:8},r.a.createElement(L.a,{span:16},r.a.createElement(R.a.Item,{label:" ",hasFeedback:!0,labelCol:{span:1},wrapperCol:{span:22},className:"android-input",colon:!1},u("androidPkg",{rules:[{required:a,message:"请输入应用包名"},{max:200,message:"最多可以输入200个字符"}]})(r.a.createElement(i.a,{placeholder:"请输入应用包名，例如com.example.mirror",disabled:!a})))),r.a.createElement(L.a,{span:8},r.a.createElement(R.a.Item,{label:" ",hasFeedback:!0,labelCol:{span:0},wrapperCol:{span:20},className:"android-schema-input",colon:!1},u("androidSchema",{rules:[{max:50,message:"最多可以输入50个字符"}]})(r.a.createElement(i.a,{placeholder:"请输入分享Schema",disabled:!a}))))),r.a.createElement(F.a,{gutter:8},r.a.createElement(L.a,{span:24},r.a.createElement(C.a,{onChange:function(e){return s(e.target.checked)}},"iOS版")),r.a.createElement(L.a,{span:16},r.a.createElement(R.a.Item,{label:" ",hasFeedback:!0,labelCol:{span:1},wrapperCol:{span:22},className:"ios-input",colon:!1},u("iosBundleId",{rules:[{required:c,message:"请输入应用包名"},{max:200,message:"最多可以输入200个字符"}]})(r.a.createElement(i.a,{placeholder:"请输入应用包名，例如com.example.mirror",disabled:!c})))),r.a.createElement(L.a,{span:8},r.a.createElement(R.a.Item,{label:" ",hasFeedback:!0,labelCol:{span:0},wrapperCol:{span:20},className:"ios-schema-input",colon:!1},u("iosSchema",{rules:[{max:50,message:"最多可以输入50个字符"}]})(r.a.createElement(i.a,{placeholder:"请输入分享Schema",disabled:!c})))))),"2"===m&&r.a.createElement(R.a.Item,{label:"微信应用ID",hasFeedback:!0},u("weChatAppId",{rules:[{required:!0,message:"请输入在微信申请时的APPID"},{max:100,message:"最多可以输入100个字符"},{pattern:/^[a-zA-Z0-9]*$/,message:"APPID仅支持数字或字母"}]})(r.a.createElement(i.a,{placeholder:"请输入在微信申请时的APPID"}))),"2"===m&&r.a.createElement(R.a.Item,{label:"微信应用Secret",hasFeedback:!0},u("secret",{rules:[{required:!0,message:"请输入在微信申请时的APP的Secret"},{max:100,message:"最多可以输入100个字符"},{pattern:/^[a-zA-Z0-9]*$/,message:"APP的Secret仅支持数字或字母"}]})(r.a.createElement(i.a,{placeholder:"请输入在微信申请时的APP的Secret"}))),r.a.createElement(R.a.Item,{label:"应用构建模式",wrapperCol:{span:6}},u("reportFormsType",{initialValue:"开发模式"})(r.a.createElement(_.a,null,r.a.createElement(Q,{value:"开发模式"},"开发模式")))),r.a.createElement(q.a,{label:"应用简介",formId:"appDesc",astrictNub:100,placeholder:"最多可以输入100个字符",getFieldDecorator:u,getFieldValue:d,isRequired:!0}),r.a.createElement(R.a.Item,null,r.a.createElement(M.a,{preHandle:function(t){t.preventDefault();var a=e.form.validateFieldsAndScroll,n=e.saveAppBaseInfo;a(function(e,t){if(!e){console.log("Received values of form: ",t);var a=f.current.getFileListUrl();if(a.length<=0)return void Object(w.a)({description:"请选择文件！",type:"warn"});t.appIconLow=a[0],n(t)}})},nextHandle:h,preText:"确认",nextText:"取消",nextType:"default",preType:"primary"})))}))),X=(a("pjDv"),a("oVuX"),a("+2oP"),a("JfAA"),a("mbEz"),a("wCAj")),Y=(a("2oDE"),a("CtXQ")),$=(a("AUBz"),a("ZTPi")),G=a("BkRI"),ee=a.n(G),te=a("gs3f"),ae=a("DgvE"),ne=(a("yq1k"),a("yXV3"),a("pDQq"),a("JTJg"),a("k3Gp"),a("kLXV"));function re(e){return(re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oe(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function le(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function ce(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function ie(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function se(e,t){return!t||"object"!==re(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function pe(e){return(pe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ue(e,t){return(ue=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var de=i.a.Search,me=function(e){function t(e){var a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=se(this,pe(t).call(this,e))).getListAllProductAndAccreditInfo=function(e){var t=a.props,n=t.appId,r=t.relationedProductIds,o=t.currentAppType,l=r&&r[1===o?"android":"ios"]||[];Object(g.c)(g.a.getDevProductList,function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?le(a,!0).forEach(function(t){ce(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):le(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({version:"1.1",appId:n},e),{loading:!0}).then(function(e){var t=e.code,n={list:(e.data||[]).filter(function(e){return!l.includes(e.productId)}),pager:{}};t===y.a&&a.setState(function(){return{listAllProductAndAccreditInfo:n}})})},a.handleSubmit=function(e){e.preventDefault();var t=oe(a.state.checkedValues),n=a.props,r=n.relationProductList,o=1===n.currentAppType?r.listAndroid:r.listIos;o&&o.map(function(e){return e.productId});0!==t.length?a.props.updateRelaProduct(t):Object(w.a)({description:"请选择需要关联的产品",type:"warn"})},a.handleCancel=function(e){(0,a.props.showDialog)(e)},a.onChange=function(e){a.setState(function(){return{checkedValues:e}})},a.handleSearch=function(e){a.setState(function(){return{searchValue:e,checkedValues:[]}},function(){a.getListAllProductAndAccreditInfo({productName:e})})},a.clickIconHandle=function(e,t){e.stopPropagation();var n=a.state.checkedValues,r=ee()(n),o=r.indexOf(t);-1===o?r.push(t):r.splice(o,1),a.setState({checkedValues:r})};var n=a.props,r=n.currentAppType,o=n.relationProductList,l=1===r?o.listAndroid:o.listIos,c=l&&l.map(function(e){return e.productId});return a.state={checkedValues:c||[],searchValue:"",isFirst:!0,listAllProductAndAccreditInfo:{list:[],pager:{}}},a}var a,o,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ue(e,t)}(t,n["Component"]),a=t,(o=[{key:"componentDidMount",value:function(){this.getListAllProductAndAccreditInfo()}},{key:"render",value:function(){var e=this,t=this.props.showAddProductRelationDialog,a=this.state,n=a.listAllProductAndAccreditInfo,o=a.checkedValues;return r.a.createElement(ne.a,{width:"63%",visible:t,title:"添加产品关联",className:"add-product-relation-modal",onCancel:function(){return e.handleCancel("showAddProductRelationDialog")},maskClosable:!1,style:{minWidth:900},footer:[r.a.createElement(c.a,{key:"submit",type:"primary",onClick:this.handleSubmit},"确认"),r.a.createElement(c.a,{key:"cancel",onClick:function(){return e.handleCancel("showAddProductRelationDialog")}},"取消")]},r.a.createElement("div",{className:"product-relation flex-column"},r.a.createElement("div",{className:"desc"},"您可以添加由您创建和给予授权的硬件产品"),r.a.createElement("div",{className:"search-wrapper"},r.a.createElement(de,{placeholder:"请输入产品ID，产品名称搜索产品",maxLength:100,onSearch:function(t){return e.handleSearch(t)},style:{width:"50%"},enterButton:!0})),r.a.createElement("div",{className:"mescroll-refresh flex1",style:{height:"max-content"}},r.a.createElement(C.a.Group,{style:{width:"100%"},value:o,onChange:this.onChange},r.a.createElement("div",{id:"mescroll",className:"mescroll"},r.a.createElement("div",{id:"dataList",className:"data-list flex-row"},n.list.length>0&&n.list.map(function(t,a){var n=t.productId,o=t.productIcon,l=t.productName;return r.a.createElement("div",{key:n,className:"list-item flex-column"},r.a.createElement("i",{className:"product-pic"},r.a.createElement("div",{style:{cursor:"pointer"},onClick:function(t){return e.clickIconHandle(t,n)}},r.a.createElement(p.a,{icon:o})),r.a.createElement("div",{className:"check-box"},r.a.createElement(C.a,{value:n}))),r.a.createElement("p",{className:"product-name flex1 flex-row"},l),r.a.createElement("div",{className:"product-id flex-row flex1"},n))})))))))}}])&&ie(a.prototype,o),l&&ie(a,l),t}(),fe=(a("TfFZ"),a("3S7+"));a("lrZY");function he(e){return(he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function be(){return(be=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function ge(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function ye(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ge(a,!0).forEach(function(t){ve(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ge(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function ve(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Ee(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function we(e,t){return!t||"object"!==he(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Oe(e){return(Oe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Pe(e,t){return(Pe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}i.a.TextArea;var Ae=_.a.Option,Ie=function(e){function t(e){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=we(this,Oe(t).call(this,e))).handleCancel=function(e){(0,a.props.showDialog)(e)},a.handleSubmit=function(e){e.preventDefault();var t=a.props.form,n=t.validateFieldsAndScroll,r=t.getFieldValue,o=a.props,l=o.createAppVersion,c=o.curAppVersionDetail,i=r("appType");n(function(e,t){if(!e){console.log("Received values of form: ",t);var n=c.appVersionId;if(1===i||void 0===i){var r=a.state.url;if(n)r=""===r?c.url:r;else if(!r&&"{}"===JSON.stringify(c))return Object(w.a)({description:"请先上传文件，自动生成升级链接！",type:"warn"}),!1;l(ye({},t,{url:r,appVersionId:n}))}else l(ye({},t,{appVersionId:n}))}})},a.getUrl=function(){var e=a.versionApk.getFileListUrl();a.setState(function(){return{url:e[0]}})},a.componentDidMount=function(){var e=a.props.curAppVersionDetail;if("{}"!==JSON.stringify(e)){var t=[{uid:"-1",name:e.url,status:"done",url:e.url}];setTimeout(function(){a.versionApk.setState({fileList:t})})}},a.validateMainVersion=function(e,t,a){t?/^[0-9]*$/.test(t)?t.length>100&&a("最多可以输入100个数值型数据"):a("版本序列标识仅支持数值型"):a("请输入版本序列标识，仅支持数值型"),a()},a.state={url:"",appType:1},a}var a,o,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pe(e,t)}(t,n["Component"]),a=t,(o=[{key:"render",value:function(){var e=this,t=this.props.form,a=t.getFieldDecorator,n=t.getFieldValue,o=this.props,l=o.showAppVersionDialog,s=o.curAppVersionId,p=o.curAppVersionDetail,u=o.appInfo,d=s?"编辑应用版本":"创建应用版本",m=(u.androidPkg,u.iosBundleId,n("appType")),f=n("status")||1;return r.a.createElement(ne.a,{width:"50%",visible:l,centered:!0,title:d,className:"add-version-modal",onCancel:function(){return e.handleCancel("showAppVersionDialog")},maskClosable:!1,footer:[r.a.createElement(c.a,{key:"submit",type:"primary",onClick:this.handleSubmit},"确认"),r.a.createElement(c.a,{key:"cancel",onClick:function(){return e.handleCancel("showAppVersionDialog")}},"取消")]},r.a.createElement("div",{className:"add-version-from-wrapper"},r.a.createElement(R.a,be({},{labelCol:{span:5},wrapperCol:{span:19}},{className:"add-version-from"}),r.a.createElement(R.a.Item,{label:"版本序列标识",wrapperCol:{span:10}},a("mainVersion",{rules:[{validator:this.validateMainVersion}]})(r.a.createElement(i.a,{placeholder:"请输入版本序列标识",style:{width:"calc(100% )"}}))),r.a.createElement(R.a.Item,{label:"版本号",wrapperCol:{span:10}},a("externalVersion",{rules:[{required:!0,message:"请输入版本号"},{max:100,message:"最多可以输入100个字符"}]})(r.a.createElement(i.a,{placeholder:"推荐使用XYZ的格式，如：V1.1.0"}))),r.a.createElement(R.a.Item,{label:"版本类型",wrapperCol:{span:10}},a("appType",{rules:[{required:!0,message:"请选择版本类型"}]})(r.a.createElement(_.a,{showSearch:!0,placeholder:"请选择版本类型",optionFilterProp:"children"},r.a.createElement(Ae,{value:1},"Android版"),r.a.createElement(Ae,{value:2},"iOS版")))),(1===m||void 0===m)&&r.a.createElement(R.a.Item,{label:"版本附件"},r.a.createElement(H.a,{onRef:function(t){return e.versionApk=t},format:".apk",maxSize:200,isNotImg:!0,cb:this.getUrl})),(1===m||void 0===m)&&r.a.createElement(R.a.Item,{label:"升级链接"},r.a.createElement("a",{href:"javascript:"},this.state.url||p.url),r.a.createElement("div",{className:"url-desc"},"上传附件链接后自动生成升级链接")),2===m&&r.a.createElement(R.a.Item,{label:"升级链接"},a("url",{rules:[{required:!0,message:"请输入链接"}]})(r.a.createElement(i.a,{placeholder:"请确保链接填写完全正确",style:{width:"calc(53% )"}})),r.a.createElement("div",{className:"url-desc"},"请先将应用包上传到iOS应用市场，然后将获取的链接复制到这里")),r.a.createElement(R.a.Item,{label:"升级方式"},a("status",{initialValue:1,rules:[{required:!0,message:"请选择升级方式"}]})(r.a.createElement(_.a,{showSearch:!0,placeholder:"请选择升级方式",optionFilterProp:"children",style:{width:"calc(53% )",marginRight:"6px"}},r.a.createElement(Ae,{value:1},"普通升级"),r.a.createElement(Ae,{value:2},"强制升级"))),r.a.createElement(fe.a,{title:1===f?"用户可选择是否升级到新版本，不升级仍然可以继续使用":"用户必须确认升级才可以继续使用",placement:"top"},r.a.createElement(Y.a,{type:"question-circle-o"}))),r.a.createElement(q.a,{label:"备注",formId:"releaseNote",astrictNub:100,placeholder:"升级内容的提示信息，用户查看升级时可见。最多输入100个字符。",getFieldDecorator:a,isRequired:!0,getFieldValue:n}))))}}])&&Ee(a.prototype,o),l&&Ee(a,l),t}(),Ne=R.a.create({name:"addAppVersion",mapPropsToFields:function(e){var t=e.curAppVersionDetail,a=e.appInfo.appVersionType,n=null;n=1===a.value?2:1;var r={};if(t)for(var o=0,l=Object.keys(t);o<l.length;o++){var c=l[o];r[c]=R.a.createFormField({value:t[c]})}return r.appType=R.a.createFormField({value:3===a.value?1:n}),r}})(Ie);a("KmTs");function je(){return(je=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function Se(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=[],n=!0,r=!1,o=void 0;try{for(var l,c=e[Symbol.iterator]();!(n=(l=c.next()).done)&&(a.push(l.value),!t||a.length!==t);n=!0);}catch(e){r=!0,o=e}finally{try{n||null==c.return||c.return()}finally{if(r)throw o}}return a}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function De(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function xe(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?De(a,!0).forEach(function(t){ke(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):De(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function ke(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var Te=Object(n.memo)(R.a.create({name:"editApplication",mapPropsToFields:function(e){for(var t=e.appInfo,a={},n=0,r=Object.keys(t);n<r.length;n++){var o=r[n];a[o]=R.a.createFormField(xe({},t[o],{value:t[o].value}))}return a}})(Object(n.memo)(function(e){var t=Object(n.useRef)(),a=Se(Object(n.useState)(!1),2),o=a[0],l=a[1],c=e.form,s=c.getFieldDecorator,p=c.getFieldValue;Object(n.useEffect)(function(){var a=e.appInfo.appIconLow,n=[{uid:"-1",name:a.value,status:"done",url:a.value}];t.current.setFileList(n)},[e]);var u=e.appInfo,d=u.appType,m=u.appId,f=u.appSecret,h=o?f.value:Object(ae.r)(f.value,10),b=o?"eye-invisible":"eye";return r.a.createElement(R.a,je({},{labelCol:{span:2},wrapperCol:{span:12}},{className:"edit-application-form"}),r.a.createElement(R.a.Item,{label:"应用名称",wrapperCol:{span:10},hasFeedback:!0},s("appName",{rules:[{required:!0,message:"请输入应用名称"},{max:20,message:"最多可以输入20个字符"}]})(r.a.createElement(i.a,{placeholder:"最多可以输入20个字符"}))),r.a.createElement(F.a,{gutter:8},r.a.createElement(L.a,{span:2,className:"app-icon-low-label"},r.a.createElement("span",{className:"form-require"},"应用图标")),r.a.createElement(L.a,{span:12},r.a.createElement(H.b,{ref:t,format:".png"}))),r.a.createElement(R.a.Item,{label:"应用类型"},0===d.value?"移动应用":"小程序应用"),(0===d.value||void 0===d.value)&&r.a.createElement(R.a.Item,{className:"appVersion",label:"应用包"},r.a.createElement(F.a,{gutter:8},r.a.createElement(L.a,{span:24},"Android版")),r.a.createElement(F.a,{gutter:8},r.a.createElement(L.a,{span:16},r.a.createElement(R.a.Item,{label:"",hasFeedback:!0,labelCol:{span:1},wrapperCol:{span:22},className:"android-input",colon:!1},s("androidPkg",{rules:[{max:200,message:"最多可以输入200个字符"}]})(r.a.createElement(i.a,{placeholder:"请输入应用包名，例如com.example.mirror"})))),r.a.createElement(L.a,{span:8},r.a.createElement(R.a.Item,{label:"",hasFeedback:!0,labelCol:{span:0},wrapperCol:{span:20},className:"android-schema-input",colon:!1},s("androidSchema",{rules:[{max:50,message:"最多可以输入50个字符"}]})(r.a.createElement(i.a,{placeholder:"请输入分享Schema"}))))),r.a.createElement(F.a,{gutter:8},r.a.createElement(L.a,{span:24},"iOS版"),r.a.createElement(L.a,{span:16},r.a.createElement(R.a.Item,{label:"",hasFeedback:!0,labelCol:{span:1},wrapperCol:{span:22},className:"ios-input",colon:!1},s("iosBundleId",{rules:[{max:200,message:"最多可以输入200个字符"}]})(r.a.createElement(i.a,{placeholder:"请输入应用包名，例如com.example.mirror"})))),r.a.createElement(L.a,{span:8},r.a.createElement(R.a.Item,{label:"",hasFeedback:!0,labelCol:{span:0},wrapperCol:{span:20},className:"ios-schema-input",colon:!1},s("iosSchema",{rules:[{max:50,message:"最多可以输入50个字符"}]})(r.a.createElement(i.a,{placeholder:"请输入分享Schema"})))))),"2"===d&&r.a.createElement(R.a.Item,{label:"微信应用ID",hasFeedback:!0},s("weChatAppId",{rules:[{required:!0,message:"请输入在微信申请时的APPID"},{max:100,message:"最多可以输入100个字符"},{pattern:/^[a-zA-Z0-9]*$/,message:"APPID仅支持数字或字母"}]})(r.a.createElement(i.a,{placeholder:"请输入在微信申请时的APPID"}))),"2"===d&&r.a.createElement(R.a.Item,{label:"微信应用Secret",hasFeedback:!0},s("secret",{rules:[{required:!0,message:"请输入在微信申请时的APP的Secret"},{max:100,message:"最多可以输入100个字符"},{pattern:/^[a-zA-Z0-9]*$/,message:"APP的Secret仅支持数字或字母"}]})(r.a.createElement(i.a,{placeholder:"请输入在微信申请时的APP的Secret"}))),r.a.createElement(R.a.Item,{label:"APPID",className:"app-id"},r.a.createElement("span",null,m.value),r.a.createElement("span",{className:"appId-desc"},"由系统自动分配的APP唯一标识码")),r.a.createElement(R.a.Item,{label:"APPSecret",className:"app-secret"},h,r.a.createElement(Y.a,{type:b,className:"icon-display",style:{marginLeft:"10px",fontSize:"18px"},theme:"twoTone",twoToneColor:"#2874FF",onClick:function(){return l(!o)}}),r.a.createElement("span",{className:"secret-desc"},"由系统自动分配的密码")),r.a.createElement(R.a.Item,{label:"应用构建模式",wrapperCol:{span:6}},r.a.createElement("span",null,"开发模式")),r.a.createElement(q.a,{label:"应用简介",formId:"appDesc",astrictNub:100,placeholder:"最多可以输入100个字符",getFieldDecorator:s,isRequired:!0,getFieldValue:p}),r.a.createElement(R.a.Item,null,r.a.createElement(M.a,{preHandle:function(a){a.preventDefault();var n=e.form.validateFieldsAndScroll,r=e.saveAppBaseInfo;n(function(e,a){if(!e){console.log("Received values of form: ",a);var n=t.current.getFileListUrl();if(n.length<=0)return void Object(w.a)({description:"请选择文件!",type:"warn"});a.appIconLow=n[0],r(a)}})},nextHandle:function(){e.handleCancel("showEditAppForm")},preText:"确认",nextText:"取消",nextType:"default",preType:"primary"})))})));a("RVjv");function Ce(e){return(Ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ve(){return(Ve=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function Fe(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Le(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Re(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Le(a,!0).forEach(function(t){_e(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Le(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function _e(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function He(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Me(e,t){return!t||"object"!==Ce(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function qe(e){return(qe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Be(e,t){return(Be=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ze=$.a.TabPane,Je={pageRows:10,pageIndex:1},Ze=[{title:"删除应用",desc:"应用删除后将无法继续APPID。即将删除应用",tip:"应用删除操作不可恢复。是否确认删除?",targetName:"我的app"},{title:"删除产品关联",desc:"即将删除产品关联",tip:"是否确认删除?",targetName:"宝莱特血压计"},{title:"删除应用版本",desc:"删除后用户将无法再获取到该版本升级，已升级用户不受影响。即将删除应用版本",tip:"是否确认删除?",targetName:"V1.1.3"}],Ke=function(e){function t(e){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=Me(this,qe(t).call(this,e))).componentDidMount=function(){var e=a.state.appId;a._getAppInfo(e)},a.handleChange=function(e,t){a.setState(function(){return _e({},e,t)})},a.onChange=function(e){a._getVersionList({pageIndex:e,pageRows:5})},a._getVersionList=function(e){var t=a.state.appId;Object(g.c)(g.a.getVersionList,Re({appId:t},e,{version:"1.1"}),{loading:!0}).then(function(e){var t=e.code,n=e.data;t===y.a&&"{}"!==JSON.stringify(n)&&a.setState(function(){return{versionList:n}})})},a.createAppVersion=function(e){var t=a.state.appId;Object(g.d)(g.a.createAppVersion,Re({},e,{appType:Number(e.appType),status:Number(e.status),appId:Number(t),mainVersion:Number(e.mainVersion)}),{loading:!0}).then(function(e){e.code===y.a&&(Object(w.a)({message:"创建成功",description:"创建应用版本成功",type:"success"}),a.setState(function(e){return{showAppVersionDialog:!e.showAppVersionDialog}},function(){a._getVersionList(Re({},Je,{pageRows:5}))}))})},a.saveAppInfo=function(e){var t=a.state,n=t.appId,r=t.appInfo,o=r.appType.value;e=Re({},e,{appMode:1,appId:n});var l=0===o?"saveAppBaseInfo":"saveMiniProgramsInfo",c=0===o?"移动应用编辑成功":"小程序应用编辑成功";2===o&&(e=Re({},e,{weChatAppId:r.weChatAppId.value,secret:r.secret.value})),Object(g.d)(g.a[l],Re({},e),{loading:!0}).then(function(e){e.code===y.a&&(Object(w.a)({description:c,type:"warn"}),a.setState(function(e){return{showEditAppForm:!e.showEditAppForm}},function(){var e=a.state.appId;a._getAppInfo(e)}))})},a._getRelaProducts=function(e){Object(g.c)(g.a.getRelaProducts,{appId:e,version:"1.1",paged:!1},{loading:!0}).then(function(e){var t=e.code,n=e.data;if(t===y.a){var r={listAndroid:[],listIos:[]},o={android:[],ios:[]};n.list&&n.list.length>0&&n.list.forEach(function(e){var t=e.appVersionType,a=e.productId;1===t?(r.listAndroid.push(e),o.android.push(a)):2===t?(r.listIos.push(e),o.ios.push(a)):(r.listAndroid.push(e),r.listIos.push(e),o.ios.push(a),o.android.push(a))}),a.setState(function(){return{relationProductList:r,relationedProductIds:o}})}})},a._getAppInfo=function(e){Object(g.c)(g.a.getAppInfo,{appId:e,version:"1.1"},{loading:!0}).then(function(t){var n=t.code,r=t.data;if(n===y.a){var o={},l=ee()(r);Ze[2].targetName=l.appName;for(var c=0,i=Object.keys(l);c<i.length;c++){var s=i[c];o[s]={value:l[s]}}var p=l.androidPkg,u=l.iosBundleId,d=l.appType;a.setState(function(e){return{appInfo:Re({},e.appInfo,{},o),currentAppType:!p&&u?2:1}}),0!==d&&2!==d||(a._getRelaProducts(e),a._getVersionList(Re({},Je,{pageRows:5})))}})},a.updateOkHandle=function(e){var t=a.state,n=t.curProductID,r=t.curAppVersionId;"relationProduct"===e?a.deleteRelationProduct(n):"appVersion"===e?a.deleteAppVersion(r):a.deleteApp()},a.updateCancelHandle=function(e){a.changeState(e)},a.showDialog=function(e,t,n,r,o){"targetName"===r&&(Ze[0].targetName=o),"versionTargetName"===r&&(Ze[1].targetName=o),a.setState(function(a){var r;return t||n?(_e(r={},e,!a[e]),_e(r,t,n),r):_e({},e,!a[e])})},a.deleteRelationProduct=function(e){Object(g.d)(g.a.deleteRelationProduct,{productId:e,appId:Number(a.state.appId),appType:Number(a.state.currentAppType)},{loading:!0}).then(function(e){e.code===y.a&&a.setState(function(e){return{showDeleteDialog:!e.showDeleteDialog}},function(){a._getRelaProducts(a.state.appId)})})},a.deleteAppVersion=function(e){Object(g.d)(g.a.deleteAppVersion,{appVersionId:e},{loading:!0}).then(function(e){e.code===y.a&&a.setState(function(e){return{showDeleteDialog:!e.showDeleteDialog}},function(){a._getVersionList(Re({},Je,{pageRows:5}))})})},a.updateRelaProduct=function(e){var t=a.state,n=t.appId,r=t.currentAppType,o=t.relationProductList;1===r?o.listAndroid:o.listIos;Object(g.d)(g.a.updateRelaProduct,{productIds:Fe(e).join(","),appId:Number(n),appVersionType:Number(r)},{loading:!0,needJson:!0,noInstance:!0}).then(function(e){e.code===y.a&&a.setState(function(e){return{showAddProductRelationDialog:!e.showAddProductRelationDialog}},function(){Object(w.a)({message:"关联成功",description:"产品关联成功",type:"success"}),a._getRelaProducts(n)})})},a.changeState=function(e){a.setState(function(t){return _e({},e,!t[e])})},a.getAppVersionDetail=function(e){Object(g.c)(g.a.getAppVersionDetail,{id:e,version:"1.1"},{loading:!0}).then(function(t){var n=t.code,r=t.data;n===y.a&&a.setState(function(){return{curAppVersionDetail:r}},function(){a.showDialog("showAppVersionDialog","curAppVersionId",e)})})},a._getAppTypeHTML=function(){var e=a.state,t=e.appInfo,n=e.currentAppType,o=(t.androidPkg,t.iosBundleId,""),l="",i="";return 0===t.appType.value?(o=r.a.createElement(c.a,{onClick:function(){return a.handleChange("currentAppType",1)},type:1===n?"primary":"default",ghost:1===n},"Android端"),l=r.a.createElement(c.a,{onClick:function(){return a.handleChange("currentAppType",2)},type:2===n?"primary":"default",ghost:2===n},"iOS端")):i=r.a.createElement(c.a,{type:"primary",ghost:!0},"小程序"),{appTypeAndroidHTML:o,appTypeIosHTML:l,weChatHTML:i}},a.addNewVersion=function(){var e=a.state.versionList,t=e.appVersionMaxNum,n=void 0===t?0:t,r=e.currentNum;(void 0===r?0:r)>=n?Object(w.a)({description:"最多只能创建".concat(n,"个应用版本")}):a.showDialog("showAppVersionDialog","curAppVersionDetail",{})},a.getAntDVersionList=function(){var e=a.state.versionList.list.slice();return e.forEach(function(e,t){e.key=e.appVersionId}),{antDVersionList:e,columns:[{title:"版本号",dataIndex:"externalVersion",key:"externalVersion"},{title:"版本序列标志",dataIndex:"appSign",key:"appSign"},{title:"版本类型",dataIndex:"appType",key:"appType",render:function(e){return r.a.createElement("div",{className:"version-type"},1===Number(e)?"Android":"iOS")}},{title:"升级方式",dataIndex:"status",key:"status",render:function(e){return r.a.createElement("div",{className:"upgrade"},1===Number(e)?"普通升级":"强制升级")}},{title:"创建时间",dataIndex:"releaseTime",key:"releaseTime",render:function(e){return e?ae.a.utcToDev(e):"--"}},{title:"操作",dataIndex:"opt",key:"opt",render:function(e,t){return r.a.createElement("div",null,r.a.createElement("a",{href:"javascript:",onClick:function(){return a.getAppVersionDetail(t.appVersionId)}},"编辑"),r.a.createElement("span",null,"  |  "),r.a.createElement("a",{href:"javascript:",onClick:function(){return a.showDialog("showDeleteDialog","curAppVersionId",t.appVersionId,"versionTargetName",t.appName)}},"删除"))}}]}},a.state={appId:a.props.match.params.appId,showDeleteDialog:!1,showAddProductRelationDialog:!1,showAppVersionDialog:!1,showApplicationDialog:!1,curProductID:null,curAppVersionId:null,currentTab:1,currentAppType:1,curAppVersionDetail:{},appInfo:{appId:{value:""},appName:{value:""},appSecret:{value:""},createTime:{value:""},appType:{value:""},appMode:{value:""},iosBundleId:{value:""},appDesc:{value:""},weChatAppId:{value:""},secret:{value:""},androidPkg:{value:""},appIconLow:{value:""},appVersionType:{value:""}},showSecret:!1,relationProductList:{listAndroid:[],listIos:[]},versionList:{list:[],pager:{}},relationProductJurisdiction:Object(b.a)("关联产品"),versionPublishJurisdiction:Object(b.a)("发布版本"),showEditAppForm:!0,relationedProductIds:{}},a}var a,o,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Be(e,t)}(t,n["PureComponent"]),a=t,(o=[{key:"render",value:function(){var e=this,t=this.state,a=t.showDeleteDialog,n=t.versionPublishJurisdiction,o=t.relationProductJurisdiction,l=t.versionList,i=t.showAppVersionDialog,s=t.showAddProductRelationDialog,m=t.currentAppType,f=t.showSecret,b=t.appInfo,g=t.relationProductList,y=t.showEditAppForm,E=b.appId,w=b.appName,O=b.appSecret,P=b.appType,A=b.iosBundleId,I=b.androidPkg,N=b.appDesc,j=b.androidSchema,S=b.iosSchema,D=b.appIconLow,x=(b.appVersionType,Number(this.state.currentTab)),k=1===x?"relationProduct":"appVersion",T=f?"eye-invisible":"eye",C=f?O.value:Object(ae.r)(O.value,10),V=1===m?g.listAndroid:g.listIos,R=l.pager,_=this._getAppTypeHTML(),H=this.getAntDVersionList(),M=H.antDVersionList,q=H.columns;return r.a.createElement("section",{className:"application-detail-wrapper flex-column"},r.a.createElement("header",{className:"application-detail-header"},r.a.createElement(v.a,{noback:!0,title:"应用详情"}),r.a.createElement(te.a,{className:"clearfix"},r.a.createElement("span",{className:"fl app-name"},"应用名称：",w.value),r.a.createElement("span",{className:"fl app-id"},"APPID：",E.value),r.a.createElement("span",{className:"fl app-secret"},"APPSecret：",C,r.a.createElement(Y.a,{type:T,className:"icon-display",style:{fontSize:"18px"},theme:"twoTone",twoToneColor:"#2874FF",onClick:function(){return e.changeState("showSecret")}})))),r.a.createElement("div",{className:"antd-content flex-column flex1"},r.a.createElement($.a,{defaultActiveKey:"0",onChange:function(t){return e.handleChange("currentTab",t)},tabBarStyle:{background:"#fff",padding:"0 24px"}},r.a.createElement(ze,{tab:"基础信息",key:"0"},y?r.a.createElement("div",{className:"application-detail-content flex1"},r.a.createElement(c.a,{type:"primary",className:"edit-app",onClick:function(){return e.changeState("showEditAppForm")}},"编辑应用"),r.a.createElement(F.a,{gutter:8,className:"detail-line"},r.a.createElement(L.a,{span:2,className:"detail-left"},"应用名称："),r.a.createElement(L.a,{span:10,className:"detail-right"},w.value)),r.a.createElement(F.a,{gutter:8,className:"detail-line app-icon"},r.a.createElement(L.a,{span:2,className:"detail-left"},"应用图标："),r.a.createElement(L.a,{span:21,className:"detail-right"},r.a.createElement(p.a,{icon:D.value}))),r.a.createElement(F.a,{gutter:8,className:"detail-line"},r.a.createElement(L.a,{span:2,className:"detail-left"},"应用类型："),r.a.createElement(L.a,{span:21,className:"detail-right"},0===P.value?"移动应用":"小程序应用")),r.a.createElement(F.a,{gutter:8,className:"detail-line app-package"},r.a.createElement(L.a,{span:2,className:"detail-left"},"应用包："),r.a.createElement(L.a,{span:21,className:"detail-right"},r.a.createElement("div",{className:"android clearfix"},I.value&&r.a.createElement("div",{className:"android-package fl"},I.value," - Android版"),j&&j.value&&r.a.createElement("div",{className:"android-schema fl"},"分享Schema为 ：",j&&j.value)),r.a.createElement("div",{className:"ios clearfix"},A.value&&r.a.createElement("div",{className:"ios-package fl"},A.value," - iOS版"),S&&S.value&&r.a.createElement("div",{className:"ios-schema fl"},"分享Schema为 ：",S&&S.value)))),r.a.createElement(F.a,{gutter:8,className:"detail-line"},r.a.createElement(L.a,{span:2,className:"detail-left"},"APPID："),r.a.createElement(L.a,{span:21,className:"detail-right"},E.value,r.a.createElement("span",{className:"appId-desc"},"由系统自动分配的APP唯一标识码"))),r.a.createElement(F.a,{gutter:8,className:"detail-line"},r.a.createElement(L.a,{span:2,className:"detail-left"},"APPSecret："),r.a.createElement(L.a,{span:21,className:"detail-right"},C,r.a.createElement(Y.a,{type:T,className:"icon-display",style:{fontSize:"18px"},theme:"twoTone",twoToneColor:"#2874FF",onClick:function(){return e.changeState("showSecret")}}),r.a.createElement("span",{className:"secret-desc"},"由系统自动分配的密码"))),r.a.createElement(F.a,{gutter:8,className:"detail-line"},r.a.createElement(L.a,{span:2,className:"detail-left"},"构建模式："),r.a.createElement(L.a,{span:21,className:"detail-right"},"开发模式")),r.a.createElement(F.a,{gutter:8,className:"detail-line"},r.a.createElement(L.a,{span:2,className:"detail-left"},"应用简介："),r.a.createElement(L.a,{span:21,className:"detail-right"},N.value))):r.a.createElement("div",{className:"application-detail-content"},r.a.createElement(Te,{appInfo:b,saveAppBaseInfo:this.saveAppInfo,handleCancel:this.changeState}))),o?r.a.createElement(ze,{tab:"关联产品",key:"1"},r.a.createElement("div",{className:"application-detail-content flex-column flex1"},r.a.createElement("div",{className:"content flex-column clearfix"},r.a.createElement("div",{className:"content-header"},r.a.createElement("div",{className:"app-type"},_.appTypeAndroidHTML,_.appTypeIosHTML,_.weChatHTML),r.a.createElement(c.a,{type:"primary",className:"add-relation",onClick:function(){return e.showDialog("showAddProductRelationDialog")}},"添加")),r.a.createElement("ul",{className:"product-list flex1"},V&&V.length>0?V.map(function(t,a){var n=t.productId,o=t.productName,l=t.productIcon;return r.a.createElement("li",{key:a,className:"list-item flex-column"},r.a.createElement("i",{className:"product-pic"},r.a.createElement(p.a,{icon:l})),r.a.createElement("div",{className:"product-name single-text flex1 flex-row"},o),r.a.createElement("div",{className:"product-id flex-row flex1"},n),r.a.createElement("a",{href:"javascript:",onClick:function(){return e.showDialog("showDeleteDialog","curProductID",n,"targetName",o)},className:"delete-product-relation"},r.a.createElement(u.a,{style:{fontSize:20},type:"icon-shanchu"})))}):r.a.createElement(h.a,null))))):null,n&&0==P.value?r.a.createElement(ze,{tab:"版本发布",key:"2"},r.a.createElement("div",{className:"application-detail-content flex-column flex1"},r.a.createElement("div",{className:"add-version-wrapper"},r.a.createElement("h5",null,"版本历史"),r.a.createElement(c.a,{className:"add-version",type:"primary",onClick:this.addNewVersion},"创建应用版本")),r.a.createElement(X.a,{className:"version-content",dataSource:M,columns:q,pagination:{onChange:this.onChange,defaultCurrent:1,current:R.pageIndex,pageSize:R.pageRows,total:R.totalRows,showQuickJumper:!0}}))):null)),a&&r.a.createElement(d.a,{visible:a,modalOKHandle:function(){return e.updateOkHandle(k)},modalCancelHandle:function(){return e.updateCancelHandle("showDeleteDialog")},targetName:Ze[x].targetName,title:Ze[x].title,descText:Ze[x].desc,needWarnIcon:!0,tipText:Ze[x].tip}),s&&r.a.createElement(me,Ve({},this.state,{showDialog:this.showDialog,updateRelaProduct:this.updateRelaProduct})),i&&r.a.createElement(Ne,Ve({},this.state,{showDialog:this.showDialog,createAppVersion:this.createAppVersion})))}}])&&He(a.prototype,o),l&&He(a,l),t}();function Qe(e){var t=e.match.path;return r.a.createElement(o.e,null,r.a.createElement(o.c,{path:"".concat(t,"/list"),component:T}),r.a.createElement(o.c,{path:"".concat(t,"/add"),component:U}),r.a.createElement(o.c,{path:"".concat(t,"/details/:appId"),component:Ke}),r.a.createElement(o.b,{to:"".concat(t,"/list")}))}a.d(t,"default",function(){return Qe})},KmTs:function(e,t,a){},O7vH:function(e,t,a){},RVjv:function(e,t,a){},ivPg:function(e,t,a){e.exports=a.p+"static/images/no-source-tip.681eb7825cf81b5da33967ff8571f3c6.png"},lrZY:function(e,t,a){},qPrt:function(e,t,a){},yqJg:function(e,t,a){"use strict";a.d(t,"a",function(){return n});var n=0}}]);